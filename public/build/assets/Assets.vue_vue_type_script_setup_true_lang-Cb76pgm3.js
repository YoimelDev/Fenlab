import{_ as m}from"./DataTable.vue_vue_type_script_setup_true_lang-CKb6Wefn.js";import{t as o}from"./plyr-pxOHe_PU.js";import{_ as g,b as y}from"./index-CjO1wXPP.js";import{_ as i}from"./index-DrpvYroD.js";import{C as t,D as l,d as h,y as p,o as A,c as w,u as C}from"./app-DPKkFb5k.js";import{f as d}from"./fenlab.api-t-3ic75c.js";import{_ as f}from"./AssetActions.vue_vue_type_script_setup_true_lang-l4sbNQrU.js";const u=[{header:"ID cliente",accessorKey:"clientId",meta:"!w-[78px]",cell:s=>{const e=s.getValue();return t("p",{class:"w-[224px] truncate"},e)}},{header:"ID fenlab",accessorKey:"fenciaId"},{header:"ESTADO",accessorKey:"status",cell:s=>{const e=s.getValue();return t("div",{class:"font-medium"},t(g,{variant:y[e]},e||"-"))}}],P=[...u.slice(0,3),{header:"PROVINCIA",accessorKey:"provincia",cell:s=>{const e=s.getValue();return t("p",{class:"font-medium"},e||"-")}},{header:"DEUDA",accessorKey:"deuda",cell:s=>{const e=s.getValue();return e?t("p",{class:"font-medium"},l(e)):t("p",{class:"font-medium"},"-")}},{header:"VALOR MERCADO",accessorKey:"valorMercado",cell:s=>{const e=s.getValue();return e?t("p",{class:"font-medium"},l(e)):t("p",{class:"font-medium"},"-")}},{header:"FASE JUDICIAL",accessorKey:"faseJudicial",cell:s=>{const e=s.getValue();return t("p",{class:"font-medium"},e||"-")}},{header:"PRECIO PROPUESTO",accessorKey:"precioPropuesto",cell:s=>{const e=s.getValue();return e?t("p",{class:"font-medium"},l(e)):t("p",{class:"font-medium"},"-")}},{header:"FICHA",accessorKey:"pdf",cell:s=>{const e=s.row.original,a=s.getValue();return t(i,{variant:"ghost",size:"xs",onClick:async()=>{try{if(a&&a.url)window.open(a.url,"_blank","noopener"),o({variant:"info",title:"Asset downloaded successfully"});else{const{data:r}=await d.post("",{method:"get",path:`projects/${e.projectId}/assets/${e.id}`}),c=r.assetPdf.url;window.open(c,"_blank","noopener"),o({variant:"info",title:"Asset downloaded successfully"})}}catch{o({variant:"danger",title:"Error downloading asset"})}}},()=>"Descargar")}},{header:"SOLICITAR PUBLICACIÓN",accessorKey:"id",cell:s=>{var a,n;const e=s.row.original;return((n=(a=e.npl)==null?void 0:a.credito)==null?void 0:n.isPublishable)===!0?t("p",{class:"text-green-600 font-medium"},"Publicado"):t(f,{asset:e})}}],I=[...u.slice(0,3),{header:"TIPO OCUPANTE",accessorKey:"tipoOcupante",cell:s=>{const e=s.getValue();return t("p",{class:"font-medium"},e||"-")}},{header:"PROVINCIA",accessorKey:"provincia",cell:s=>{const e=s.getValue();return t("p",{class:"font-medium"},e||"-")}},{header:"VALOR MERCADO",accessorKey:"valorMercado",cell:s=>{const e=s.getValue();return e?t("p",{class:"font-medium"},l(e)):t("p",{class:"font-medium"},"-")}},{header:"PRECIO PROPUESTO",accessorKey:"precioPropuesto",cell:s=>{const e=s.getValue();return e?t("p",{class:"font-medium"},l(e)):t("p",{class:"font-medium"},"-")}},{header:"FICHA",accessorKey:"pdf",cell:s=>{const e=s.row.original,a=s.getValue();return t(i,{variant:"ghost",size:"xs",onClick:async()=>{try{if(a&&a.url)window.open(a.url,"_blank","noopener"),o({variant:"info",title:"Asset downloaded successfully"});else{const{data:r}=await d.post("",{method:"get",path:`projects/${e.projectId}/assets/${e.id}`}),c=r.assetPdf.url;window.open(c,"_blank","noopener"),o({variant:"info",title:"Asset downloaded successfully"})}}catch{o({variant:"danger",title:"Error downloading asset"})}}},()=>"Descargar")}},{header:"SOLICITAR PUBLICACIÓN",accessorKey:"id",cell:s=>{var a;const e=s.row.original;return((a=e.reo)==null?void 0:a.isPublishable)===!0?t("p",{class:"text-green-600 font-medium"},"Publicado"):t(f,{asset:e})}}],v=[...u.slice(0,3),{header:"PRECIO COMPRA",accessorKey:"precioCompra",cell:s=>{const e=s.getValue();return e?t("p",{class:"font-medium"},l(e)):t("p",{class:"font-medium"},"-")}},{header:"MODALIDAD COMPRA",accessorKey:"modalidadCompra",cell:s=>{const e=s.getValue();return t("p",{class:"font-medium"},e||"-")}},{header:"FASE JUDICIAL",accessorKey:"faseJudicial",cell:s=>{const e=s.getValue();return t("p",{class:"font-medium"},e||"-")}},{header:"TIR BRUTA",accessorKey:"tirBruta",cell:s=>{const e=s.getValue();return e!=null?t("p",{class:"font-medium"},`${e.toFixed(2)}%`):t("p",{class:"font-medium"},"-")}},{header:"OUTPUT FENLAB",accessorKey:"pdf",cell:s=>{const e=s.row.original,a=s.getValue();return t(i,{variant:"ghost",size:"xs",onClick:async()=>{try{if(a&&a.url)window.open(a.url,"_blank","noopener"),o({variant:"info",title:"Asset downloaded successfully"});else{const{data:r}=await d.post("",{method:"get",path:`projects/${e.projectId}/assets/${e.id}`}),c=r.assetPdf.url;window.open(c,"_blank","noopener"),o({variant:"info",title:"Asset downloaded successfully"})}}catch{o({variant:"danger",title:"Error downloading asset"})}}},()=>"Descargar")}},{header:"DECK",accessorKey:"deck",cell:s=>{s.row.original;const e=s.getValue(),a=async()=>{try{e&&e.url?(window.open(e.url,"_blank","noopener"),o({variant:"info",title:"Deck downloaded successfully"})):o({variant:"danger",title:"Deck not available"})}catch{o({variant:"danger",title:"Error downloading deck"})}};return e&&e.url?t(i,{variant:"ghost",size:"xs",onClick:a},()=>"Descargar"):t("p",{class:"font-medium"},"-")}}],_=s=>s==="NPL_BUY"?v:s==="NPL"?P:I,k=h({__name:"Assets",props:{assets:{type:Array,required:!0},modelType:{type:String,required:!1}},setup(s){const e=s,a=p(()=>{if(e.modelType)return e.modelType==="NPL_BUY"?"NPL_BUY":e.modelType==="REO"?"REO":(e.modelType==="NPL","NPL");if(e.assets&&e.assets.length>0){const r=e.assets[0];if(r.npl)return r.precioCompra!==null||r.modalidadCompra!==null?"NPL_BUY":"NPL";if(r.reo)return"REO"}return"NPL"}),n=p(()=>_(a.value));return(r,c)=>(A(),w(C(m),{columns:n.value,data:s.assets,"column-filter":"clientId"},null,8,["columns","data"]))}});export{k as _};
