import{_ as M}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CvH_zpqc.js";import{Q as B,C as t,D as f,d as R,y as x,r as C,O as U,q as j,o as i,h,a as c,u as o,Z as q,w as u,b,e as N,t as O,c as V,F as A,A as Q,k as E,j as k}from"./app-Co_EbOm9.js";import{_ as Z}from"./DataTable.vue_vue_type_script_setup_true_lang-Ckfm-Qof.js";import{_ as z}from"./PictureIcon-CX28c6Xj.js";import"./plyr-DoaJcgkF.js";import{_ as G,a as H,b as J,c as W,d as X}from"./SelectValue.vue_vue_type_script_setup_true_lang-BK-wCTHu.js";import{_ as Y}from"./index-BO8GtSoy.js";import{r as ee}from"./recordTypes-32YOpbUo.js";import"./index-Ccd48UUr.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DmLfZU7_.js";import"./index-CvcY50ai.js";import"./index-Bb4qSo10.js";import"./index-Cp_0Qu0l.js";import"./Cross2Icon-DadwhqO4.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-B1Le_Zju.js";import"./Input.vue_vue_type_script_setup_true_lang-B3Vljm6e.js";import"./TableRow.vue_vue_type_script_setup_true_lang-CcrtYglZ.js";import"./CheckIcon-B25mm81R.js";const L=B();var P,w,I;const ae=((I=(w=(P=L.props)==null?void 0:P.auth)==null?void 0:w.salesforceUser)==null?void 0:I.rols)==="Admin";var K,S;console.log((S=(K=L.props)==null?void 0:K.auth)==null?void 0:S.salesforceUser);const T=[{header:"ID CLIENTE",accessorKey:"idCliente"},{header:"ID FENCIA",accessorKey:"productReference"},{header:"DETALLE",accessorKey:"name"},{header:"PRECIO MÍNIMO",accessorKey:"minimumPrice",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},f(e)):t("p",{class:"font-medium"},"-")}},{header:"Precio de referencia",accessorKey:"referencePrice",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},f(e)):t("p",{class:"font-medium"},"-")}},{header:"Ofertas",accessorKey:"numberOfBids",cell:a=>{const e=a.getValue();return t("p",e>0?e.toString():"-")}},{header:"Mejor oferta",accessorKey:"maximumBid",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium"},f(e)):t("p",{class:"font-medium"},"-")}},{header:"TIPO",accessorKey:"recordType",cell:a=>{const e=a.getValue();return t("p",{class:"text-grey"},ee[e]||e)}},{header:"ESTADO",accessorKey:"stage",cell:a=>{const m=a.row.original.numberOfBids>0;return t("div",{class:"font-medium"},t(Y,{variant:m?"success":"pending"},m?"CON OFERTA":"SIN OFERTA"))}}];ae&&T.splice(1,0,{header:"EMPRESA",accessorKey:"companyName"});const re=T,se={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},te={class:"flex items-center gap-4 text-xl font-bold leading-5"},oe={class:"flex items-center gap-4"},Ve=R({__name:"Published",props:{published:{}},setup(a){var y,g,v;const e=a,_=((v=(g=(y=B().props)==null?void 0:y.auth)==null?void 0:g.salesforceUser)==null?void 0:v.rols)==="Admin",d=x(()=>{var r;return((r=e.published)==null?void 0:r.Auctions)??[]}),p=C(new Set);U(()=>{var r;return(r=e.published)==null?void 0:r.Auctions},r=>{r&&r.forEach(s=>{s.companyName&&p.value.add(s.companyName)})},{immediate:!0});const $=x(()=>Array.from(p.value).sort()),l=C("");function F(r){l.value=r,k.get(route("my-publications.published"),{companyName:r||void 0},{preserveState:!0,preserveScroll:!0,only:["published"]})}function D(){l.value="",k.get(route("my-publications.published"),{},{preserveState:!0,preserveScroll:!0,only:["published"]})}return j(()=>{const s=new URL(window.location.href).searchParams.get("companyName");s&&(l.value=s,s&&p.value.add(s))}),(r,s)=>(i(),h(A,null,[c(o(q),{title:"Mis Publicaciones"}),c(M,null,{default:u(()=>[b("header",se,[b("h1",te,[c(o(z),{variant:"black",class:"text-black w-8 h-8"}),N(" Mis Publicaciones | Publicadas ( "+O(d.value.length)+" ) ",1)]),b("div",oe,[_?(i(),V(o(X),{key:0,modelValue:l.value,"onUpdate:modelValue":[s[0]||(s[0]=n=>l.value=n),F]},{default:u(()=>[c(o(G),{class:"w-[250px] border border-black rounded-md"},{default:u(()=>[c(o(H),{placeholder:l.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),c(o(J),null,{default:u(()=>[(i(!0),h(A,null,Q($.value,n=>(i(),V(o(W),{key:n,value:n},{default:u(()=>[N(O(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):E("",!0),l.value?(i(),h("button",{key:1,onClick:D,class:"px-3 py-1 text-sm border border-black rounded-md hover:bg-gray-100"}," Limpiar filtro ")):E("",!0)])]),c(o(Z),{columns:o(re),data:d.value,"column-filter":["id","fenlabId","prestashopId","companyName","productReference","name"]},null,8,["columns","data"])]),_:1})],64))}});export{Ve as default};
