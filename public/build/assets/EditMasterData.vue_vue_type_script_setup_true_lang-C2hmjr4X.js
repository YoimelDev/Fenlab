import{d as P,r as z,G as M,ag as H,o as i,c as h,w as e,a as l,u as a,e as s,b as n,g,z as v,t as E,v as c,x as m,F as w,j as N}from"./app-DXd3upE_.js";import{f as W}from"./fenlab.api-njFr3qRX.js";import{_ as y}from"./index-B3Rang4Z.js";import{_ as j}from"./Dialog.vue_vue_type_script_setup_true_lang-CB7P_YEP.js";import{_ as G}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-C07qHBAk.js";import{_ as I,a as L,b as O,c as T}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bfin-QP6.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-CYwbGssj.js";import{_ as x,a as V,b as C,c as u,d as $,e as r}from"./TableRow.vue_vue_type_script_setup_true_lang-DN_ACuhV.js";import{t as U}from"./plyr-PSGV0kqJ.js";import{_ as S}from"./ScrollArea.vue_vue_type_script_setup_true_lang-vEy2JDKI.js";const J={class:"content"},K={class:"flex flex-col gap-4"},Q=["onUpdate:modelValue"],R=["onUpdate:modelValue"],X={key:0,class:"mt-6"},Y=["onUpdate:modelValue"],Z=["onUpdate:modelValue"],ee=["onUpdate:modelValue"],le={class:"space-y-2"},ce=P({__name:"EditMasterData",props:{masterData:{type:Object,required:!0}},emits:["updated"],setup(k,{emit:A}){const D=k,b=z(!1),d=M({...D.masterData}),B=A,F=async()=>{try{await W.post("",{method:"post",path:"company-master-data",body:{...d}}),U({variant:"info",title:"Datos guardados correctamente"}),B("updated")}catch{U({variant:"danger",title:"¡Ups! Algo salió mal."})}finally{b.value=!1}};return(ae,p)=>{const f=H("Label");return i(),h(a(j),{open:b.value,"onUpdate:open":p[1]||(p[1]=_=>b.value=_)},{default:e(()=>[l(a(G),null,{default:e(()=>[l(a(y),{variant:"ghost",class:"text-blue text-sm font-medium",size:"sm"},{default:e(()=>[s(" Editar ")]),_:1})]),_:1}),l(a(T),null,{default:e(()=>[l(a(I),null,{default:e(()=>[l(a(L),null,{default:e(()=>[s(" Master data financiera ")]),_:1})]),_:1}),n("div",J,[n("div",K,[l(a(S),{class:"h-96 space-y-4 my-4 p-4 bg-white/100 rounded-sm border border-[#E5E7EB] shadow-sm"},{default:e(()=>{var _;return[l(a(x),null,{default:e(()=>[l(a(V),null,{default:e(()=>[l(a(C),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:e(()=>[l(a(u),{class:"!bg-[#ECECEC] w-[140px] z-50 relative"},{default:e(()=>[l(f,null,{default:e(()=>[s("AÑO")]),_:1})]),_:1}),l(a(u),null,{default:e(()=>[l(f,null,{default:e(()=>[s("IPC (%)")]),_:1})]),_:1}),l(a(u),null,{default:e(()=>[l(f,null,{default:e(()=>[s("HPA (%)")]),_:1})]),_:1})]),_:1})]),_:1}),l(a($),null,{default:e(()=>[(i(!0),g(w,null,v(d.macro,t=>(i(),h(a(C),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:t.ano},{default:e(()=>[l(a(r),{class:"!bg-[#ECECEC] font-bold w-[140px]"},{default:e(()=>[s(E(t.ano),1)]),_:2},1024),l(a(r),null,{default:e(()=>[c(n("input",{"onUpdate:modelValue":o=>t.IPC=o,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,Q),[[m,t.IPC]])]),_:2},1024),l(a(r),null,{default:e(()=>[c(n("input",{"onUpdate:modelValue":o=>t.HPA=o,class:"w-full h-full outline-none"},null,8,R),[[m,t.HPA]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),(_=d.brokerFee)!=null&&_.gestion?(i(),g("div",X,[l(f,null,{default:e(()=>[s("Broker Fee - Gestión")]),_:1}),l(a(x),{class:"mt-2"},{default:e(()=>[l(a(V),null,{default:e(()=>[l(a(C),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:e(()=>[l(a(u),{class:"!bg-[#ECECEC] z-50 relative"},{default:e(()=>[s(" Tramo ")]),_:1}),l(a(u),null,{default:e(()=>[s("Fee (%)")]),_:1}),l(a(u),null,{default:e(()=>[s("Cap")]),_:1}),l(a(u),null,{default:e(()=>[s("Hurdle")]),_:1})]),_:1})]),_:1}),l(a($),null,{default:e(()=>[(i(!0),g(w,null,v(d.brokerFee.gestion,t=>(i(),h(a(C),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:t.tramo},{default:e(()=>[l(a(r),{class:"!bg-[#ECECEC] font-bold"},{default:e(()=>[s(E(t.tramo),1)]),_:2},1024),l(a(r),null,{default:e(()=>[c(n("input",{"onUpdate:modelValue":o=>t.fee=o,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,Y),[[m,t.fee,void 0,{number:!0}]])]),_:2},1024),l(a(r),null,{default:e(()=>[c(n("input",{"onUpdate:modelValue":o=>t.cap=o,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,Z),[[m,t.cap,void 0,{number:!0}]])]),_:2},1024),l(a(r),null,{default:e(()=>[c(n("input",{"onUpdate:modelValue":o=>t.hurdle=o,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,ee),[[m,t.hurdle,void 0,{number:!0}]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):N("",!0)]}),_:1}),n("div",le,[l(f,{for:"wacc"},{default:e(()=>[s("WACC - Coste de Capital")]),_:1}),l(a(q),{id:"wacc",type:"text",placeholder:"WACC - Coste de Capital",class:"mt-2",required:"",autofocus:"",autocomplete:"wacc",modelValue:d.WACC,"onUpdate:modelValue":p[0]||(p[0]=_=>d.WACC=_),modelModifiers:{number:!0}},null,8,["modelValue"])])])]),l(a(O),{class:"flex justify-between mt-10"},{default:e(()=>[l(a(y),{class:"gap-1 w-full",variant:"green",size:"sm",onClick:F},{default:e(()=>[s(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}});export{ce as _};
