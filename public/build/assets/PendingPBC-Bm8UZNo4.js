import{_ as F}from"./PictureIcon-B_8hRLQ3.js";import{_ as O}from"./DataTable.vue_vue_type_script_setup_true_lang-Dj8rUoCY.js";import"./plyr-C-Ry2YlE.js";import{_ as R,a as T,b as j,c as M,d as L}from"./SelectValue.vue_vue_type_script_setup_true_lang-C0GBYYP0.js";import{_ as U}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DcRab2U1.js";import{Q as V,D as i,d as H,m as y,r as C,x as q,O as Q,o as c,h as u,a as n,u as r,Z as Y,w as m,b as d,e as v,t as A,c as P,F as B,B as Z,k as x,j as E}from"./app-tXDIlL-Y.js";import{_ as z,b as G}from"./index-UXS4YGSf.js";import{_ as J}from"./PostAction.vue_vue_type_script_setup_true_lang-CsZP6KBP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-D8jrP3Ja.js";import"./index-Dz3mQGoP.js";import"./index-Bb4qSo10.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-CV_JUWEh.js";import"./Input.vue_vue_type_script_setup_true_lang-DS87My7v.js";import"./index-vzg3N0KD.js";import"./TableRow.vue_vue_type_script_setup_true_lang-CgWhTuks.js";import"./CheckIcon-DXLfVYDu.js";import"./index-BVYLm9d4.js";import"./Cross2Icon-dVcTwfoA.js";import"./Dialog.vue_vue_type_script_setup_true_lang-jROV664k.js";import"./PostPubliDialog.vue_vue_type_script_setup_true_lang-B6_TNI0s.js";import"./fenlab.api-DW8NenaZ.js";import"./DialogContent.vue_vue_type_script_setup_true_lang-P7osHuQl.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-BYTd7TVh.js";import"./Label.vue_vue_type_script_setup_true_lang-DjGVYH4i.js";import"./Textarea.vue_vue_type_script_setup_true_lang-CchKpIkD.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-aXCgVvVc.js";import"./PostInformation.vue_vue_type_script_setup_true_lang-BBBvUv7s.js";import"./PendingApprovalInfo.vue_vue_type_script_setup_true_lang-DBHfOpPr.js";import"./recordTypes-32YOpbUo.js";import"./PendingPBCInfo.vue_vue_type_script_setup_true_lang-CSA2xAyg.js";import"./PendingNotaryInfo.vue_vue_type_script_setup_true_lang-C-W_Gw2U.js";import"./ScrollArea.vue_vue_type_script_setup_true_lang-B5DpE8Uu.js";const W=V();var D,k,w;const X=((w=(k=(D=W.props)==null?void 0:D.auth)==null?void 0:k.salesforceUser)==null?void 0:w.rols)==="Admin",I=[{header:"ID CLIENTE",accessorKey:"idCliente"},{header:"ID FENCIA",accessorKey:"productReference"},{header:"NOMBRE PROYECTO",accessorKey:"name",cell:a=>{const e=a.getValue();return i("p",{class:"font-bold"},e)}},{header:"OFERTA ACEPTADA",accessorKey:"offerValue"},{header:"TIPO PBC",accessorKey:"PBCtype"},{header:"ESTADO",accessorKey:"stage",cell:a=>{const e=a.getValue();return i("div",{class:"font-medium"},i(z,{variant:G[e]},e))}},{header:"FECHA APROBACIÓN PBC",accessorKey:"submittedPBCDate",cell:a=>{const e=a.getValue();if(!e)return i("p",{class:"font-medium"},"-");const f=new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});return i("p",{class:"font-medium"},f)}},{header:"FECHA APROBACIÓN PBC2",accessorKey:"submittedPBC2Date",cell:a=>{const e=a.getValue();return e||"-"}},{id:"actions",header:()=>"",accessorKey:"id",cell:a=>{const e={postType:"pendingPBC",data:a.row.original,endpoint:"/salesforce/approve-pbc"};return i(J,{postData:e})}}];X&&I.splice(1,0,{header:"EMPRESA",accessorKey:"titular"});const ee=I,ae={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},te={class:"flex items-center gap-4 text-xl font-bold leading-5"},re={class:"flex items-center gap-4"},Oe=H({__name:"PendingPBC",props:{projects:{}},setup(a){var h,b,g;const e=a,N=((g=(b=(h=V().props)==null?void 0:h.auth)==null?void 0:b.salesforceUser)==null?void 0:g.rols)==="Admin",_=y(()=>e.projects??[]),p=C(new Set);q(()=>{e.projects&&e.projects.forEach(o=>{o.titular&&p.value.add(o.titular)});const t=new URL(window.location.href).searchParams.get("companyName");t&&(s.value=t,p.value.add(t))}),Q(()=>e.projects,l=>{l&&l.forEach(t=>{t.titular&&p.value.add(t.titular)})},{immediate:!0});const K=y(()=>Array.from(p.value).sort()),s=C("");function S(l){s.value=l,E.get(route("my-publications.pending-pbc"),{companyName:l||void 0},{preserveState:!0,preserveScroll:!0,only:["projects"]})}function $(){s.value="",E.get(route("my-publications.pending-pbc"),{},{preserveState:!0,preserveScroll:!0,only:["projects"]})}return(l,t)=>(c(),u(B,null,[n(r(Y),{title:"Mis Publicaciones"}),n(U,null,{default:m(()=>[d("header",ae,[d("h1",te,[n(r(F),{variant:"black",class:"text-black w-8 h-8"}),v(" Mis Publicaciones | Aprobación PBC ( "+A(_.value.length)+" ) ",1)]),d("div",re,[N?(c(),P(r(L),{key:0,modelValue:s.value,"onUpdate:modelValue":[t[0]||(t[0]=o=>s.value=o),S]},{default:m(()=>[n(r(R),{class:"w-[250px] border border-black rounded-md"},{default:m(()=>[n(r(T),{placeholder:s.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),n(r(j),null,{default:m(()=>[(c(!0),u(B,null,Z(K.value,o=>(c(),P(r(M),{key:o,value:o},{default:m(()=>[v(A(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):x("",!0),s.value?(c(),u("button",{key:1,onClick:$,class:"px-3 py-1 text-sm border border-black rounded-md hover:bg-gray-100"}," Limpiar filtro ")):x("",!0)])]),n(r(O),{columns:r(ee),data:_.value,"column-filter":["clientId","fenlabId","fenciaId","salesforceId","titular","name","productReference"]},null,8,["columns","data"])]),_:1})],64))}});export{Oe as default};
