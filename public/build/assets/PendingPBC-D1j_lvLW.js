import{_ as B}from"./PictureIcon-DFg6c5n-.js";import{_ as x}from"./DataTable.vue_vue_type_script_setup_true_lang-BuJyaLCa.js";import"./plyr-BntakhZu.js";import{_ as E,a as w,b as V,c as D,d as I}from"./SelectValue.vue_vue_type_script_setup_true_lang-V5Wm5ifp.js";import{_ as N}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DIB-mnGE.js";import{Q as S,D as c,d as $,m as k,r as F,x as K,o as m,h as u,a as s,u as r,Z as O,w as l,b as d,e as f,t as _,F as g,B as R,c as j,k as T,j as h}from"./app-eACbP6ZP.js";import{_ as M,b as L}from"./index-DqHDEH0c.js";import{_ as U}from"./PostAction.vue_vue_type_script_setup_true_lang-BN4eBqEo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CEZe_Lfp.js";import"./index-K8XMFSnG.js";import"./index-Bb4qSo10.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-CeEW3sCd.js";import"./Input.vue_vue_type_script_setup_true_lang-ORNQUY0e.js";import"./index-BdjMDfyd.js";import"./TableRow.vue_vue_type_script_setup_true_lang-CrlsSZ7k.js";import"./CheckIcon-BRKK7ysp.js";import"./index-E8E8D0oD.js";import"./Cross2Icon-mDsFg_Zo.js";import"./Dialog.vue_vue_type_script_setup_true_lang-DLvp0pqn.js";import"./PostPubliDialog.vue_vue_type_script_setup_true_lang-BLRoBsSh.js";import"./fenlab.api-cWLRZ0Sr.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-C_GKu-hB.js";import"./Label.vue_vue_type_script_setup_true_lang-DER3lwcp.js";import"./Textarea.vue_vue_type_script_setup_true_lang-BQqHSxnM.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-37L3gNIe.js";import"./PostInformation.vue_vue_type_script_setup_true_lang-DUEL0xXU.js";import"./PendingApprovalInfo.vue_vue_type_script_setup_true_lang-DuKciJj2.js";import"./recordTypes-32YOpbUo.js";import"./PendingPBCInfo.vue_vue_type_script_setup_true_lang-rmhckbnb.js";import"./PendingNotaryInfo.vue_vue_type_script_setup_true_lang-CO9YWg-q.js";import"./ScrollArea.vue_vue_type_script_setup_true_lang-6C0YblS9.js";const H=S();var y,C,b;const q=((b=(C=(y=H.props)==null?void 0:y.auth)==null?void 0:C.salesforceUser)==null?void 0:b.rols)==="Admin",v=[{header:"ID FENCIA",accessorKey:"fenlabId"},{header:"NOMBRE PROYECTO",accessorKey:"name",cell:t=>{const e=t.getValue();return c("p",{class:"font-bold"},e)}},{header:"OFERTA ACEPTADA",accessorKey:"offerValue"},{header:"TIPO PBC",accessorKey:"PBCtype"},{header:"ESTADO",accessorKey:"stage",cell:t=>{const e=t.getValue();return c("div",{class:"font-medium"},c(M,{variant:L[e]},e))}},{header:"FECHA APROBACIÓN PBC",accessorKey:"submittedPBCDate",cell:t=>{const e=t.getValue();if(!e)return c("p",{class:"font-medium"},"-");const p=new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});return c("p",{class:"font-medium"},p)}},{header:"FECHA APROBACIÓN PBC2",accessorKey:"submittedPBC2Date",cell:t=>{const e=t.getValue();return e||"-"}},{id:"actions",header:()=>"",accessorKey:"id",cell:t=>{const e={postType:"pendingPBC",data:t.row.original,endpoint:"/salesforce/approve-pbc"};return c(U,{postData:e})}}];q&&v.splice(1,0,{header:"EMPRESA",accessorKey:"titular"});const Q=v,Y={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},Z={class:"flex items-center gap-4 text-xl font-bold leading-5"},z={class:"flex items-center gap-4"},Ve=$({__name:"PendingPBC",props:{projects:{}},setup(t){const e=t,p=k(()=>{const a=new Set;return e.projects.forEach(o=>{o.titular&&a.add(o.titular)}),Array.from(a).sort()}),n=F("");function P(a){n.value=a,h.get(route("my-publications.pending-pbc"),{companyName:a||void 0},{preserveState:!0,preserveScroll:!0,only:["projects"]})}function A(){n.value="",h.get(route("my-publications.pending-pbc"),{},{preserveState:!0,preserveScroll:!0,only:["projects"]})}return K(()=>{const o=new URL(window.location.href).searchParams.get("companyName");o&&(n.value=o)}),(a,o)=>(m(),u(g,null,[s(r(O),{title:"Mis Publicaciones"}),s(N,null,{default:l(()=>[d("header",Y,[d("h1",Z,[s(r(B),{variant:"black",class:"text-black w-8 h-8"}),f(" Mis Publicaciones | Aprobación PBC ( "+_(a.projects.length)+" ) ",1)]),d("div",z,[s(r(E),{modelValue:n.value,"onUpdate:modelValue":[o[0]||(o[0]=i=>n.value=i),P]},{default:l(()=>[s(r(w),{class:"w-[250px]"},{default:l(()=>[s(r(V),{placeholder:n.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),s(r(D),null,{default:l(()=>[(m(!0),u(g,null,R(p.value,i=>(m(),j(r(I),{key:i,value:i},{default:l(()=>[f(_(i),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),n.value?(m(),u("button",{key:0,onClick:A,class:"text-sm text-gray-500 hover:text-gray-700"}," Limpiar filtro ")):T("",!0)])]),s(r(x),{columns:r(Q),data:a.projects,"column-filter":["clientId","fenlabId","fenciaId","salesforceId","titular","name","productReference"]},null,8,["columns","data"])]),_:1})],64))}});export{Ve as default};
