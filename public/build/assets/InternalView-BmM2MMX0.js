import{o,g as h,b as a,d as b,j as v,l as y,c as f,w as n,m as L,A as F,B as I,p as k,u as e,H as oe,r as M,a as r,Z as re,k as le,t as _,e as x,F as S,z as U,n as Y,i as ne}from"./app-Vo4jY91Q.js";import{_ as ie}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-VpOjKejo.js";import{_ as O,b as R}from"./index-D8UEApn1.js";import{_ as B}from"./index-DBEP-Tft.js";import{_ as ce}from"./ArrowIcon.vue_vue_type_script_setup_true_lang-DT7XyV-i.js";import{I as de}from"./InfoIcon-BWeCwBis.js";import{_ as pe,a as ue,b as X,c as q,X as D}from"./TabsContent.vue_vue_type_script_setup_true_lang-CWxZzfCJ.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as fe,b as me}from"./index-CJV4F9uY.js";import{t as _e}from"./plyr-BOET43mv.js";import{x as he,c as $,t as ge,B as z,e as ve,n as Ce,l as xe,o as we,r as ye}from"./utils-KEWrmdIq.js";import{_ as be}from"./Assets.vue_vue_type_script_setup_true_lang-CotWkccP.js";import{f as ke}from"./fenlab.api-DiC8kRvE.js";import"./PictureIcon-BAiqgGOe.js";import"./index-CLpLi6H7.js";import"./Cross2Icon-DHMsHfxq.js";import"./index-Bb4qSo10.js";import"./DataTable.vue_vue_type_script_setup_true_lang-CXNM2xEc.js";import"./Input.vue_vue_type_script_setup_true_lang-iZpvuL8t.js";import"./TableRow.vue_vue_type_script_setup_true_lang-B_SMjMr8.js";import"./DataTableDropdown.vue_vue_type_script_setup_true_lang-C7WOxvXr.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-DyNK062_.js";import"./ellipsis-ryrfK8sE.js";import"./PostDialog.vue_vue_type_script_setup_true_lang-BjffTlHE.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-CIBZfx1o.js";const $e={},je={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Me=a("path",{d:"M13 9V11.6667C13 12.0203 12.8595 12.3594 12.6095 12.6095C12.3594 12.8595 12.0203 13 11.6667 13H2.33333C1.97971 13 1.64057 12.8595 1.39052 12.6095C1.14048 12.3594 1 12.0203 1 11.6667V9M3.66667 5.66667L7 9M7 9L10.3333 5.66667M7 9V1",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Be=[Me];function Le(p,s){return o(),h("svg",je,Be)}const G=P($e,[["render",Le]]),ze={},Ve={width:"8",height:"28",viewBox:"0 0 8 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ae=a("path",{d:"M4 27.6667C5.47276 27.6667 6.66667 26.4728 6.66667 25C6.66667 23.5272 5.47276 22.3333 4 22.3333C2.52724 22.3333 1.33333 23.5272 1.33333 25C1.33333 26.4728 2.52724 27.6667 4 27.6667ZM4.35355 0.646446C4.15829 0.451185 3.84171 0.451185 3.64645 0.646446L0.464465 3.82843C0.269203 4.02369 0.269203 4.34027 0.464465 4.53553C0.659727 4.7308 0.97631 4.7308 1.17157 4.53553L4 1.70711L6.82843 4.53553C7.02369 4.7308 7.34027 4.7308 7.53553 4.53553C7.7308 4.34027 7.7308 4.02369 7.53553 3.82843L4.35355 0.646446ZM4.5 25L4.5 1L3.5 1L3.5 25L4.5 25Z",fill:"#686868"},null,-1),Se=[Ae];function De(p,s){return o(),h("svg",Ve,Se)}const K=P(ze,[["render",De]]),Fe={key:0,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ie=a("g",{"clip-path":"url(#clip0_2013_3043)"},[a("path",{d:"M6.06004 6.00004C6.21678 5.55449 6.52614 5.17878 6.93334 4.93946C7.34055 4.70015 7.8193 4.61267 8.28483 4.69252C8.75035 4.77236 9.17258 5.01439 9.47676 5.37573C9.78093 5.73706 9.94741 6.19439 9.94671 6.66671C9.94671 8.00004 7.94671 8.66671 7.94671 8.66671M8.00004 11.3334H8.00671M14.6667 8.00004C14.6667 11.6819 11.6819 14.6667 8.00004 14.6667C4.31814 14.6667 1.33337 11.6819 1.33337 8.00004C1.33337 4.31814 4.31814 1.33337 8.00004 1.33337C11.6819 1.33337 14.6667 4.31814 14.6667 8.00004Z",stroke:"#686868","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Pe=a("defs",null,[a("clipPath",{id:"clip0_2013_3043"},[a("rect",{width:"16",height:"16",fill:"white"})])],-1),Ze=[Ie,Pe],Ee=b({__name:"CircleIcon",props:{variant:{}},setup(p){return(s,u)=>s.variant==="help"?(o(),h("svg",Fe,Ze)):v("",!0)}}),Te={},Ne={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},He=a("path",{d:"M14.5 10V12.6667C14.5 13.0203 14.3595 13.3594 14.1095 13.6095C13.8594 13.8595 13.5203 14 13.1667 14H3.83333C3.47971 14 3.14057 13.8595 2.89052 13.6095C2.64048 13.3594 2.5 13.0203 2.5 12.6667V10M11.8333 5.33333L8.5 2M8.5 2L5.16667 5.33333M8.5 2V10",stroke:"white","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Ue=[He];function Ye(p,s){return o(),h("svg",Ne,Ue)}const Oe=P(Te,[["render",Ye]]);function Re(p,s){return o(),h("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[a("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:"currentColor"})])}const Xe=b({__name:"Stepper",props:{defaultValue:{},orientation:{},dir:{},modelValue:{},linear:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue"],setup(p,{emit:s}){const u=p,m=s,i=y(()=>{const{class:g,...C}=u;return C}),d=he(i,m);return(g,C)=>(o(),f(e(ge),k({class:e($)("flex gap-2",u.class)},e(d)),{default:n(j=>[L(g.$slots,"default",F(I(j)))]),_:3},16,["class"]))}}),qe=b({__name:"StepperItem",props:{step:{},disabled:{type:Boolean},completed:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(p){const s=p,u=y(()=>{const{class:i,...d}=s;return d}),m=z(u);return(i,d)=>(o(),f(e(ve),k(e(m),{class:e($)("flex items-center gap-2 group data-[disabled]:pointer-events-none",s.class)}),{default:n(g=>[L(i.$slots,"default",F(I(g)))]),_:3},16,["class"]))}}),Ge=b({__name:"StepperTrigger",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const s=p,u=y(()=>{const{class:i,...d}=s;return d}),m=z(u);return(i,d)=>(o(),f(e(Ce),k(e(m),{class:e($)("p-1 flex flex-col items-center text-center gap-1 rounded-md",s.class)}),{default:n(()=>[L(i.$slots,"default")]),_:3},16,["class"]))}}),Ke=b({__name:"StepperTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const s=p,u=y(()=>{const{class:i,...d}=s;return d}),m=z(u);return(i,d)=>(o(),f(e(xe),k(e(m),{class:e($)("text-md font-semibold whitespace-nowrap",s.class)}),{default:n(()=>[L(i.$slots,"default")]),_:3},16,["class"]))}}),Je=b({__name:"StepperDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const s=p,u=y(()=>{const{class:i,...d}=s;return d}),m=z(u);return(i,d)=>(o(),f(e(we),k(e(m),{class:e($)("text-xs text-muted-foreground",s.class)}),{default:n(g=>[L(i.$slots,"default",F(I(g)))]),_:3},16,["class"]))}}),Qe=b({__name:"StepperSeparator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(p){const s=p,u=y(()=>{const{class:i,...d}=s;return d}),m=z(u);return(i,d)=>(o(),f(e(ye),k(e(m),{class:e($)("bg-muted","group-data-[disabled]:bg-muted group-data-[disabled]:opacity-50","group-data-[state=completed]:bg-accent-foreground",s.class)}),null,16,["class"]))}}),We={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},et={class:"flex items-center gap-4"},tt={class:"hidden sm:inline capitalize"},st={class:"mt-5 flex flex-col items-center text-center"},at={class:"my-4 p-2 bg-white"},ot={key:0,class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-sm text-red-600",style:{"white-space":"pre-line"}},rt={key:0,class:"flex items-center gap-2 mb-5 text-grey text-sm"},lt={key:1,class:"w-full mb-4"},nt={class:"flex items-center gap-2"},it={class:"text-sm font-medium"},ct={class:"text-xs text-gray-500"},dt={key:1,class:"my-4"},pt={class:"relative flex items-center gap-4 w-full p-4 bg-white"},ut={class:"text-black text-lg font-bold"},ft={class:"text-grey text-sm"},mt=["href"],_t={key:3,class:"my-4"},ht={class:"relative flex items-center gap-4 w-full p-4 bg-white"},gt={class:"text-black text-lg font-bold"},vt={class:"text-grey text-sm"},Ct=["href"],Ot=b({__name:"InternalView",props:{project:{},assets:{}},setup(p){const s=p,u=oe("$loading"),m=M("analysis"),i=M([]),d=M(),g=M(null),C=M(""),j=[{step:1,title:"Carga Cliente",description:fe(s.project.createdAt,"DD/MM/YYYY")},{step:2,title:"Análisis Fenlab",description:""},{step:3,title:"Carga definitiva",description:""}],A=y(()=>{switch(s.project.status){case"Sin empezar":return 1;case"Análisis en curso":return 2;case"Análisis completo":case"Carga definitiva":return 3;default:return 1}}),Z=t=>{const l={"Sin empezar":1,"Análisis en curso":2,"Análisis completo":3,"Carga definitiva":3}[s.project.status];return t!==l};function E(t){i.value=[],t&&(i.value=t.map(c=>({file:c,name:c.name,size:c.size,type:c.type,lastModified:c.lastModified})))}const{isOverDropZone:J}=me(d,E);function Q(t){const c=t.target;c.files&&c.files.length>0&&E(Array.from(c.files))}const W=t=>{if(t===0)return"0 Bytes";const c=1024,l=["Bytes","KB","MB","GB"],w=Math.floor(Math.log(t)/Math.log(c));return parseFloat((t/Math.pow(c,w)).toFixed(2))+" "+l[w]};function ee(){g.value&&g.value.click()}const te=y(()=>s.project.status==="Análisis en curso"?"second-excel":"first-excel");async function se(t){var w,T,N;if(t.stopPropagation(),C.value="",i.value.length===0){C.value="No se ha seleccionado ningún archivo.";return}const c=u==null?void 0:u.show(),l=new FormData;l.append("method","post"),l.append("path",`projects/${s.project.id}/${s.project.modelType}/${te.value}`),l.append("file",i.value[0].file);try{const V=await ke.post("",l);if(!V.data.success){const ae=V.data.errors.list.map(H=>`${H.header}: ${H.error}`).join(`
`);C.value=ae;return}_e({variant:"info",title:"Archivo subido correctamente"}),i.value=[],g.value&&(g.value.value="")}catch(V){C.value=((N=(T=(w=V.response)==null?void 0:w.data)==null?void 0:T.message)==null?void 0:N.join(`
`))||"Error al subir el archivo"}finally{c==null||c.hide(),ne.reload()}}return(t,c)=>(o(),h(S,null,[r(e(re),{title:"Mis Análisis"}),r(ie,null,{default:n(()=>[a("header",We,[a("div",et,[r(e(B),{variant:"ghost","as-child":"",size:"sm"},{default:n(()=>[r(e(le),{href:t.route("analysis")},{default:n(()=>[r(e(ce),{class:"sm:mr-2 text-black",variant:"left"}),a("span",tt,_(t.project.name),1)]),_:1},8,["href"])]),_:1}),r(e(O),{variant:e(R)[t.project.modelType],size:"sm"},{default:n(()=>[x(_(t.project.modelType),1)]),_:1},8,["variant"]),A.value==2?(o(),f(e(Re),{key:0,class:"h-4 w-4 text-black animate-spin"})):(o(),f(e(de),{key:1})),r(e(O),{variant:e(R)[t.project.status],size:"sm"},{default:n(()=>[x(_(t.project.status),1)]),_:1},8,["variant"])])]),r(e(Xe),{modelValue:A.value,"onUpdate:modelValue":c[0]||(c[0]=l=>A.value=l),"allow-click":!1,class:"flex w-full items-start gap-2 my-10"},{default:n(()=>[(o(),h(S,null,U(j,l=>r(e(qe),{key:l.step,class:"relative flex w-full flex-col items-center justify-center",step:l.step},{default:n(({state:w})=>[l.step!==j[j.length-1].step?(o(),f(e(Qe),{key:0,class:"absolute left-[calc(50%+20px)] right-[calc(-50%+10px)] top-5 block h-0.5 shrink-0 rounded-full bg-[#686868]/30 group-data-[state=completed]:bg-electric-green"})):v("",!0),r(e(Ge),{"as-child":""},{default:n(()=>[r(e(B),{variant:"green",size:"icon",class:Y(["z-10 rounded-full shrink-0",[w==="active",w==="inactive"&&"bg-[#686868]/50",Z(l.step)&&"opacity-50 cursor-not-allowed"]]),disabled:Z(l.step)},{default:n(()=>[x(_(l.step),1)]),_:2},1032,["class","disabled"])]),_:2},1024),a("div",st,[r(e(Ke),{class:"text-sm font-semibold transition lg:text-base"},{default:n(()=>[x(_(l.title),1)]),_:2},1024),r(e(Je),{class:"sr-only text-xs text-black transition md:not-sr-only lg:text-sm"},{default:n(()=>[x(_(l.description),1)]),_:2},1024)])]),_:2},1032,["step"])),64))]),_:1},8,["modelValue"]),r(e(pe),{"default-value":"analysis","model-value":m.value,"onUpdate:modelValue":c[1]||(c[1]=l=>m.value=l)},{default:n(()=>[r(e(ue),{class:"grid w-[274px] grid-cols-2"},{default:n(()=>[r(e(X),{value:"analysis"},{default:n(()=>[x(" Análisis ")]),_:1}),r(e(X),{value:"assets"},{default:n(()=>[x(" Activos ")]),_:1})]),_:1}),r(e(q),{value:"analysis"},{default:n(()=>[a("div",at,[C.value?(o(),h("div",ot,_(C.value),1)):v("",!0),a("div",{ref_key:"dropZoneRef",ref:d,class:Y(["grid place-items-center p-5 border-2 border-dashed border-[#C1C1C1] rounded-sm",[e(J)&&"border-electric-green",C.value&&"border-red-300"]]),onClick:ee,role:"button"},[i.value.length===0?(o(),h("p",rt,[x(" Arrastra aquí tu archivo excel cumplimentado "),r(e(Ee),{variant:"help"})])):(o(),h("div",lt,[(o(!0),h(S,null,U(i.value,l=>(o(),h("div",{key:l.name,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[a("div",nt,[r(e(D),{class:"w-5 h-5"}),a("span",it,_(l.name),1)]),a("span",ct,_(W(l.size)),1)]))),128))])),a("input",{type:"file",ref_key:"fileInput",ref:g,onChange:Q,class:"hidden",accept:".xlsx,.xls"},null,544),r(e(B),{variant:"green",size:"xs",onClick:se},{default:n(()=>[r(e(Oe),{class:"mr-2"}),x(" "+_(i.value.length===0?"Cargar excel":"Subir archivo"),1)]),_:1})],2)]),t.project.firstExcel?(o(),f(e(K),{key:0})):v("",!0),t.project.firstExcel?(o(),h("div",dt,[a("div",pt,[t.project.firstExcel.extension=="xlsx"?(o(),f(e(D),{key:0})):v("",!0),a("div",null,[a("p",ut,_(t.project.firstExcel.title),1),a("p",ft,_(t.project.firstExcel.description),1)]),t.project.firstExcel.url?(o(),f(e(B),{key:1,variant:"ghost",size:"xs","as-child":""},{default:n(()=>[a("a",{class:"absolute top-4 right-4",href:t.project.firstExcel.url,target:"_blank",rel:"noopener noreferrer"},[r(e(G))],8,mt)]),_:1})):v("",!0)])])):v("",!0),t.project.template?(o(),f(e(K),{key:2})):v("",!0),t.project.template?(o(),h("div",_t,[a("div",ht,[t.project.template.extension=="xlsx"?(o(),f(e(D),{key:0})):v("",!0),a("div",null,[a("p",gt,_(t.project.template.title),1),a("p",vt,_(t.project.template.description),1)]),t.project.template.url?(o(),f(e(B),{key:1,variant:"ghost",size:"xs","as-child":""},{default:n(()=>[a("a",{class:"absolute top-4 right-4",href:t.project.template.url,target:"_blank",rel:"noopener noreferrer"},[r(e(G))],8,Ct)]),_:1})):v("",!0)])])):v("",!0)]),_:1}),r(e(q),{value:"assets"},{default:n(()=>[r(e(be),{assets:t.assets.data},null,8,["assets"])]),_:1})]),_:1},8,["model-value"])]),_:1})],64))}});export{Ot as default};
