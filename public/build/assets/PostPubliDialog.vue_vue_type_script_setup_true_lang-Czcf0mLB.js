import{d as x,P as E,Q as k,r as w,o as r,c as A,w as s,a as e,u as a,e as n,b as _,g as d,j as c}from"./app-BK0zXrpb.js";import{f as B}from"./fenlab.api-BBFGcWvd.js";import{_ as C}from"./index-jAP63ZJT.js";import{a as N,_ as T,b as U,c as I}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CsU7WViN.js";import{_ as i}from"./Label.vue_vue_type_script_setup_true_lang-CLUCVpt-.js";import{t as h}from"./plyr-lyjcyTlG.js";import{_ as P}from"./Textarea.vue_vue_type_script_setup_true_lang-hdgw6kof.js";import{_ as p,a as R}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-D3VAWxwD.js";import{_ as S}from"./PostInformation.vue_vue_type_script_setup_true_lang-BjlgO7f5.js";const z={class:"space-y-4 my-4 p-4 bg-white/100 rounded-sm border border-[#E5E7EB] shadow-sm"},q={class:"space-y-2"},O={class:"flex items-center space-x-2"},Q={key:0,class:"flex items-center space-x-2"},F={key:1,class:"flex items-center space-x-2"},G={key:2,class:"flex items-center space-x-2"},H={key:0,class:"space-y-2"},te=x({__name:"PostPubliDialog",props:{postData:{}},emits:["updated"],setup(D,{emit:b}){var v,g,y;const m=D,u=E("$loading"),j=(y=(g=(v=k().props)==null?void 0:v.auth)==null?void 0:g.salesforceUser)==null?void 0:y.email,t=w({fenlabId:m.postData.data.fenlabId,email:j,isApproved:!1,status:"",comments:""}),V=b,$=async()=>{const o=u==null?void 0:u.show();try{const l={salesforceId:m.postData.data.salesforceId,isApproved:t.value.status==="approved",isAccepted:t.value.status==="approved",isRejected:t.value.status==="rejected",changeDate:t.value.status==="date_change",approverRequesterOrRejectorEmail:t.value.email,interactingUserEmail:t.value.email};(t.value.status==="rejected"||t.value.status==="pending")&&(l.comments=t.value.comments),await B.post(m.postData.endpoint,l),h({variant:"info",title:"Datos guardados correctamente"})}catch(l){h({variant:"danger",title:"¡Ups! Algo salió mal.",description:l.response.data.error})}finally{o==null||o.hide(),V("updated")}};return(o,l)=>(r(),A(a(I),null,{default:s(()=>[e(a(T),null,{default:s(()=>[e(a(N),null,{default:s(()=>[n(" Detalles de la publicación ")]),_:1})]),_:1}),e(S,{information:o.postData.data,"post-type":o.postData.postType},null,8,["information","post-type"]),_("div",z,[_("div",q,[e(a(i),null,{default:s(()=>[n("Estado de la publicación")]),_:1}),e(a(R),{modelValue:t.value.status,"onUpdate:modelValue":l[0]||(l[0]=f=>t.value.status=f),class:"flex flex-col space-y-2"},{default:s(()=>[_("div",O,[e(a(p),{id:"approved",value:"approved"}),e(a(i),{for:"approved"},{default:s(()=>[n("Aprobar")]),_:1})]),o.postData.postType==="pendingNotary"?(r(),d("div",Q,[e(a(p),{id:"date_change",value:"date_change"}),e(a(i),{for:"date_change"},{default:s(()=>[n("Solicitar cambio de fecha")]),_:1})])):c("",!0),o.postData.postType==="pendingPBC"?(r(),d("div",F,[e(a(p),{id:"pending",value:"pending"}),e(a(i),{for:"pending"},{default:s(()=>[n("Solicitar documentación adicional")]),_:1})])):c("",!0),o.postData.postType!=="pendingNotary"?(r(),d("div",G,[e(a(p),{id:"rejected",value:"rejected"}),e(a(i),{for:"rejected"},{default:s(()=>[n("Rechazar")]),_:1})])):c("",!0)]),_:1},8,["modelValue"])]),t.value.status==="rejected"||t.value.status==="pending"?(r(),d("div",H,[e(a(i),{for:"comments"},{default:s(()=>[n("Comentarios")]),_:1}),e(a(P),{id:"comments",class:"h-24",modelValue:t.value.comments,"onUpdate:modelValue":l[1]||(l[1]=f=>t.value.comments=f),placeholder:"Añade un comentario..."},null,8,["modelValue"])])):c("",!0)]),e(a(U),null,{default:s(()=>[e(a(C),{class:"w-full",variant:"green",size:"sm",onClick:$},{default:s(()=>[n(" Enviar datos ")]),_:1})]),_:1})]),_:1}))}});export{te as _};
