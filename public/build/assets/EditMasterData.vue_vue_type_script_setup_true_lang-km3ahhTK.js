import{d as G,r as K,K as L,W as k,o as _,c as V,w as l,a as t,u as e,e as o,b as u,h as O,B as R,t as q,y as n,z as c,F as B}from"./app-BTUYw8fW.js";import{f as J}from"./fenlab.api-KqyFnfO1.js";import{_ as P}from"./index-BcLYc6QP.js";import{_ as Q}from"./Dialog.vue_vue_type_script_setup_true_lang-Bp7CGbaD.js";import{_ as X}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-DhmOZN-G.js";import{_ as Y,a as Z,b as h,c as ee}from"./DialogFooter.vue_vue_type_script_setup_true_lang-D1WnyFwj.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-DhtK6SNn.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-Cd8eX0sb.js";import{_ as z,a as W,b as v,c as f,d as H,e as p}from"./TableRow.vue_vue_type_script_setup_true_lang-cnksFI3q.js";import{t as S}from"./plyr-BRU_dRHD.js";import{_ as te,a as se,b as F,c as x}from"./TabsContent.vue_vue_type_script_setup_true_lang-CIa0Tcgg.js";const le={class:"content"},ae={class:"flex flex-col gap-4 max-h-[600px] overflow-y-auto"},oe=["onUpdate:modelValue"],ue=["onUpdate:modelValue"],de={class:"mt-6"},ne=["onUpdate:modelValue"],re=["onUpdate:modelValue"],ie=["onUpdate:modelValue"],me={class:"mt-6 grid grid-cols-1 gap-4"},fe={class:"space-y-2"},pe={class:"space-y-2"},_e={class:"space-y-2"},ce={class:"space-y-2"},Ce={class:"space-y-2"},Ue=G({__name:"EditMasterData",props:{masterData:{type:Object,required:!0}},emits:["updated"],setup(T,{emit:j}){var w,E,$,A,U,D;const b=T,g=K(!1),d=L({...b.masterData,successFee:{ventaCredito:((E=(w=b.masterData)==null?void 0:w.successFee)==null?void 0:E.ventaCredito)??0,subastaOrRemate:((A=($=b.masterData)==null?void 0:$.successFee)==null?void 0:A.subastaOrRemate)??0,repossessedAsset:((D=(U=b.masterData)==null?void 0:U.successFee)==null?void 0:D.repossessedAsset)??0}}),I=j,N=async()=>{try{const y={...d};delete y.fenciaFee,await J.post("",{method:"post",path:"company-master-data",body:y}),S({variant:"info",title:"Datos guardados correctamente"}),I("updated")}catch{S({variant:"danger",title:"¡Ups! Algo salió mal."})}finally{g.value=!1}};return(y,s)=>{const i=k("percentage"),M=k("currency");return _(),V(e(Q),{open:g.value,"onUpdate:open":s[5]||(s[5]=a=>g.value=a)},{default:l(()=>[t(e(X),null,{default:l(()=>[t(e(P),{variant:"ghost",class:"text-blue text-sm font-medium",size:"sm"},{default:l(()=>s[6]||(s[6]=[o(" Editar ")])),_:1})]),_:1}),t(e(ee),null,{default:l(()=>[t(e(Y),null,{default:l(()=>[t(e(Z),null,{default:l(()=>s[7]||(s[7]=[o(" Master data financiera ")])),_:1})]),_:1}),u("div",le,[u("div",ae,[t(e(te),{"default-value":"macro"},{default:l(()=>[t(e(se),{class:"grid grid-cols-3"},{default:l(()=>[t(e(F),{value:"macro"},{default:l(()=>s[8]||(s[8]=[o(" Macro ")])),_:1}),t(e(F),{value:"brokerFee"},{default:l(()=>s[9]||(s[9]=[o(" Broker Fee ")])),_:1}),t(e(F),{value:"successFee"},{default:l(()=>s[10]||(s[10]=[o(" Success Fee ")])),_:1})]),_:1}),t(e(x),{value:"macro"},{default:l(()=>[t(e(z),null,{default:l(()=>[t(e(W),null,{default:l(()=>[t(e(v),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:l(()=>[t(e(f),{class:"!bg-[#ECECEC] w-[140px] z-50 relative"},{default:l(()=>[t(e(m),null,{default:l(()=>s[11]||(s[11]=[o("AÑO")])),_:1})]),_:1}),t(e(f),null,{default:l(()=>[t(e(m),null,{default:l(()=>s[12]||(s[12]=[o("IPC (%)")])),_:1})]),_:1}),t(e(f),null,{default:l(()=>[t(e(m),null,{default:l(()=>s[13]||(s[13]=[o("HPA (%)")])),_:1})]),_:1})]),_:1})]),_:1}),t(e(H),null,{default:l(()=>[(_(!0),O(B,null,R(d.macro,a=>(_(),V(e(v),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:a.ano},{default:l(()=>[t(e(p),{class:"!bg-[#ECECEC] font-bold w-[140px]"},{default:l(()=>[o(q(a.ano),1)]),_:2},1024),t(e(p),null,{default:l(()=>[n(u("input",{"onUpdate:modelValue":r=>a.IPC=r,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,oe),[[i],[c,a.IPC]])]),_:2},1024),t(e(p),null,{default:l(()=>[n(u("input",{"onUpdate:modelValue":r=>a.HPA=r,class:"w-full h-full outline-none"},null,8,ue),[[i],[c,a.HPA]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t(e(x),{value:"brokerFee"},{default:l(()=>[u("div",de,[t(e(z),{class:"mt-2"},{default:l(()=>[t(e(W),null,{default:l(()=>[t(e(v),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:l(()=>[t(e(f),{class:"!bg-[#ECECEC] z-50 relative"},{default:l(()=>s[14]||(s[14]=[o(" Tramo ")])),_:1}),t(e(f),null,{default:l(()=>s[15]||(s[15]=[o("Fee (%)")])),_:1}),t(e(f),null,{default:l(()=>s[16]||(s[16]=[o("Cap")])),_:1}),t(e(f),null,{default:l(()=>s[17]||(s[17]=[o("Hurdle")])),_:1})]),_:1})]),_:1}),t(e(H),null,{default:l(()=>[(_(!0),O(B,null,R(d.brokerFee,a=>(_(),V(e(v),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:a.tramo},{default:l(()=>[t(e(p),{class:"!bg-[#ECECEC] font-bold"},{default:l(()=>[o(q(a.tramo),1)]),_:2},1024),t(e(p),null,{default:l(()=>[n(u("input",{type:"text","onUpdate:modelValue":r=>a.fee=r,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,ne),[[i],[c,a.fee]])]),_:2},1024),t(e(p),null,{default:l(()=>[n(u("input",{"onUpdate:modelValue":r=>a.cap=r,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,re),[[M],[c,a.cap]])]),_:2},1024),t(e(p),null,{default:l(()=>[n(u("input",{"onUpdate:modelValue":r=>a.hurdle=r,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,ie),[[M],[c,a.hurdle]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])]),_:1}),t(e(x),{value:"successFee"},{default:l(()=>[u("div",me,[u("div",fe,[t(e(m),{for:"ventaCredito"},{default:l(()=>s[18]||(s[18]=[o("Venta Crédito (%)")])),_:1}),n(t(e(C),{id:"ventaCredito",type:"text",class:"mt-2",required:"",modelValue:d.successFee.ventaCredito,"onUpdate:modelValue":s[0]||(s[0]=a=>d.successFee.ventaCredito=a),modelModifiers:{number:!0}},null,8,["modelValue"]),[[i]])]),u("div",pe,[t(e(m),{for:"subastaOrRemate"},{default:l(()=>s[19]||(s[19]=[o("Subasta o Remate (%)")])),_:1}),n(t(e(C),{id:"subastaOrRemate",type:"text",class:"mt-2",required:"",modelValue:d.successFee.subastaOrRemate,"onUpdate:modelValue":s[1]||(s[1]=a=>d.successFee.subastaOrRemate=a),modelModifiers:{number:!0}},null,8,["modelValue"]),[[i]])]),u("div",_e,[t(e(m),{for:"repossessedAsset"},{default:l(()=>s[20]||(s[20]=[o("Repossessed Asset (%)")])),_:1}),n(t(e(C),{id:"repossessedAsset",type:"text",class:"mt-2",required:"",modelValue:d.successFee.repossessedAsset,"onUpdate:modelValue":s[2]||(s[2]=a=>d.successFee.repossessedAsset=a),modelModifiers:{number:!0}},null,8,["modelValue"]),[[i]])])])]),_:1})]),_:1}),u("div",ce,[t(e(m),{for:"wacc"},{default:l(()=>s[21]||(s[21]=[o("WACC - Coste de Capital")])),_:1}),n(t(e(C),{id:"wacc",type:"text",placeholder:"WACC - Coste de Capital",class:"mt-2",required:"",autofocus:"",autocomplete:"wacc",modelValue:d.WACC,"onUpdate:modelValue":s[3]||(s[3]=a=>d.WACC=a),modelModifiers:{number:!0}},null,8,["modelValue"]),[[i]])]),u("div",Ce,[t(e(m),{for:"managementFee"},{default:l(()=>s[22]||(s[22]=[o("Management Fee (%)")])),_:1}),n(t(e(C),{id:"managementFee",type:"text",placeholder:"Management Fee",class:"mt-2",required:"",modelValue:d.managementFee,"onUpdate:modelValue":s[4]||(s[4]=a=>d.managementFee=a),modelModifiers:{number:!0}},null,8,["modelValue"]),[[i]])])])]),t(e(h),{class:"flex justify-between mt-10"},{default:l(()=>[t(e(P),{class:"gap-1 w-full",variant:"green",size:"sm",onClick:N},{default:l(()=>s[23]||(s[23]=[o(" Guardar ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}});export{Ue as _};
