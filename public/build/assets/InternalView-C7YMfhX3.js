import{o as c,g as h,b as l,d as w,j as b,l as x,c as g,w as n,m as j,A as D,B as L,p as $,u as e,H as J,r as z,a,Z as Q,k as W,t as _,e as v,F as V,z as Z,n as E,i as ee}from"./app-C2ZahYvv.js";import{_ as te}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-Bs9za7a3.js";import{_ as T,b as U}from"./index-Cbrc2AMh.js";import{_ as A}from"./index-DlqmF4on.js";import{_ as se}from"./ArrowIcon.vue_vue_type_script_setup_true_lang-BbS4Eaun.js";import{I as ae}from"./InfoIcon-C7xzahDG.js";import{_ as oe,a as re,b as N,c as H,X as Y}from"./TabsContent.vue_vue_type_script_setup_true_lang-C_850NEl.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as ne,b as le}from"./index-CIJakN6v.js";import{t as S}from"./plyr-DB88Y7ue.js";import{x as ie,c as k,t as ce,B,e as de,n as pe,l as ue,o as fe,r as me}from"./utils-B5f-0kBq.js";import{_ as _e}from"./Assets.vue_vue_type_script_setup_true_lang-C6AmmaNr.js";import{f as he}from"./fenlab.api-D-ZttHWJ.js";import"./PictureIcon-DwdC_iWP.js";import"./index-BCINy4Z4.js";import"./Cross2Icon-DKoqaKB9.js";import"./index-Bb4qSo10.js";import"./DataTable.vue_vue_type_script_setup_true_lang-CDb5wDjK.js";import"./Input.vue_vue_type_script_setup_true_lang-DsRdQk1I.js";import"./TableRow.vue_vue_type_script_setup_true_lang-DI5n5BXh.js";import"./DataTableDropdown.vue_vue_type_script_setup_true_lang-yTF839Fs.js";import"./DialogTrigger.vue_vue_type_script_setup_true_lang-B1xg4Wl7.js";import"./ellipsis-g0Vb68Nx.js";import"./PostDialog.vue_vue_type_script_setup_true_lang-BWlkSEhb.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-DAxQgPQw.js";const ge={},ve={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},xe=l("path",{d:"M13 9V11.6667C13 12.0203 12.8595 12.3594 12.6095 12.6095C12.3594 12.8595 12.0203 13 11.6667 13H2.33333C1.97971 13 1.64057 12.8595 1.39052 12.6095C1.14048 12.3594 1 12.0203 1 11.6667V9M3.66667 5.66667L7 9M7 9L10.3333 5.66667M7 9V1",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),we=[xe];function ye(p,t){return c(),h("svg",ve,we)}const Ce=F(ge,[["render",ye]]),be={},$e={width:"8",height:"28",viewBox:"0 0 8 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ke=l("path",{d:"M4 27.6667C5.47276 27.6667 6.66667 26.4728 6.66667 25C6.66667 23.5272 5.47276 22.3333 4 22.3333C2.52724 22.3333 1.33333 23.5272 1.33333 25C1.33333 26.4728 2.52724 27.6667 4 27.6667ZM4.35355 0.646446C4.15829 0.451185 3.84171 0.451185 3.64645 0.646446L0.464465 3.82843C0.269203 4.02369 0.269203 4.34027 0.464465 4.53553C0.659727 4.7308 0.97631 4.7308 1.17157 4.53553L4 1.70711L6.82843 4.53553C7.02369 4.7308 7.34027 4.7308 7.53553 4.53553C7.7308 4.34027 7.7308 4.02369 7.53553 3.82843L4.35355 0.646446ZM4.5 25L4.5 1L3.5 1L3.5 25L4.5 25Z",fill:"#686868"},null,-1),je=[ke];function Be(p,t){return c(),h("svg",$e,je)}const Me=F(be,[["render",Be]]),ze={key:0,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ae=l("g",{"clip-path":"url(#clip0_2013_3043)"},[l("path",{d:"M6.06004 6.00004C6.21678 5.55449 6.52614 5.17878 6.93334 4.93946C7.34055 4.70015 7.8193 4.61267 8.28483 4.69252C8.75035 4.77236 9.17258 5.01439 9.47676 5.37573C9.78093 5.73706 9.94741 6.19439 9.94671 6.66671C9.94671 8.00004 7.94671 8.66671 7.94671 8.66671M8.00004 11.3334H8.00671M14.6667 8.00004C14.6667 11.6819 11.6819 14.6667 8.00004 14.6667C4.31814 14.6667 1.33337 11.6819 1.33337 8.00004C1.33337 4.31814 4.31814 1.33337 8.00004 1.33337C11.6819 1.33337 14.6667 4.31814 14.6667 8.00004Z",stroke:"#686868","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ve=l("defs",null,[l("clipPath",{id:"clip0_2013_3043"},[l("rect",{width:"16",height:"16",fill:"white"})])],-1),Se=[Ae,Ve],De=w({__name:"CircleIcon",props:{variant:{}},setup(p){return(t,u)=>t.variant==="help"?(c(),h("svg",ze,Se)):b("",!0)}}),Le={},Fe={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ie=l("path",{d:"M14.5 10V12.6667C14.5 13.0203 14.3595 13.3594 14.1095 13.6095C13.8594 13.8595 13.5203 14 13.1667 14H3.83333C3.47971 14 3.14057 13.8595 2.89052 13.6095C2.64048 13.3594 2.5 13.0203 2.5 12.6667V10M11.8333 5.33333L8.5 2M8.5 2L5.16667 5.33333M8.5 2V10",stroke:"white","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),Pe=[Ie];function Ze(p,t){return c(),h("svg",Fe,Pe)}const Ee=F(Le,[["render",Ze]]),Te=w({__name:"Stepper",props:{defaultValue:{},orientation:{},dir:{},modelValue:{},linear:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue"],setup(p,{emit:t}){const u=p,f=t,r=x(()=>{const{class:m,...C}=u;return C}),d=ie(r,f);return(m,C)=>(c(),g(e(ce),$({class:e(k)("flex gap-2",u.class)},e(d)),{default:n(M=>[j(m.$slots,"default",D(L(M)))]),_:3},16,["class"]))}}),Ue=w({__name:"StepperItem",props:{step:{},disabled:{type:Boolean},completed:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(p){const t=p,u=x(()=>{const{class:r,...d}=t;return d}),f=B(u);return(r,d)=>(c(),g(e(de),$(e(f),{class:e(k)("flex items-center gap-2 group data-[disabled]:pointer-events-none",t.class)}),{default:n(m=>[j(r.$slots,"default",D(L(m)))]),_:3},16,["class"]))}}),Ne=w({__name:"StepperTrigger",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const t=p,u=x(()=>{const{class:r,...d}=t;return d}),f=B(u);return(r,d)=>(c(),g(e(pe),$(e(f),{class:e(k)("p-1 flex flex-col items-center text-center gap-1 rounded-md",t.class)}),{default:n(()=>[j(r.$slots,"default")]),_:3},16,["class"]))}}),He=w({__name:"StepperTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const t=p,u=x(()=>{const{class:r,...d}=t;return d}),f=B(u);return(r,d)=>(c(),g(e(ue),$(e(f),{class:e(k)("text-md font-semibold whitespace-nowrap",t.class)}),{default:n(()=>[j(r.$slots,"default")]),_:3},16,["class"]))}}),Ye=w({__name:"StepperDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const t=p,u=x(()=>{const{class:r,...d}=t;return d}),f=B(u);return(r,d)=>(c(),g(e(fe),$(e(f),{class:e(k)("text-xs text-muted-foreground",t.class)}),{default:n(m=>[j(r.$slots,"default",D(L(m)))]),_:3},16,["class"]))}}),Oe=w({__name:"StepperSeparator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(p){const t=p,u=x(()=>{const{class:r,...d}=t;return d}),f=B(u);return(r,d)=>(c(),g(e(me),$(e(f),{class:e(k)("bg-muted","group-data-[disabled]:bg-muted group-data-[disabled]:opacity-50","group-data-[state=completed]:bg-accent-foreground",t.class)}),null,16,["class"]))}}),Re={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},Xe={class:"flex items-center gap-4"},qe={class:"hidden sm:inline capitalize"},Ge={class:"mt-5 flex flex-col items-center text-center"},Ke={class:"my-4 p-2 bg-white"},Je={key:0,class:"flex items-center gap-2 mb-5 text-grey text-sm"},Qe={key:1,class:"w-full mb-4"},We={class:"flex items-center gap-2"},et={class:"text-sm font-medium"},tt={class:"text-xs text-gray-500"},st={key:1,class:"my-4"},at={class:"relative flex items-center gap-4 w-full p-4 bg-white"},ot={class:"text-black text-lg font-bold"},rt={class:"text-grey text-sm"},nt=["href"],St=w({__name:"InternalView",props:{project:{},assets:{}},setup(p){const t=p,u=J("$loading"),f=z("analysis"),r=z([]),d=z(),m=z(null),C=[{step:1,title:"Carga Cliente",description:ne(t.project.createdAt,"DD/MM/YYYY")},{step:2,title:"Análisis Fenlab",description:""},{step:3,title:"Carga definitiva",description:""}],M=x(()=>{switch(t.project.status){case"Sin empezar":return 1;case"Análisis en curso":return 2;case"Análisis completo":case"Carga definitiva":return 3;default:return 1}}),I=s=>{const o={"Sin empezar":1,"Análisis en curso":2,"Análisis completo":3,"Carga definitiva":3}[t.project.status];return s!==o};function P(s){r.value=[],s&&(r.value=s.map(i=>({file:i,name:i.name,size:i.size,type:i.type,lastModified:i.lastModified})))}const{isOverDropZone:O}=le(d,P);function R(s){const i=s.target;i.files&&i.files.length>0&&P(Array.from(i.files))}const X=s=>{if(s===0)return"0 Bytes";const i=1024,o=["Bytes","KB","MB","GB"],y=Math.floor(Math.log(s)/Math.log(i));return parseFloat((s/Math.pow(i,y)).toFixed(2))+" "+o[y]};function q(){m.value&&m.value.click()}const G=x(()=>t.project.status==="Análisis en curso"?"second-excel":"first-excel");async function K(s){if(s.stopPropagation(),r.value.length>0){const i=u==null?void 0:u.show(),o=new FormData;o.append("method","post"),o.append("path",`projects/${t.project.id}/${t.project.modelType}/${G.value}`),o.append("file",r.value[0].file);try{await he.post("",o),S({variant:"info",title:"Archivo subido correctamente"}),r.value=[],m.value&&(m.value.value="")}catch(y){S({variant:"danger",title:"¡Ups! Algo salió mal.",description:y.response.data.message.join(`
`)})}finally{i==null||i.hide(),ee.reload()}}else S({variant:"danger",title:"¡Ups! Algo salió mal.",description:"No se ha seleccionado ningún archivo."})}return(s,i)=>(c(),h(V,null,[a(e(Q),{title:"Mis Análisis"}),a(te,null,{default:n(()=>[l("header",Re,[l("div",Xe,[a(e(A),{variant:"ghost","as-child":"",size:"sm"},{default:n(()=>[a(e(W),{href:s.route("analysis")},{default:n(()=>[a(e(se),{class:"sm:mr-2 text-black",variant:"left"}),l("span",qe,_(s.project.name),1)]),_:1},8,["href"])]),_:1}),a(e(T),{variant:e(U)[s.project.modelType],size:"sm"},{default:n(()=>[v(_(s.project.modelType),1)]),_:1},8,["variant"]),a(e(ae)),a(e(T),{variant:e(U)[s.project.status],size:"sm"},{default:n(()=>[v(_(s.project.status),1)]),_:1},8,["variant"])])]),a(e(Te),{modelValue:M.value,"onUpdate:modelValue":i[0]||(i[0]=o=>M.value=o),"allow-click":!1,class:"flex w-full items-start gap-2 my-10"},{default:n(()=>[(c(),h(V,null,Z(C,o=>a(e(Ue),{key:o.step,class:"relative flex w-full flex-col items-center justify-center",step:o.step},{default:n(({state:y})=>[o.step!==C[C.length-1].step?(c(),g(e(Oe),{key:0,class:"absolute left-[calc(50%+20px)] right-[calc(-50%+10px)] top-5 block h-0.5 shrink-0 rounded-full bg-muted group-data-[state=completed]:bg-electric-green"})):b("",!0),a(e(Ne),{"as-child":""},{default:n(()=>[a(e(A),{variant:"green",size:"icon",class:E(["z-10 rounded-full shrink-0",[y==="active",y==="inactive"&&"bg-[#686868]/50",I(o.step)&&"opacity-50 cursor-not-allowed"]]),disabled:I(o.step)},{default:n(()=>[v(_(o.step),1)]),_:2},1032,["class","disabled"])]),_:2},1024),l("div",Ge,[a(e(He),{class:"text-sm font-semibold transition lg:text-base"},{default:n(()=>[v(_(o.title),1)]),_:2},1024),a(e(Ye),{class:"sr-only text-xs text-black transition md:not-sr-only lg:text-sm"},{default:n(()=>[v(_(o.description),1)]),_:2},1024)])]),_:2},1032,["step"])),64))]),_:1},8,["modelValue"]),a(e(oe),{"default-value":"analysis","model-value":f.value,"onUpdate:modelValue":i[1]||(i[1]=o=>f.value=o)},{default:n(()=>[a(e(re),{class:"grid w-[274px] grid-cols-2"},{default:n(()=>[a(e(N),{value:"analysis"},{default:n(()=>[v(" Análisis ")]),_:1}),a(e(N),{value:"assets"},{default:n(()=>[v(" Activos ")]),_:1})]),_:1}),a(e(H),{value:"analysis"},{default:n(()=>[l("div",Ke,[l("div",{ref_key:"dropZoneRef",ref:d,class:E(["grid place-items-center p-5 border-2 border-dashed border-[#C1C1C1] rounded-sm",[e(O)&&"border-electric-green"]]),onClick:q,role:"button"},[r.value.length===0?(c(),h("p",Je,[v(" Arrastra aquí tu archivo excel cumplimentado "),a(e(De),{variant:"help"})])):(c(),h("div",Qe,[(c(!0),h(V,null,Z(r.value,o=>(c(),h("div",{key:o.name,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[l("div",We,[a(e(Y),{class:"w-5 h-5"}),l("span",et,_(o.name),1)]),l("span",tt,_(X(o.size)),1)]))),128))])),l("input",{type:"file",ref_key:"fileInput",ref:m,onChange:R,class:"hidden",accept:".xlsx,.xls"},null,544),a(e(A),{variant:"green",size:"xs",onClick:K},{default:n(()=>[a(e(Ee),{class:"mr-2"}),v(" "+_(r.value.length===0?"Cargar excel":"Subir archivo"),1)]),_:1})],2)]),s.project.firstExcel?(c(),g(e(Me),{key:0})):b("",!0),s.project.firstExcel?(c(),h("div",st,[l("div",at,[s.project.firstExcel.extension=="xlsx"?(c(),g(e(Y),{key:0})):b("",!0),l("div",null,[l("p",ot,_(s.project.firstExcel.title),1),l("p",rt,_(s.project.firstExcel.description),1)]),s.project.firstExcel.url?(c(),g(e(A),{key:1,variant:"ghost",size:"xs","as-child":""},{default:n(()=>[l("a",{class:"absolute top-4 right-4",href:s.project.firstExcel.url,target:"_blank",rel:"noopener noreferrer"},[a(e(Ce))],8,nt)]),_:1})):b("",!0)])])):b("",!0)]),_:1}),a(e(H),{value:"assets"},{default:n(()=>[a(e(_e),{assets:s.assets.data},null,8,["assets"])]),_:1})]),_:1},8,["model-value"])]),_:1})],64))}});export{St as default};
