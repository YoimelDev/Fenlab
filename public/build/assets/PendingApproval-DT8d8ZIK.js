import{_ as O}from"./PictureIcon-DPv4h-T6.js";import{_ as S}from"./DataTable.vue_vue_type_script_setup_true_lang-B_jWZGLo.js";import"./plyr-CplpJfE2.js";import{_ as j,a as F,b as B,c as T,d as L}from"./SelectValue.vue_vue_type_script_setup_true_lang-m8LvLyMN.js";import{_ as U}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CUmHzLNt.js";import{Q as K,C as t,D as u,d as q,y,r as b,q as Q,O as Y,o as n,h as d,a as c,u as o,Z,w as m,b as f,e as x,t as C,c as E,F as A,A as z,k as I,j as V}from"./app-DU1v3jkr.js";import{_ as G}from"./PostAction.vue_vue_type_script_setup_true_lang-CcRRe4Px.js";import{_ as H,b as J}from"./index-NJhH1dxI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-VNtmGLgX.js";import"./index-CSagTUk7.js";import"./index-Bb4qSo10.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-3x-GNO8s.js";import"./Input.vue_vue_type_script_setup_true_lang-NNBmrnwZ.js";import"./index-Cm8GW7Ju.js";import"./TableRow.vue_vue_type_script_setup_true_lang-DqcTJVCr.js";import"./CheckIcon-DsREbMlX.js";import"./index-kmOVfz8t.js";import"./Cross2Icon-WKpfJnr9.js";import"./Dialog.vue_vue_type_script_setup_true_lang-CjLb08b6.js";import"./PostPubliDialog.vue_vue_type_script_setup_true_lang-xVOcuKrx.js";import"./fenlab.api-Cf4gwDdb.js";import"./DialogContent.vue_vue_type_script_setup_true_lang-BrhG0qLU.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-Bx2glA5Z.js";import"./Label.vue_vue_type_script_setup_true_lang-ByFeZNwV.js";import"./Textarea.vue_vue_type_script_setup_true_lang-BK3OyhFL.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-C8DYKgQL.js";import"./PostInformation.vue_vue_type_script_setup_true_lang-8jDLkRFF.js";import"./PendingApprovalInfo.vue_vue_type_script_setup_true_lang-CK0QWWt1.js";import"./recordTypes-32YOpbUo.js";import"./PendingPBCInfo.vue_vue_type_script_setup_true_lang-C6vqGdVo.js";import"./PendingNotaryInfo.vue_vue_type_script_setup_true_lang-CR900tiK.js";import"./ScrollArea.vue_vue_type_script_setup_true_lang-DOBYMTDM.js";const W=K();var k,N,w;const X=((w=(N=(k=W.props)==null?void 0:k.auth)==null?void 0:N.salesforceUser)==null?void 0:w.rols)==="Admin",P=[{header:"ID CLIENTE",accessorKey:"idCliente"},{header:"ID FENCIA",accessorKey:"productReference"},{header:"NOMBRE PROYECTO",accessorKey:"name",cell:a=>t("div",{class:"font-bold"},a.getValue())},{header:"PRECIO MINIMO",accessorKey:"minimumPrice",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},u(e)):t("p",{class:"font-medium"},"-")}},{header:"PRECIO DE REFERENCIA",accessorKey:"referencePrice",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},u(e)):t("p",{class:"font-medium"},"-")}},{header:"Ofertante",accessorKey:"offerName"},{header:"Mejor oferta",accessorKey:"maximumBid",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},u(e)):t("p",{class:"font-medium"},"-")}},{header:"Depósito",accessorKey:"deposit",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},u(e)):t("p",{class:"font-medium"},"-")}},{header:"ESTADO",accessorKey:"stage",cell:a=>{const e=a.getValue();return t("div",{class:"font-medium"},t(H,{variant:J[e]},e))}},{id:"actions",header:()=>"",accessorKey:"id",cell:a=>{const e={postType:"pendingApproval",data:a.row.original,endpoint:"/salesforce/approve-auction"};return t(G,{postData:e})}}];X&&P.splice(1,0,{header:"EMPRESA",accessorKey:"titular"});const ee=P,ae={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},te={class:"flex items-center gap-4 text-xl font-bold leading-5"},re={class:"flex items-center gap-4"},je=q({__name:"PendingApproval",props:{projects:{}},setup(a){var h,g,v;const e=a,R=((v=(g=(h=K().props)==null?void 0:h.auth)==null?void 0:g.salesforceUser)==null?void 0:v.rols)==="Admin",_=y(()=>e.projects??[]),p=b(new Set);Q(()=>{e.projects&&e.projects.forEach(s=>{s.titular&&p.value.add(s.titular)});const r=new URL(window.location.href).searchParams.get("companyName");r&&(i.value=r,p.value.add(r))}),Y(()=>e.projects,l=>{l&&l.forEach(r=>{r.titular&&p.value.add(r.titular)})},{immediate:!0});const $=y(()=>Array.from(p.value).sort()),i=b("");function D(l){i.value=l,V.get(route("my-publications.pending-approval"),{companyName:l||void 0},{preserveState:!0,preserveScroll:!0,only:["projects"]})}function M(){i.value="",V.get(route("my-publications.pending-approval"),{},{preserveState:!0,preserveScroll:!0,only:["projects"]})}return(l,r)=>(n(),d(A,null,[c(o(Z),{title:"Mis Publicaciones"}),c(U,null,{default:m(()=>[f("header",ae,[f("h1",te,[c(o(O),{variant:"black",class:"text-black w-8 h-8"}),x(" Mis Publicaciones | Pendientes de Aprobación ( "+C(_.value.length)+" ) ",1)]),f("div",re,[R?(n(),E(o(L),{key:0,modelValue:i.value,"onUpdate:modelValue":[r[0]||(r[0]=s=>i.value=s),D]},{default:m(()=>[c(o(j),{class:"w-[250px] border border-black rounded-md"},{default:m(()=>[c(o(F),{placeholder:i.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),c(o(B),null,{default:m(()=>[(n(!0),d(A,null,z($.value,s=>(n(),E(o(T),{key:s,value:s},{default:m(()=>[x(C(s),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):I("",!0),i.value?(n(),d("button",{key:1,onClick:M,class:"px-3 py-1 text-sm border border-black rounded-md hover:bg-gray-100"}," Limpiar filtro ")):I("",!0)])]),c(o(S),{columns:o(ee),data:_.value,"column-filter":["clientId","fenlabId","fenciaId","salesforceId","titular","name","productReference"]},null,8,["columns","data"])]),_:1})],64))}});export{je as default};
