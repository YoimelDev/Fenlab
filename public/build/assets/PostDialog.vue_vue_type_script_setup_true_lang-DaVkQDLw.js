import{f as v}from"./fenlab.api-Cf4gwDdb.js";import{_ as I}from"./index-CSagTUk7.js";import{d as C,V as w,r as b,o as P,c as R,w as s,a as t,u as a,e as o,b as i}from"./app-DU1v3jkr.js";import{b as N,a as j,_ as q}from"./DialogContent.vue_vue_type_script_setup_true_lang-BrhG0qLU.js";import{_ as A}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Bx2glA5Z.js";import{_ as u}from"./Input.vue_vue_type_script_setup_true_lang-NNBmrnwZ.js";import{_ as r}from"./Label.vue_vue_type_script_setup_true_lang-ByFeZNwV.js";import{t as y}from"./plyr-CplpJfE2.js";import{_ as c,a as M}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-C8DYKgQL.js";const U={class:"content"},k={class:"flex flex-col gap-4"},B={class:"space-y-2"},F={class:"space-y-2"},S={class:"space-y-2"},z={class:"space-y-2"},T={class:"space-y-2"},E={class:"space-y-2"},G={class:"flex items-center space-x-2"},H={class:"flex items-center space-x-2"},J={class:"flex items-center space-x-2"},ee=C({__name:"PostDialog",props:{asset:{}},emits:["updated"],setup(x,{emit:V}){const g=x,f=w("$loading"),l=b({...g.asset}),p=b("subasta"),$=V,D=async()=>{var e,d,_;const m=f==null?void 0:f.show();try{const{data:n}=await v.post("",{method:"put",path:`projects/${l.value.projectId}/assets/${l.value.id}/publish`,body:{precioReferencia:((e=l.value.npl)==null?void 0:e.precioReferencia)||l.value.precioReferencia,opcion:p.value,precioMinimo:Number(((_=(d=l.value.npl)==null?void 0:d.credito)==null?void 0:_.precioMinimo)||l.value.precioPropuesto)}});await v.post("/import",n),y({variant:"info",title:"Datos guardados correctamente"})}catch(n){y({variant:"danger",title:"¡Ups! Algo salió mal.",description:Array.isArray(n.response.data.message)?n.response.data.message.join(`
`):n.response.data.message})}finally{m==null||m.hide(),$("updated")}};return(m,e)=>(P(),R(a(q),null,{default:s(()=>[t(a(j),null,{default:s(()=>[t(a(N),null,{default:s(()=>e[3]||(e[3]=[o(" ID cliente ")])),_:1})]),_:1}),i("div",U,[i("div",k,[i("div",B,[t(a(r),{for:"idCliente"},{default:s(()=>e[4]||(e[4]=[o("ID cliente")])),_:1}),t(a(u),{id:"idCliente",type:"text",placeholder:"ID cliente",class:"mt-2",disabled:"",required:"",modelValue:l.value.clientId,"onUpdate:modelValue":e[0]||(e[0]=d=>l.value.clientId=d)},null,8,["modelValue"])]),i("div",F,[t(a(r),{for:"idFencia"},{default:s(()=>e[5]||(e[5]=[o("ID fenlab")])),_:1}),t(a(u),{id:"idFencia",type:"text",placeholder:"ID fenlab",class:"mt-2",disabled:"",required:"","model-value":l.value.fenciaId??""},null,8,["model-value"])]),i("div",S,[t(a(r),{for:"referenciaCatastral"},{default:s(()=>e[6]||(e[6]=[o("Referencia catastral")])),_:1}),t(a(u),{id:"referenciaCatastral",type:"text",placeholder:"Referencia catastral",disabled:"",class:"mt-2",required:"","model-value":"N/A"})]),i("div",z,[t(a(r),{for:"min_price"},{default:s(()=>e[7]||(e[7]=[o("Precio mínimo (€)")])),_:1}),t(a(u),{id:"min_price",type:"text",placeholder:"Precio mínimo",class:"mt-2",required:"","model-value":String(l.value.precioPropuesto??""),"onUpdate:modelValue":e[1]||(e[1]=d=>l.value.precioPropuesto=Number(d))},null,8,["model-value"])]),i("div",T,[t(a(r),{for:"reference_value"},{default:s(()=>e[8]||(e[8]=[o("Valor de referencia (€)")])),_:1}),t(a(u),{id:"reference_value",type:"number",placeholder:"Valor de referencia",disabled:"",class:"mt-2",required:"","model-value":l.value.precioReferencia??0},null,8,["model-value"])]),i("div",E,[t(a(r),{for:"transaction_modality"},{default:s(()=>e[9]||(e[9]=[o("Modalidad de transacción")])),_:1}),t(a(M),{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=d=>p.value=d),"default-value":"subasta"},{default:s(()=>[i("div",G,[t(a(c),{id:"r1",value:"subasta"}),t(a(r),{for:"r1"},{default:s(()=>e[10]||(e[10]=[o("Subasta")])),_:1})]),i("div",H,[t(a(c),{id:"r2",value:"crédito"}),t(a(r),{for:"r2"},{default:s(()=>e[11]||(e[11]=[o("Crédito")])),_:1})]),i("div",J,[t(a(c),{id:"r3",value:"remate"}),t(a(r),{for:"r3"},{default:s(()=>e[12]||(e[12]=[o("Remate")])),_:1})])]),_:1},8,["modelValue"])])])]),t(a(A),{class:"flex justify-between mt-10"},{default:s(()=>[t(a(I),{class:"gap-1 w-full",variant:"green",size:"sm",onClick:D},{default:s(()=>e[13]||(e[13]=[o(" Publicar ")])),_:1})]),_:1})]),_:1}))}});export{ee as _};
