import{d as L,r as N,K as O,am as T,W as y,o as f,c as v,w as e,a,u as l,e as t,b as o,h as E,B as x,t as $,y as r,z as m,F as V,A as j}from"./app-DpooJOFO.js";import{f as q}from"./fenlab.api-DCq-9vjI.js";import{_ as U}from"./index-CBeHvhWe.js";import{_ as S}from"./Dialog.vue_vue_type_script_setup_true_lang-AR04voSh.js";import{_ as G}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-D087WH3G.js";import{_ as K,a as J,b as Q,c as R}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DYu62EFX.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-DtRkVmcc.js";import{_ as k,a as A,b,c as _,d as D,e as d}from"./TableRow.vue_vue_type_script_setup_true_lang-BYzIH7Ju.js";import{t as F}from"./plyr-F9VM-FKc.js";import{_ as Y,a as Z,b as B,c as P}from"./TabsContent.vue_vue_type_script_setup_true_lang-CnagAe6d.js";const ee={class:"content"},ae={class:"flex flex-col gap-4 max-h-[600px] overflow-y-auto"},le=["onUpdate:modelValue"],te=["onUpdate:modelValue"],se={class:"mt-6"},oe=["onUpdate:modelValue"],ne=["onUpdate:modelValue"],ue=["onUpdate:modelValue"],re={class:"space-y-2"},ve=L({__name:"EditMasterData",props:{masterData:{type:Object,required:!0}},emits:["updated"],setup(z,{emit:W}){const H=z,g=N(!1),n=O({...H.masterData}),M=W,I=async()=>{try{await q.post("",{method:"post",path:"company-master-data",body:{...n}}),F({variant:"info",title:"Datos guardados correctamente"}),M("updated")}catch{F({variant:"danger",title:"¡Ups! Algo salió mal."})}finally{g.value=!1}};return(_e,p)=>{const C=T("Label"),h=y("percentage"),w=y("currency");return f(),v(l(S),{open:g.value,"onUpdate:open":p[1]||(p[1]=s=>g.value=s)},{default:e(()=>[a(l(G),null,{default:e(()=>[a(l(U),{variant:"ghost",class:"text-blue text-sm font-medium",size:"sm"},{default:e(()=>[t(" Editar ")]),_:1})]),_:1}),a(l(R),null,{default:e(()=>[a(l(K),null,{default:e(()=>[a(l(J),null,{default:e(()=>[t(" Master data financiera ")]),_:1})]),_:1}),o("div",ee,[o("div",ae,[a(l(Y),{"default-value":"macro"},{default:e(()=>[a(l(Z),{class:"grid grid-cols-2"},{default:e(()=>[a(l(B),{value:"macro"},{default:e(()=>[t(" Macro ")]),_:1}),a(l(B),{value:"brokerFee"},{default:e(()=>[t(" Broker Fee ")]),_:1})]),_:1}),a(l(P),{value:"macro"},{default:e(()=>[a(l(k),null,{default:e(()=>[a(l(A),null,{default:e(()=>[a(l(b),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:e(()=>[a(l(_),{class:"!bg-[#ECECEC] w-[140px] z-50 relative"},{default:e(()=>[a(C,null,{default:e(()=>[t("AÑO")]),_:1})]),_:1}),a(l(_),null,{default:e(()=>[a(C,null,{default:e(()=>[t("IPC (%)")]),_:1})]),_:1}),a(l(_),null,{default:e(()=>[a(C,null,{default:e(()=>[t("HPA (%)")]),_:1})]),_:1})]),_:1})]),_:1}),a(l(D),null,{default:e(()=>[(f(!0),E(V,null,x(n.macro,s=>(f(),v(l(b),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:s.ano},{default:e(()=>[a(l(d),{class:"!bg-[#ECECEC] font-bold w-[140px]"},{default:e(()=>[t($(s.ano),1)]),_:2},1024),a(l(d),null,{default:e(()=>[r(o("input",{"onUpdate:modelValue":i=>s.IPC=i,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,le),[[h],[m,s.IPC]])]),_:2},1024),a(l(d),null,{default:e(()=>[r(o("input",{"onUpdate:modelValue":i=>s.HPA=i,class:"w-full h-full outline-none"},null,8,te),[[h],[m,s.HPA]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),a(l(P),{value:"brokerFee"},{default:e(()=>{var s;return[r(o("div",se,[a(l(k),{class:"mt-2"},{default:e(()=>[a(l(A),null,{default:e(()=>[a(l(b),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:e(()=>[a(l(_),{class:"!bg-[#ECECEC] z-50 relative"},{default:e(()=>[t(" Tramo ")]),_:1}),a(l(_),null,{default:e(()=>[t("Fee (%)")]),_:1}),a(l(_),null,{default:e(()=>[t("Cap")]),_:1}),a(l(_),null,{default:e(()=>[t("Hurdle")]),_:1})]),_:1})]),_:1}),a(l(D),null,{default:e(()=>{var i;return[(f(!0),E(V,null,x((i=n==null?void 0:n.brokerFee)==null?void 0:i.gestion,u=>(f(),v(l(b),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:u.tramo},{default:e(()=>[a(l(d),{class:"!bg-[#ECECEC] font-bold"},{default:e(()=>[t($(u.tramo),1)]),_:2},1024),a(l(d),null,{default:e(()=>[r(o("input",{type:"text","onUpdate:modelValue":c=>u.fee=c,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,oe),[[h],[m,u.fee]])]),_:2},1024),a(l(d),null,{default:e(()=>[r(o("input",{"onUpdate:modelValue":c=>u.cap=c,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,ne),[[w],[m,u.cap]])]),_:2},1024),a(l(d),null,{default:e(()=>[r(o("input",{"onUpdate:modelValue":c=>u.hurdle=c,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,ue),[[w],[m,u.hurdle]])]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1})],512),[[j,(s=n.brokerFee)==null?void 0:s.gestion]])]}),_:1})]),_:1}),o("div",re,[a(C,{for:"wacc"},{default:e(()=>[t("WACC - Coste de Capital")]),_:1}),r(a(l(X),{id:"wacc",type:"text",placeholder:"WACC - Coste de Capital",class:"mt-2",required:"",autofocus:"",autocomplete:"wacc",modelValue:n.WACC,"onUpdate:modelValue":p[0]||(p[0]=s=>n.WACC=s),modelModifiers:{number:!0}},null,8,["modelValue"]),[[h]])])])]),a(l(Q),{class:"flex justify-between mt-10"},{default:e(()=>[a(l(U),{class:"gap-1 w-full",variant:"green",size:"sm",onClick:I},{default:e(()=>[t(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}});export{ve as _};
