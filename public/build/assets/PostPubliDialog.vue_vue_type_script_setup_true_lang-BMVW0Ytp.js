import{d as j,H as E,Q as w,r as A,o as d,c as B,w as s,a as t,u as a,e as l,b as f,g as i,j as p}from"./app-U6TZWzdG.js";import{f as C}from"./fenlab.api-DhEghGT2.js";import{_ as N}from"./index-CefcmSVF.js";import{a as T,_ as U,b as I,c as P}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Cz1yCQbA.js";import{_ as r}from"./Label.vue_vue_type_script_setup_true_lang-BPOPHJo-.js";import{t as b}from"./plyr-DAdG86ap.js";import{_ as S}from"./Textarea.vue_vue_type_script_setup_true_lang-Cbc6z2yo.js";import{_ as m,a as h}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-B5u7kqK0.js";const z={class:"space-y-4 my-4 p-4 bg-white/100 rounded-sm border border-[#E5E7EB] shadow-sm"},H={class:"space-y-2"},Q={class:"flex items-center space-x-2"},R={key:0,class:"flex items-center space-x-2"},q={key:1,class:"flex items-center space-x-2"},F={key:2,class:"flex items-center space-x-2"},G={key:0,class:"space-y-2"},ee=j({__name:"PostPubliDialog",props:{postData:{}},emits:["updated"],setup(x,{emit:D}){var v,g,y;const _=x,u=E("$loading"),V=(y=(g=(v=w().props)==null?void 0:v.auth)==null?void 0:g.salesforceUser)==null?void 0:y.email,o=A({fenlabId:_.postData.data.id,email:V,isApproved:!1,status:"",comments:""}),$=D,k=async()=>{const n=u==null?void 0:u.show();try{const e={fenlabId:o.value.fenlabId,email:o.value.email,status:o.value.status,isApproved:o.value.status==="approved"};o.value.status==="rejected"&&(e.comments=o.value.comments),await C.post(_.postData.endpoint,e),b({variant:"info",title:"Datos guardados correctamente"})}catch(e){console.log(e.response.data.error),b({variant:"danger",title:"¡Ups! Algo salió mal.",description:e.response.data.error})}finally{n==null||n.hide(),$("updated")}};return(n,e)=>(d(),B(a(P),null,{default:s(()=>[t(a(U),null,{default:s(()=>[t(a(T),null,{default:s(()=>e[2]||(e[2]=[l(" Detalles de la publicación ")])),_:1})]),_:1}),f("div",z,[f("div",H,[t(a(r),null,{default:s(()=>e[3]||(e[3]=[l("Estado de la publicación")])),_:1}),t(a(h),{modelValue:o.value.status,"onUpdate:modelValue":e[0]||(e[0]=c=>o.value.status=c),class:"flex flex-col space-y-2"},{default:s(()=>[f("div",Q,[t(a(m),{id:"approved",value:"approved"}),t(a(r),{for:"approved"},{default:s(()=>e[4]||(e[4]=[l("Aprobar")])),_:1})]),n.postData.postType==="pendingNotary"?(d(),i("div",R,[t(a(m),{id:"date_change",value:"date_change"}),t(a(r),{for:"date_change"},{default:s(()=>e[5]||(e[5]=[l("Solicitar cambio de fecha")])),_:1})])):p("",!0),n.postData.postType==="pendingPBC"?(d(),i("div",q,[t(a(m),{id:"pending",value:"pending"}),t(a(r),{for:"pending"},{default:s(()=>e[6]||(e[6]=[l("Solicitar documentación adicional")])),_:1})])):p("",!0),n.postData.postType!=="pendingNotary"?(d(),i("div",F,[t(a(m),{id:"rejected",value:"rejected"}),t(a(r),{for:"rejected"},{default:s(()=>e[7]||(e[7]=[l("Rechazar")])),_:1})])):p("",!0)]),_:1},8,["modelValue"])]),o.value.status==="rejected"?(d(),i("div",G,[t(a(r),{for:"comments"},{default:s(()=>e[8]||(e[8]=[l("Comentarios")])),_:1}),t(a(S),{id:"comments",class:"h-24",modelValue:o.value.comments,"onUpdate:modelValue":e[1]||(e[1]=c=>o.value.comments=c),placeholder:"Añade un comentario..."},null,8,["modelValue"])])):p("",!0)]),t(a(I),null,{default:s(()=>[t(a(N),{variant:"green",onClick:k},{default:s(()=>e[9]||(e[9]=[l(" Enviar datos ")])),_:1})]),_:1})]),_:1}))}});export{ee as _};
