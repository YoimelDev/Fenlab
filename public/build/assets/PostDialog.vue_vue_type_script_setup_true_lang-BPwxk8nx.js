import{f}from"./fenlab.api-Bmvy4_ah.js";import{_ as C}from"./index-BHqq4c_8.js";import{a as $,_ as g,b as D,c as w}from"./DialogFooter.vue_vue_type_script_setup_true_lang-41wxEiqx.js";import{_ as c}from"./Input.vue_vue_type_script_setup_true_lang-C4oQd1sa.js";import{_ as r}from"./Label.vue_vue_type_script_setup_true_lang-42kflJu-.js";import{t as _}from"./plyr-DRT_IGi-.js";import{_ as p,a as M}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-DCBKksga.js";import{d as R,H as U,r as v,o as I,c as P,w as s,a,u as e,e as i,b as d}from"./app-p8lYpWiG.js";const j={class:"content"},q={class:"flex flex-col gap-4"},A={class:"space-y-2"},F={class:"space-y-2"},k={class:"space-y-2"},B={class:"space-y-2"},N={class:"space-y-2"},z={class:"space-y-2"},H={class:"flex items-center space-x-2"},S={class:"flex items-center space-x-2"},T={class:"flex items-center space-x-2"},X=R({__name:"PostDialog",props:{asset:{}},emits:["updated"],setup(b,{emit:V}){const y=b,m=U("$loading"),t=v({...y.asset}),n=v("subasta"),x=V,h=async()=>{const u=m==null?void 0:m.show();try{const{data:l}=await f.post("",{method:"put",path:`projects/${t.value.projectId}/assets/${t.value.id}/publish`,body:{precioReferencia:t.value.model.npl.precioReferencia,opcionesDePublicacion:[{opcion:n.value,publicable:t.value.model.npl[n.value].isPublishable,precioMinimo:t.value.model.npl[n.value].precioMinimo}]}});await f.post("/import",l),_({variant:"info",title:"Datos guardados correctamente"})}catch(l){_({variant:"danger",title:"¡Ups! Algo salió mal.",description:Array.isArray(l.response.data.message)?l.response.data.message.join(`
`):l.response.data.message})}finally{u==null||u.hide(),x("updated")}};return(u,l)=>(I(),P(e(w),null,{default:s(()=>[a(e(g),null,{default:s(()=>[a(e($),null,{default:s(()=>[i(" ID cliente ")]),_:1})]),_:1}),d("div",j,[d("div",q,[d("div",A,[a(e(r),{for:"idCliente"},{default:s(()=>[i("ID cliente")]),_:1}),a(e(c),{id:"idCliente",type:"text",placeholder:"ID cliente",class:"mt-2",disabled:"",required:"",modelValue:t.value.idCliente,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.idCliente=o)},null,8,["modelValue"])]),d("div",F,[a(e(r),{for:"idFencia"},{default:s(()=>[i("ID fenlab")]),_:1}),a(e(c),{id:"idFencia",type:"text",placeholder:"ID fenlab",class:"mt-2",disabled:"",required:"",modelValue:t.value.idFencia,"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.idFencia=o)},null,8,["modelValue"])]),d("div",k,[a(e(r),{for:"referenciaCatastral"},{default:s(()=>[i("Referencia catastral")]),_:1}),a(e(c),{id:"referenciaCatastral",type:"text",placeholder:"Referencia catastral",disabled:"",class:"mt-2",required:"",modelValue:t.value.model.referenciaCatastral,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.model.referenciaCatastral=o)},null,8,["modelValue"])]),d("div",B,[a(e(r),{for:"min_price"},{default:s(()=>[i("Precio mínimo (€)")]),_:1}),a(e(c),{id:"min_price",type:"text",placeholder:"Precio mínimo",class:"mt-2",required:"",modelValue:t.value.model.npl.credito.precioMinimo,"onUpdate:modelValue":l[3]||(l[3]=o=>t.value.model.npl.credito.precioMinimo=o)},null,8,["modelValue"])]),d("div",N,[a(e(r),{for:"reference_value"},{default:s(()=>[i("Valor de referencia (€)")]),_:1}),a(e(c),{id:"reference_value",type:"text",placeholder:"Valor de referencia",disabled:"",class:"mt-2",required:"",modelValue:t.value.model.npl.precioReferencia,"onUpdate:modelValue":l[4]||(l[4]=o=>t.value.model.npl.precioReferencia=o),modelModifiers:{number:!0}},null,8,["modelValue"])]),d("div",z,[a(e(r),{for:"transaction_modality"},{default:s(()=>[i("Modalidad de transacción")]),_:1}),a(e(M),{modelValue:n.value,"onUpdate:modelValue":l[5]||(l[5]=o=>n.value=o),"default-value":"subasta"},{default:s(()=>[d("div",H,[a(e(p),{id:"r1",value:"subasta"}),a(e(r),{for:"r1"},{default:s(()=>[i("Subasta")]),_:1})]),d("div",S,[a(e(p),{id:"r2",value:"crédito"}),a(e(r),{for:"r2"},{default:s(()=>[i("Crédito")]),_:1})]),d("div",T,[a(e(p),{id:"r3",value:"remate"}),a(e(r),{for:"r3"},{default:s(()=>[i("Remate")]),_:1})])]),_:1},8,["modelValue"])])])]),a(e(D),{class:"flex justify-between mt-10"},{default:s(()=>[a(e(C),{class:"gap-1 w-full",variant:"green",size:"sm",onClick:h},{default:s(()=>[i(" Publicar ")]),_:1})]),_:1})]),_:1}))}});export{X as _};
