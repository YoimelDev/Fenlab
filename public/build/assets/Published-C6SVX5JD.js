import{_ as L}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CxCTb70r.js";import{Q as M,D as t,E as d,d as T,m as g,r as v,O as R,x as U,o as i,h as p,a as c,u as o,Z as j,w as m,b as f,e as x,t as C,c as k,F as N,B as q,k as P,j as V}from"./app-D0DW5pOC.js";import{_ as Q}from"./DataTable.vue_vue_type_script_setup_true_lang-CZoT9dAF.js";import{_ as Z}from"./PictureIcon-BnM1q5dj.js";import"./plyr-CcIM1uAZ.js";import{_ as z,a as G,b as H,c as J,d as W}from"./SelectValue.vue_vue_type_script_setup_true_lang-DtKOPW2g.js";import{_ as X,b as Y}from"./index-09z51a6c.js";import{r as ee}from"./recordTypes-32YOpbUo.js";import"./index-ChZ1AAku.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DqUDVYnP.js";import"./index-DaJ9qe7B.js";import"./index-Bb4qSo10.js";import"./index-odNGuFVC.js";import"./Cross2Icon-BjLeFLMQ.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-CPcyL_fW.js";import"./Input.vue_vue_type_script_setup_true_lang-K82n5idK.js";import"./TableRow.vue_vue_type_script_setup_true_lang-B90PQdKC.js";import"./CheckIcon-DWGsBI0D.js";const S=M();var w,A,E;const ae=((E=(A=(w=S.props)==null?void 0:w.auth)==null?void 0:A.salesforceUser)==null?void 0:E.rols)==="Admin";var K,$;console.log(($=(K=S.props)==null?void 0:K.auth)==null?void 0:$.salesforceUser);const B=[{header:"ID FENCIA",accessorKey:"productReference"},{header:"DETALLE",accessorKey:"name"},{header:"PRECIO MÍNIMO",accessorKey:"minimumPrice",cell:r=>{const e=r.getValue();return e?t("p",{class:"font-medium"},d(e)):t("p",{class:"font-medium"},"-")}},{header:"Precio de referencia",accessorKey:"referencePrice",cell:r=>{const e=r.getValue();return e?t("p",{class:"font-medium"},d(e)):t("p",{class:"font-medium"},"-")}},{header:"Ofertas ",accessorKey:"numberOfBids"},{header:"Mejor oferta",accessorKey:"maximumBid",cell:r=>{const e=r.getValue();return e?t("p",{class:"font-medium"},d(e)):t("p",{class:"font-medium"},"-")}},{header:"TIPO",accessorKey:"recordType",cell:r=>{const e=r.getValue();return t("p",{class:"text-grey"},ee[e]||e)}},{header:"ESTADO",accessorKey:"stage",cell:r=>{const e=r.getValue();return t("div",{class:"font-medium"},t(X,{variant:Y[e]},e))}}];ae&&B.splice(1,0,{header:"EMPRESA",accessorKey:"companyName"});const re=B,se={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},te={class:"flex items-center gap-4 text-xl font-bold leading-5"},oe={class:"flex items-center gap-4"},Ve=T({__name:"Published",props:{published:{}},setup(r){var _,b,y;const e=r,I=((y=(b=(_=M().props)==null?void 0:_.auth)==null?void 0:b.salesforceUser)==null?void 0:y.rols)==="Admin",h=g(()=>{var a;return((a=e.published)==null?void 0:a.Auctions)??[]}),u=v(new Set);R(()=>{var a;return(a=e.published)==null?void 0:a.Auctions},a=>{a&&a.forEach(s=>{s.companyName&&u.value.add(s.companyName)})},{immediate:!0});const O=g(()=>Array.from(u.value).sort()),l=v("");function D(a){l.value=a,V.get(route("my-publications.published"),{companyName:a||void 0},{preserveState:!0,preserveScroll:!0,only:["published"]})}function F(){l.value="",V.get(route("my-publications.published"),{},{preserveState:!0,preserveScroll:!0,only:["published"]})}return U(()=>{const s=new URL(window.location.href).searchParams.get("companyName");s&&(l.value=s,s&&u.value.add(s))}),(a,s)=>(i(),p(N,null,[c(o(j),{title:"Mis Publicaciones"}),c(L,null,{default:m(()=>[f("header",se,[f("h1",te,[c(o(Z),{variant:"black",class:"text-black w-8 h-8"}),x(" Mis Publicaciones | Publicadas ( "+C(h.value.length)+" ) ",1)]),f("div",oe,[I?(i(),k(o(W),{key:0,modelValue:l.value,"onUpdate:modelValue":[s[0]||(s[0]=n=>l.value=n),D]},{default:m(()=>[c(o(z),{class:"w-[250px] border border-black rounded-md"},{default:m(()=>[c(o(G),{placeholder:l.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),c(o(H),null,{default:m(()=>[(i(!0),p(N,null,q(O.value,n=>(i(),k(o(J),{key:n,value:n},{default:m(()=>[x(C(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):P("",!0),l.value?(i(),p("button",{key:1,onClick:F,class:"px-3 py-1 text-sm border border-black rounded-md hover:bg-gray-100"}," Limpiar filtro ")):P("",!0)])]),c(o(Q),{columns:o(re),data:h.value,"column-filter":["id","fenlabId","prestashopId","companyName","productReference"]},null,8,["columns","data"])]),_:1})],64))}});export{Ve as default};
