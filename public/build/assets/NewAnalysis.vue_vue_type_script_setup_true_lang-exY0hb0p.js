import{o as c,g as k,b as s,d as E,l as j,c as P,w as a,m as R,p as H,u as t,v as y,x as I,G as h,n as m,r as V,H as O,I as q,s as Z,a as l,e as d,t as b,y as $,z as G,F as W,j as J,i as K}from"./app-BrLXUGa-.js";import{_ as L}from"./index-gGdqOc2n.js";import{_ as A}from"./index-C4uJIvjD.js";import{_ as M}from"./ArrowIcon.vue_vue_type_script_setup_true_lang-D50mGzV2.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as Q,a as X}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-3CQwxI6y.js";import{_ as Y,a as ee,b as te,c as se}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DCHM-Mjr.js";import{I as le,c as U,_ as ae}from"./utils-mak2MGEF.js";import{_}from"./Input.vue_vue_type_script_setup_true_lang-0Ryy-xlN.js";import{_ as oe,a as ne,b as S,c as z,d as re,e as D}from"./TableRow.vue_vue_type_script_setup_true_lang-DiFF9j9e.js";import{u as ie}from"./plyr-BcVWgM7Y.js";import{a as de}from"./index-D66AWox1.js";import{f as F}from"./fenlab.api-DH54E58D.js";import{r as ue}from"./PlusIcon-BouMuZok.js";const me={},ce={width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function pe(p,i){return c(),k("svg",ce,i[0]||(i[0]=[s("path",{d:"M1.5 4.99996L4 1.66663H14L16.5 4.99996M1.5 4.99996V16.6666C1.5 17.1087 1.67559 17.5326 1.98816 17.8451C2.30072 18.1577 2.72464 18.3333 3.16667 18.3333H14.8333C15.2754 18.3333 15.6993 18.1577 16.0118 17.8451C16.3244 17.5326 16.5 17.1087 16.5 16.6666V4.99996M1.5 4.99996H16.5M12.3333 8.33329C12.3333 9.21735 11.9821 10.0652 11.357 10.6903C10.7319 11.3154 9.88405 11.6666 9 11.6666C8.11595 11.6666 7.2681 11.3154 6.64298 10.6903C6.01786 10.0652 5.66667 9.21735 5.66667 8.33329",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const fe=T(me,[["render",pe]]),ge={},xe={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function ve(p,i){return c(),k("svg",xe,i[0]||(i[0]=[s("path",{d:"M16.84 8.51037L9.48171 1.15203C9.17337 0.843701 8.74837 0.668701 8.30671 0.668701H2.33171C1.41504 0.668701 0.665039 1.4187 0.665039 2.33537V8.31037C0.665039 8.75203 0.840039 9.17703 1.15671 9.48537L8.51504 16.8437C9.16504 17.4937 10.2234 17.4937 10.8734 16.8437L16.8484 10.8687C17.4984 10.2187 17.4984 9.1687 16.84 8.51037ZM9.69004 15.6687L2.33171 8.31037V2.33537H8.30671L15.665 9.6937L9.69004 15.6687Z",fill:"currentColor"},null,-1),s("path",{d:"M4.41504 5.6687C5.10539 5.6687 5.66504 5.10906 5.66504 4.4187C5.66504 3.72835 5.10539 3.1687 4.41504 3.1687C3.72468 3.1687 3.16504 3.72835 3.16504 4.4187C3.16504 5.10906 3.72468 5.6687 4.41504 5.6687Z",fill:"currentColor"},null,-1)]))}const be=T(ge,[["render",ve]]),_e=E({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const i=p,r=j(()=>{const{class:u,...x}=i;return x}),f=le(r);return(u,x)=>(c(),P(t(ae),H(t(f),{class:t(U)("text-lg text-[#21272A] text-muted-foreground text-center",i.class)}),{default:a(()=>[R(u.$slots,"default")]),_:3},16,["class"]))}}),ye=E({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(p,{emit:i}){const r=p,u=de(r,"modelValue",i,{passive:!0,defaultValue:r.defaultValue});return(x,v)=>y((c(),k("textarea",{"onUpdate:modelValue":v[0]||(v[0]=n=>h(u)?u.value=n:null),class:m(t(U)("flex w-full h-12 rounded-t-sm bg-[#F2F4F8] border-b border-[#C1C7CD] py-3 px-4 text-sm  transition-border file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-[#697077] outline-none focus:border-b-[3px] disabled:cursor-not-allowed disabled:opacity-50",r.class))},null,2)),[[I,t(u)]])}}),Ce={class:"content"},we={class:"flex flex-col gap-10"},Ve={class:"flex flex-col gap-6"},$e={class:"flex flex-col gap-6"},Le={class:"flex flex-col gap-2"},Pe={class:"flex gap-6"},ke={class:"hidden sm:inline"},Ie=E({__name:"NewAnalysis",setup(p){const{toast:i}=ie(),r=V(1),f=V(!1),u=O("$loading"),x=()=>({name:"",description:"",modelType:"",masterData:{wacc:"",managementFee:"",costeLanzamientoAbogado:"",costeLanzamientoProcurador:""}}),v=V(),n=q(x()),C=V("buy"),N=async()=>{try{const{data:g}=await F.post("",{method:"get",path:"company-master-data"});v.value=g}catch{i({variant:"danger",title:"¡Ups! Algo salió mal."})}},B=async()=>{const g=u==null?void 0:u.show();try{const{data:e}=await F.post("",{method:"post",path:"projects",body:{...n}});i({variant:"info",title:"¡Análisis creado!"}),K.visit(`/my-analysis/${e.id}`)}catch(e){i({variant:"danger",title:"¡Ups! Algo salió mal.",description:e.response.data.message.join(`
`)})}finally{g==null||g.hide(),f.value=!1}};return Z(()=>{N()}),(g,e)=>(c(),P(t(X),{open:f.value,"onUpdate:open":e[14]||(e[14]=o=>f.value=o)},{default:a(()=>[l(t(Q),{"as-child":""},{default:a(()=>[l(t(A),{class:"gap-1",variant:"green",size:"sm"},{default:a(()=>[l(t(ue),{class:"w-4 h-4"}),e[15]||(e[15]=d(" Nuevo Análisis "))]),_:1})]),_:1}),l(t(se),null,{default:a(()=>[l(t(Y),null,{default:a(()=>[l(t(ee),null,{default:a(()=>e[16]||(e[16]=[d(" Nuevo análisis ")])),_:1}),l(t(_e),null,{default:a(()=>[d(" Paso "+b(r.value),1)]),_:1})]),_:1}),s("div",Ce,[y(s("div",we,[l(t(_),{id:"name",type:"text",placeholder:"Nombre proyecto",class:"mt-2",modelValue:n.name,"onUpdate:modelValue":e[0]||(e[0]=o=>n.name=o),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),l(t(ye),{id:"description",class:"resize-none h-[112px]",placeholder:"Descripción",modelValue:n.description,"onUpdate:modelValue":e[1]||(e[1]=o=>n.description=o)},null,8,["modelValue"])],512),[[$,r.value===1]]),y(s("div",Ve,[s("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":C.value==="buy"}]),onClick:e[2]||(e[2]=o=>C.value="buy")},[l(t(fe)),e[17]||(e[17]=s("div",{class:"text-grey"},[s("h3",{class:"text-lg font-bold"}," Buy Side "),s("p",{class:"text-sm"}," Modeliza en posición comprador ")],-1))],2),s("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":C.value==="sell"}]),onClick:e[3]||(e[3]=o=>C.value="sell")},[l(t(be)),e[18]||(e[18]=s("div",{class:"text-grey"},[s("h3",{class:"text-lg font-bold"}," Sale Side "),s("p",{class:"text-sm"}," Modeliza en posición vendedora ")],-1))],2)],512),[[$,r.value===2]]),y(s("div",$e,[s("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&>div]:text-electric-green bg-blue-sky border border-electric-green":n.modelType==="pl/spl s"}]),onClick:e[4]||(e[4]=o=>n.modelType="pl/spl s")},[l(t(L),{variant:"secondary"},{default:a(()=>e[19]||(e[19]=[d(" PL/SPL S ")])),_:1}),e[20]||(e[20]=s("div",{class:"flex-1 text-grey"},[s("h3",{class:"text-lg font-bold"}," PL / RPL Secured "),s("p",{class:"text-sm"}," Cashflow model perfoming & Re-perfoming loans Secured ")],-1))],2),s("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":n.modelType==="pl/spl u"}]),onClick:e[5]||(e[5]=o=>n.modelType="pl/spl u")},[l(t(L),{class:"bg-[#EBE0F1]",variant:"secondary"},{default:a(()=>e[21]||(e[21]=[d(" PL/SPL U ")])),_:1}),e[22]||(e[22]=s("div",{class:"flex-1 text-grey"},[s("h3",{class:"text-lg font-bold"}," PL / RPL Unsecured "),s("p",{class:"text-sm"}," Cashflow model perfoming & Re-performing loans Unsecured ")],-1))],2),s("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":n.modelType==="NPL"}]),onClick:e[6]||(e[6]=o=>n.modelType="NPL")},[l(t(L),{variant:"primary"},{default:a(()=>e[23]||(e[23]=[d(" NPL ")])),_:1}),e[24]||(e[24]=s("div",{class:"flex-1 text-grey"},[s("h3",{class:"text-lg font-bold"}," NPL Secured "),s("p",{class:"text-sm"}," Modelo de recuperación judicial de non-perfoming loans secured ")],-1))],2),s("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":n.modelType==="REO"}]),onClick:e[7]||(e[7]=o=>n.modelType="REO")},[l(t(L),{variant:"default"},{default:a(()=>e[25]||(e[25]=[d(" REO ")])),_:1}),e[26]||(e[26]=s("div",{class:"flex-1 text-grey"},[s("h3",{class:"text-lg font-bold"}," REO "),s("p",{class:"text-sm"}," Modelo de recuperación judicial de activos inmobiliarios ")],-1))],2)],512),[[$,r.value===3]]),y(s("div",Le,[l(t(oe),null,{default:a(()=>[l(t(ne),null,{default:a(()=>[l(t(S),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:a(()=>[l(t(z),{class:"!bg-[#ECECEC] z-50 relative"},{default:a(()=>e[27]||(e[27]=[d(" AÑO ")])),_:1}),l(t(z),null,{default:a(()=>e[28]||(e[28]=[d("IPC (%)")])),_:1}),l(t(z),null,{default:a(()=>e[29]||(e[29]=[d("HPA (%)")])),_:1})]),_:1})]),_:1}),l(t(re),null,{default:a(()=>{var o;return[(c(!0),k(W,null,G((o=v.value)==null?void 0:o.macro,w=>(c(),P(t(S),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:w.ano},{default:a(()=>[l(t(D),{class:"!bg-[#ECECEC] font-bold"},{default:a(()=>[d(" Año "+b(w.ano),1)]),_:2},1024),l(t(D),null,{default:a(()=>[d(b(w.IPC),1)]),_:2},1024),l(t(D),null,{default:a(()=>[d(b(w.HPA),1)]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1}),l(t(_),{id:"wacc",type:"text",placeholder:"WACC - Coste de Capital",class:"mt-2",modelValue:n.masterData.wacc,"onUpdate:modelValue":e[8]||(e[8]=o=>n.masterData.wacc=o),required:"",autofocus:"",autocomplete:"wacc"},null,8,["modelValue"]),l(t(_),{id:"managementFee",type:"text",placeholder:"Management fee % s/ Valor inmueble",class:"mt-2",modelValue:n.masterData.managementFee,"onUpdate:modelValue":e[9]||(e[9]=o=>n.masterData.managementFee=o),required:"",autofocus:"",autocomplete:"managementFee"},null,8,["modelValue"]),s("div",Pe,[l(t(_),{id:"costeLanzamientoAbogado",type:"text",placeholder:"Abogado",class:"mt-2",modelValue:n.masterData.costeLanzamientoAbogado,"onUpdate:modelValue":e[10]||(e[10]=o=>n.masterData.costeLanzamientoAbogado=o),required:"",autofocus:"",autocomplete:"costeLanzamientoAbogado"},null,8,["modelValue"]),l(t(_),{id:"costeLanzamientoProcurador",type:"text",placeholder:"Procurador",class:"mt-2",modelValue:n.masterData.costeLanzamientoProcurador,"onUpdate:modelValue":e[11]||(e[11]=o=>n.masterData.costeLanzamientoProcurador=o),required:"",autofocus:"",autocomplete:"costeLanzamientoProcurador"},null,8,["modelValue"])])],512),[[$,r.value===4]])]),l(t(te),{class:"flex justify-between mt-10"},{default:a(()=>[l(t(A),{class:m(["w-full",r.value===1?"invisible":""]),variant:"ghost",size:"sm",onClick:e[12]||(e[12]=o=>r.value--)},{default:a(()=>[l(t(M),{class:"sm:mr-2 text-blue",variant:"left"}),e[30]||(e[30]=s("span",{class:"hidden sm:inline"}," Anterior ",-1))]),_:1},8,["class"]),l(t(A),{class:"w-full",size:"sm",onClick:e[13]||(e[13]=o=>r.value<4?r.value++:B())},{default:a(()=>[s("span",ke,b(r.value<4?"Siguiente":"Finalizar"),1),r.value<4?(c(),P(t(M),{key:0,class:"sm:ml-2 text-white",variant:"right"})):J("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}});export{Ie as _};
