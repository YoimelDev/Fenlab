import{_ as R}from"./PictureIcon-DPv4h-T6.js";import{_ as O}from"./DataTable.vue_vue_type_script_setup_true_lang-B_jWZGLo.js";import"./plyr-CplpJfE2.js";import{_ as j,a as M,b as T,c as B,d as L}from"./SelectValue.vue_vue_type_script_setup_true_lang-m8LvLyMN.js";import{_ as U}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CUmHzLNt.js";import{Q as I,C as s,D as q,d as Q,y as v,r as b,q as Y,O as Z,o as c,h as d,a as l,u as r,Z as z,w as m,b as p,e as C,t as x,c as E,F as k,A as G,k as w,j as N}from"./app-DU1v3jkr.js";import{_ as H,b as J}from"./index-NJhH1dxI.js";import{_ as W}from"./PostAction.vue_vue_type_script_setup_true_lang-CcRRe4Px.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-VNtmGLgX.js";import"./index-CSagTUk7.js";import"./index-Bb4qSo10.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-3x-GNO8s.js";import"./Input.vue_vue_type_script_setup_true_lang-NNBmrnwZ.js";import"./index-Cm8GW7Ju.js";import"./TableRow.vue_vue_type_script_setup_true_lang-DqcTJVCr.js";import"./CheckIcon-DsREbMlX.js";import"./index-kmOVfz8t.js";import"./Cross2Icon-WKpfJnr9.js";import"./Dialog.vue_vue_type_script_setup_true_lang-CjLb08b6.js";import"./PostPubliDialog.vue_vue_type_script_setup_true_lang-xVOcuKrx.js";import"./fenlab.api-Cf4gwDdb.js";import"./DialogContent.vue_vue_type_script_setup_true_lang-BrhG0qLU.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-Bx2glA5Z.js";import"./Label.vue_vue_type_script_setup_true_lang-ByFeZNwV.js";import"./Textarea.vue_vue_type_script_setup_true_lang-BK3OyhFL.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-C8DYKgQL.js";import"./PostInformation.vue_vue_type_script_setup_true_lang-8jDLkRFF.js";import"./PendingApprovalInfo.vue_vue_type_script_setup_true_lang-CK0QWWt1.js";import"./recordTypes-32YOpbUo.js";import"./PendingPBCInfo.vue_vue_type_script_setup_true_lang-C6vqGdVo.js";import"./PendingNotaryInfo.vue_vue_type_script_setup_true_lang-CR900tiK.js";import"./ScrollArea.vue_vue_type_script_setup_true_lang-DOBYMTDM.js";const X=I();var V,A,D;const ee=((D=(A=(V=X.props)==null?void 0:V.auth)==null?void 0:A.salesforceUser)==null?void 0:D.rols)==="Admin",S=[{header:"ID CLIENTE",accessorKey:"idCliente"},{header:"ID FENCIA",accessorKey:"productReference"},{header:"NOMBRE PROYECTO",accessorKey:"name",cell:a=>{const e=a.getValue();return s("p",{class:"font-bold"},e)}},{header:"PRECIO",accessorKey:"offerValue",cell:a=>{const e=a.getValue();return e?s("p",{class:"font-medium text-right"},q(e)):s("p",{class:"font-medium"},"-")}},{header:"NOTARIA",accessorKey:"notary"},{header:"ESTADO",accessorKey:"stage",cell:a=>{const e=a.getValue();return s("div",{class:"font-medium"},s(H,{variant:J[e]},e))}},{header:"Fecha firma",accessorKey:"signatureDate",cell:a=>{const e=a.getValue();if(!e)return s("p",{class:"font-medium"},"-");const f=new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"});return s("p",{class:"font-medium"},f)}},{id:"actions",header:()=>"",accessorKey:"id",cell:a=>{const e={postType:"pendingNotary",data:a.row.original,endpoint:"/salesforce/accept-notary"};return s(W,{postData:e})}}];ee&&S.splice(1,0,{header:"EMPRESA",accessorKey:"titular"});const ae=S,te={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},re={class:"flex items-center gap-4 text-xl font-bold leading-5"},oe={class:"flex items-center gap-4"},je=Q({__name:"PendingNotary",props:{projects:{}},setup(a){var y,g,h;const e=a,$=((h=(g=(y=I().props)==null?void 0:y.auth)==null?void 0:g.salesforceUser)==null?void 0:h.rols)==="Admin",_=v(()=>e.projects??[]),u=b(new Set);Y(()=>{e.projects&&e.projects.forEach(o=>{o.titular&&u.value.add(o.titular)});const t=new URL(window.location.href).searchParams.get("companyName");t&&(n.value=t,u.value.add(t))}),Z(()=>e.projects,i=>{i&&i.forEach(t=>{t.titular&&u.value.add(t.titular)})},{immediate:!0});const K=v(()=>Array.from(u.value).sort()),n=b("");function F(i){n.value=i,N.get(route("my-publications.pending-notary"),{companyName:i||void 0},{preserveState:!0,preserveScroll:!0,only:["projects"]})}function P(){n.value="",N.get(route("my-publications.pending-notary"),{},{preserveState:!0,preserveScroll:!0,only:["projects"]})}return(i,t)=>(c(),d(k,null,[l(r(z),{title:"Mis Publicaciones"}),l(U,null,{default:m(()=>[p("header",te,[p("h1",re,[l(r(R),{variant:"black",class:"text-black w-8 h-8"}),C(" Mis Publicaciones | Pendientes de Firma ( "+x(_.value.length)+" ) ",1)]),p("div",oe,[$?(c(),E(r(L),{key:0,modelValue:n.value,"onUpdate:modelValue":[t[0]||(t[0]=o=>n.value=o),F]},{default:m(()=>[l(r(j),{class:"w-[250px] border border-black rounded-md"},{default:m(()=>[l(r(M),{placeholder:n.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),l(r(T),null,{default:m(()=>[(c(!0),d(k,null,G(K.value,o=>(c(),E(r(B),{key:o,value:o},{default:m(()=>[C(x(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):w("",!0),n.value?(c(),d("button",{key:1,onClick:P,class:"px-3 py-1 text-sm border border-black rounded-md hover:bg-gray-100"}," Limpiar filtro ")):w("",!0)])]),l(r(O),{columns:r(ae),data:_.value,"column-filter":["clientId","fenlabId","fenciaId","salesforceId","titular","name","productReference"]},null,8,["columns","data"])]),_:1})],64))}});export{je as default};
