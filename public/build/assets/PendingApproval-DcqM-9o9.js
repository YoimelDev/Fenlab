import{_ as D}from"./PictureIcon-BnM1q5dj.js";import{_ as S}from"./DataTable.vue_vue_type_script_setup_true_lang-CZoT9dAF.js";import"./plyr-CcIM1uAZ.js";import{_ as j,a as B,b as F,c as T,d as U}from"./SelectValue.vue_vue_type_script_setup_true_lang-DtKOPW2g.js";import{_ as L}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CxCTb70r.js";import{Q as P,D as r,E as u,d as q,m as b,r as y,x as Q,O as Y,o as c,h as d,a as n,u as o,Z,w as m,b as f,e as x,t as C,c as E,F as V,B as z,k,j as A}from"./app-D0DW5pOC.js";import{_ as G}from"./PostAction.vue_vue_type_script_setup_true_lang-4QE4kHsR.js";import{_ as H,b as J}from"./index-09z51a6c.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DaJ9qe7B.js";import"./index-DqUDVYnP.js";import"./index-Bb4qSo10.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-CPcyL_fW.js";import"./Input.vue_vue_type_script_setup_true_lang-K82n5idK.js";import"./index-ChZ1AAku.js";import"./TableRow.vue_vue_type_script_setup_true_lang-B90PQdKC.js";import"./CheckIcon-DWGsBI0D.js";import"./index-odNGuFVC.js";import"./Cross2Icon-BjLeFLMQ.js";import"./Dialog.vue_vue_type_script_setup_true_lang-DhSFSdgl.js";import"./PostPubliDialog.vue_vue_type_script_setup_true_lang-BMwtbNAa.js";import"./fenlab.api-Bh6Dzpsm.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-DIbN3yri.js";import"./Label.vue_vue_type_script_setup_true_lang-DTLvPfsz.js";import"./Textarea.vue_vue_type_script_setup_true_lang-Ci5I6OgE.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-BFefcIYy.js";import"./PostInformation.vue_vue_type_script_setup_true_lang-DQ0CcYlY.js";import"./PendingApprovalInfo.vue_vue_type_script_setup_true_lang-hS7GIVar.js";import"./recordTypes-32YOpbUo.js";import"./PendingPBCInfo.vue_vue_type_script_setup_true_lang-B5GUnr-A.js";import"./PendingNotaryInfo.vue_vue_type_script_setup_true_lang-zAa0qMnw.js";import"./ScrollArea.vue_vue_type_script_setup_true_lang-bjq_DwOK.js";const W=P();var w,I,N;const X=((N=(I=(w=W.props)==null?void 0:w.auth)==null?void 0:I.salesforceUser)==null?void 0:N.rols)==="Admin",K=[{header:"ID FENCIA",accessorKey:"productReference"},{header:"NOMBRE PROYECTO",accessorKey:"name",cell:a=>r("div",{class:"font-bold"},a.getValue())},{header:"PRECIO MINIMO",accessorKey:"minimumPrice",cell:a=>{const e=a.getValue();return e?r("p",{class:"font-medium"},u(e)):r("p",{class:"font-medium"},"-")}},{header:"PRECIO DE REFERENCIA",accessorKey:"referencePrice",cell:a=>{const e=a.getValue();return e?r("p",{class:"font-medium"},u(e)):r("p",{class:"font-medium"},"-")}},{header:"Ofertante",accessorKey:"offerName"},{header:"Mejor oferta",accessorKey:"maximumBid",cell:a=>{const e=a.getValue();return e?r("p",{class:"font-medium"},u(e)):r("p",{class:"font-medium"},"-")}},{header:"Depósito",accessorKey:"deposit",cell:a=>{const e=a.getValue();return e?r("p",{class:"font-medium"},u(e)):r("p",{class:"font-medium"},"-")}},{header:"ESTADO",accessorKey:"stage",cell:a=>{const e=a.getValue();return r("div",{class:"font-medium"},r(H,{variant:J[e]},e))}},{id:"actions",header:()=>"",accessorKey:"id",cell:a=>{const e={postType:"pendingApproval",data:a.row.original,endpoint:"/salesforce/approve-auction"};return r(G,{postData:e})}}];X&&K.splice(1,0,{header:"EMPRESA",accessorKey:"titular"});const ee=K,ae={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},re={class:"flex items-center gap-4 text-xl font-bold leading-5"},te={class:"flex items-center gap-4"},Se=q({__name:"PendingApproval",props:{projects:{}},setup(a){var v,h,g;const e=a,R=((g=(h=(v=P().props)==null?void 0:v.auth)==null?void 0:h.salesforceUser)==null?void 0:g.rols)==="Admin",_=b(()=>e.projects??[]),p=y(new Set);Q(()=>{e.projects&&e.projects.forEach(s=>{s.titular&&p.value.add(s.titular)});const t=new URL(window.location.href).searchParams.get("companyName");t&&(l.value=t,p.value.add(t))}),Y(()=>e.projects,i=>{i&&i.forEach(t=>{t.titular&&p.value.add(t.titular)})},{immediate:!0});const $=b(()=>Array.from(p.value).sort()),l=y("");function M(i){l.value=i,A.get(route("my-publications.pending-approval"),{companyName:i||void 0},{preserveState:!0,preserveScroll:!0,only:["projects"]})}function O(){l.value="",A.get(route("my-publications.pending-approval"),{},{preserveState:!0,preserveScroll:!0,only:["projects"]})}return(i,t)=>(c(),d(V,null,[n(o(Z),{title:"Mis Publicaciones"}),n(L,null,{default:m(()=>[f("header",ae,[f("h1",re,[n(o(D),{variant:"black",class:"text-black w-8 h-8"}),x(" Mis Publicaciones | Pendientes de Aprobación ( "+C(_.value.length)+" ) ",1)]),f("div",te,[R?(c(),E(o(U),{key:0,modelValue:l.value,"onUpdate:modelValue":[t[0]||(t[0]=s=>l.value=s),M]},{default:m(()=>[n(o(j),{class:"w-[250px] border border-black rounded-md"},{default:m(()=>[n(o(B),{placeholder:l.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),n(o(F),null,{default:m(()=>[(c(!0),d(V,null,z($.value,s=>(c(),E(o(T),{key:s,value:s},{default:m(()=>[x(C(s),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):k("",!0),l.value?(c(),d("button",{key:1,onClick:O,class:"px-3 py-1 text-sm border border-black rounded-md hover:bg-gray-100"}," Limpiar filtro ")):k("",!0)])]),n(o(S),{columns:o(ee),data:_.value,"column-filter":["clientId","fenlabId","fenciaId","salesforceId","titular","name","productReference"]},null,8,["columns","data"])]),_:1})],64))}});export{Se as default};
