import{_ as M}from"./PictureIcon-C0NFQDDm.js";import{_ as O}from"./DataTable.vue_vue_type_script_setup_true_lang-D3-QetOY.js";import"./plyr-Bi5yP9Xt.js";import{_ as j,a as B,b as D,c as P,d as T}from"./SelectValue.vue_vue_type_script_setup_true_lang-COd0pzeh.js";import{_ as L}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DA5ETE9j.js";import{Q as S,D as u,d as U,m as v,r as b,x as q,O as H,o as n,h as d,a as c,u as s,Z as Q,w as i,b as p,e as g,t as C,c as x,F as N,B as Y,k as A,j as k}from"./app-BGPH-c_s.js";import{_ as Z,b as z}from"./index-JrsK7O_8.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-6slY6yYI.js";import"./index-BmHh17y7.js";import"./index-Bb4qSo10.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-BrVukqcL.js";import"./Input.vue_vue_type_script_setup_true_lang-DW2T23kt.js";import"./index-B1iqbnrD.js";import"./TableRow.vue_vue_type_script_setup_true_lang-CMyIEUYZ.js";import"./CheckIcon-CAYmUSm2.js";import"./index-KOGhgzzi.js";import"./Cross2Icon-C1qT_j5M.js";const G=S();var E,w,I;const J=((I=(w=(E=G.props)==null?void 0:E.auth)==null?void 0:w.salesforceUser)==null?void 0:I.rols)==="Admin",V=[{header:"ID CLIENTE",accessorKey:"idCliente"},{header:"ID FENCIA",accessorKey:"productReference"},{header:"NOMBRE PROYECTO",accessorKey:"name",cell:l=>{const e=l.getValue();return u("p",{class:"font-bold"},e)}},{header:"NOTARIA",accessorKey:"notary"},{header:"FECHA FIRMA",accessorKey:"dateSignature"},{header:"ESTADO",accessorKey:"stage",cell:l=>{const e=l.getValue();return u("div",{class:"font-medium"},u(Z,{variant:z[e]},e))}}];J&&V.splice(1,0,{header:"EMPRESA",accessorKey:"companyName"});const W=V,X={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},ee={class:"flex items-center gap-4 text-xl font-bold leading-5"},ae={class:"flex items-center gap-4"},Ce=U({__name:"ClosedAuctions",props:{projects:{}},setup(l){var _,h,y;const e=l,$=((y=(h=(_=S().props)==null?void 0:_.auth)==null?void 0:h.salesforceUser)==null?void 0:y.rols)==="Admin",f=v(()=>e.projects??[]),m=b(new Set);q(()=>{e.projects&&e.projects.forEach(t=>{t.companyName&&m.value.add(t.companyName)});const a=new URL(window.location.href).searchParams.get("companyName");a&&(o.value=a,m.value.add(a))}),H(()=>e.projects,r=>{r&&r.forEach(a=>{a.companyName&&m.value.add(a.companyName)})},{immediate:!0});const F=v(()=>Array.from(m.value).sort()),o=b("");function R(r){o.value=r,k.get(route("my-publications.closed-auctions"),{companyName:r||void 0},{preserveState:!0,preserveScroll:!0,only:["projects"]})}function K(){o.value="",k.get(route("my-publications.closed-auctions"),{},{preserveState:!0,preserveScroll:!0,only:["projects"]})}return(r,a)=>(n(),d(N,null,[c(s(Q),{title:"Mis Publicaciones"}),c(L,null,{default:i(()=>[p("header",X,[p("h1",ee,[c(s(M),{variant:"black",class:"text-black w-8 h-8"}),g(" Mis Publicaciones | Operaciones Cerradas ( "+C(f.value.length)+" ) ",1)]),p("div",ae,[$?(n(),x(s(T),{key:0,modelValue:o.value,"onUpdate:modelValue":[a[0]||(a[0]=t=>o.value=t),R]},{default:i(()=>[c(s(j),{class:"w-[250px] border border-black rounded-md"},{default:i(()=>[c(s(B),{placeholder:o.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),c(s(D),null,{default:i(()=>[(n(!0),d(N,null,Y(F.value,t=>(n(),x(s(P),{key:t,value:t},{default:i(()=>[g(C(t),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):A("",!0),o.value?(n(),d("button",{key:1,onClick:K,class:"px-3 py-1 text-sm border border-black rounded-md hover:bg-gray-100"}," Limpiar filtro ")):A("",!0)])]),c(s(O),{columns:s(W),data:f.value,"column-filter":["clientId","fenlabId","fenciaId","salesforceId","companyName","name","productReference"]},null,8,["columns","data"])]),_:1})],64))}});export{Ce as default};
