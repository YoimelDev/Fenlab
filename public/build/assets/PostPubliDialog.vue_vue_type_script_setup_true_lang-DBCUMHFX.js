import{d as k,R as j,Q as E,r as w,o as d,c as A,w as s,a,u as e,e as l,b as f,g as i,j as c}from"./app-BrSqscUK.js";import{f as B}from"./fenlab.api-BY0zkdx2.js";import{_ as C}from"./index-yiQursuq.js";import{a as N,_ as T,b as U,c as I}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DTitSXNc.js";import{_ as r}from"./Label.vue_vue_type_script_setup_true_lang-BFKXON46.js";import{t as y}from"./plyr-JluQEkXO.js";import{_ as P}from"./Textarea.vue_vue_type_script_setup_true_lang-BpIgEqGL.js";import{_ as p,a as S}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-5QM6e7jy.js";const R={class:"space-y-4 my-4 p-4 bg-white/100 rounded-sm border border-[#E5E7EB] shadow-sm"},z={class:"space-y-2"},Q={class:"flex items-center space-x-2"},q={key:0,class:"flex items-center space-x-2"},F={key:1,class:"flex items-center space-x-2"},G={key:2,class:"flex items-center space-x-2"},H={key:0,class:"space-y-2"},ee=k({__name:"PostPubliDialog",props:{postData:{}},emits:["updated"],setup(b,{emit:x}){var v,g,h;const _=b,m=j("$loading"),D=(h=(g=(v=E().props)==null?void 0:v.auth)==null?void 0:g.salesforceUser)==null?void 0:h.email,t=w({fenlabId:_.postData.data.id,email:D,isApproved:!1,status:"",comments:""}),V=x,$=async()=>{const n=m==null?void 0:m.show();try{const o={fenlabId:t.value.fenlabId,email:t.value.email,status:t.value.status,isApproved:t.value.status==="approved"};t.value.status==="rejected"&&(o.comments=t.value.comments),await B.post(_.postData.endpoint,o),y({variant:"info",title:"Datos guardados correctamente"})}catch(o){console.log(o.response.data.error),y({variant:"danger",title:"¡Ups! Algo salió mal.",description:o.response.data.error})}finally{n==null||n.hide(),V("updated")}};return(n,o)=>(d(),A(e(I),null,{default:s(()=>[a(e(T),null,{default:s(()=>[a(e(N),null,{default:s(()=>[l(" Detalles de la publicación ")]),_:1})]),_:1}),f("div",R,[f("div",z,[a(e(r),null,{default:s(()=>[l("Estado de la publicación")]),_:1}),a(e(S),{modelValue:t.value.status,"onUpdate:modelValue":o[0]||(o[0]=u=>t.value.status=u),class:"flex flex-col space-y-2"},{default:s(()=>[f("div",Q,[a(e(p),{id:"approved",value:"approved"}),a(e(r),{for:"approved"},{default:s(()=>[l("Aprobar")]),_:1})]),n.postData.postType==="pendingNotary"?(d(),i("div",q,[a(e(p),{id:"date_change",value:"date_change"}),a(e(r),{for:"date_change"},{default:s(()=>[l("Solicitar cambio de fecha")]),_:1})])):c("",!0),n.postData.postType==="pendingPBC"?(d(),i("div",F,[a(e(p),{id:"pending",value:"pending"}),a(e(r),{for:"pending"},{default:s(()=>[l("Solicitar documentación adicional")]),_:1})])):c("",!0),n.postData.postType!=="pendingNotary"?(d(),i("div",G,[a(e(p),{id:"rejected",value:"rejected"}),a(e(r),{for:"rejected"},{default:s(()=>[l("Rechazar")]),_:1})])):c("",!0)]),_:1},8,["modelValue"])]),t.value.status==="rejected"||t.value.status==="pending"?(d(),i("div",H,[a(e(r),{for:"comments"},{default:s(()=>[l("Comentarios")]),_:1}),a(e(P),{id:"comments",class:"h-24",modelValue:t.value.comments,"onUpdate:modelValue":o[1]||(o[1]=u=>t.value.comments=u),placeholder:"Añade un comentario..."},null,8,["modelValue"])])):c("",!0)]),a(e(U),null,{default:s(()=>[a(e(C),{variant:"green",onClick:$},{default:s(()=>[l(" Enviar datos ")]),_:1})]),_:1})]),_:1}))}});export{ee as _};
