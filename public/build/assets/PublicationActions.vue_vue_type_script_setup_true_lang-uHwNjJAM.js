import{_ as p}from"./index-BwUklHdJ.js";import{d as m,r as _,V as b,o as v,h as g,a as s,w as i,e as c,u as r}from"./app-DYoEkx5k.js";import{_ as w}from"./Dialog.vue_vue_type_script_setup_true_lang-BOamVzjY.js";import{t as f}from"./plyr-D9mU-FZp.js";import{f as x}from"./fenlab.api-BkSTvWQr.js";import{_ as $}from"./NewPublicationDialog.vue_vue_type_script_setup_true_lang-CZscHjYp.js";const h={class:"flex gap-2"},V=m({__name:"PublicationActions",props:{publication:{}},setup(d){const l=d,o=_(!1),n=b("$loading");async function u(){const t=n==null?void 0:n.show();try{const{data:a}=await x.post("",{method:"get",path:`projects/${l.publication.projectId}/assets/${l.publication.id}`}),e=a.assetPdf.url;window.open(e,"_blank","noopener"),f({variant:"info",title:"Publicación descargada exitosamente"})}catch{f({variant:"danger",title:"Error al descargar la publicación"})}finally{t==null||t.hide()}}return(t,a)=>(v(),g("div",h,[s(r(p),{variant:"ghost",size:"xs",onClick:u},{default:i(()=>[c(" Descargar ")]),_:1}),s(r(w),{open:o.value,"onUpdate:open":a[2]||(a[2]=e=>o.value=e)},{default:i(()=>[s(r(p),{variant:"ghost",size:"xs",onClick:a[0]||(a[0]=e=>o.value=!0)},{default:i(()=>[c(" Publicar ")]),_:1}),s($,{asset:t.publication,onUpdated:a[1]||(a[1]=()=>o.value=!1)},null,8,["asset"])]),_:1},8,["open"])]))}});export{V as _};
