import{_ as M}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DA5ETE9j.js";import{Q as S,D as t,E as f,d as R,m as x,r as C,O as U,x as j,o as i,h,a as c,u as o,Z as q,w as u,b,e as N,t as E,c as O,F as V,B as Q,k,j as A}from"./app-BGPH-c_s.js";import{_ as Z}from"./DataTable.vue_vue_type_script_setup_true_lang-D3-QetOY.js";import{_ as z}from"./PictureIcon-C0NFQDDm.js";import"./plyr-Bi5yP9Xt.js";import{_ as G,a as H,b as J,c as W,d as X}from"./SelectValue.vue_vue_type_script_setup_true_lang-COd0pzeh.js";import{_ as Y}from"./index-JrsK7O_8.js";import{r as ee}from"./recordTypes-32YOpbUo.js";import"./index-B1iqbnrD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BmHh17y7.js";import"./index-6slY6yYI.js";import"./index-Bb4qSo10.js";import"./index-KOGhgzzi.js";import"./Cross2Icon-C1qT_j5M.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-BrVukqcL.js";import"./Input.vue_vue_type_script_setup_true_lang-DW2T23kt.js";import"./TableRow.vue_vue_type_script_setup_true_lang-CMyIEUYZ.js";import"./CheckIcon-CAYmUSm2.js";const L=S();var P,w,B;const ae=((B=(w=(P=L.props)==null?void 0:P.auth)==null?void 0:w.salesforceUser)==null?void 0:B.rols)==="Admin";var I,K;console.log((K=(I=L.props)==null?void 0:I.auth)==null?void 0:K.salesforceUser);const T=[{header:"ID CLIENTE",accessorKey:"idCliente"},{header:"ID FENCIA",accessorKey:"productReference"},{header:"DETALLE",accessorKey:"name"},{header:"PRECIO MÍNIMO",accessorKey:"minimumPrice",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},f(e)):t("p",{class:"font-medium"},"-")}},{header:"Precio de referencia",accessorKey:"referencePrice",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},f(e)):t("p",{class:"font-medium"},"-")}},{header:"Ofertas",accessorKey:"numberOfBids",cell:a=>{const e=a.getValue();return t("p",e>0?e.toString():"-")}},{header:"Mejor oferta",accessorKey:"maximumBid",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium"},f(e)):t("p",{class:"font-medium"},"-")}},{header:"TIPO",accessorKey:"recordType",cell:a=>{const e=a.getValue();return t("p",{class:"text-grey"},ee[e]||e)}},{header:"ESTADO",accessorKey:"stage",cell:a=>{const m=a.row.original.numberOfBids>0;return t("div",{class:"font-medium"},t(Y,{variant:m?"success":"pending"},m?"CON OFERTA":"SIN OFERTA"))}}];ae&&T.splice(1,0,{header:"EMPRESA",accessorKey:"companyName"});const re=T,se={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},te={class:"flex items-center gap-4 text-xl font-bold leading-5"},oe={class:"flex items-center gap-4"},Oe=R({__name:"Published",props:{published:{}},setup(a){var y,g,v;const e=a,_=((v=(g=(y=S().props)==null?void 0:y.auth)==null?void 0:g.salesforceUser)==null?void 0:v.rols)==="Admin",d=x(()=>{var r;return((r=e.published)==null?void 0:r.Auctions)??[]}),p=C(new Set);U(()=>{var r;return(r=e.published)==null?void 0:r.Auctions},r=>{r&&r.forEach(s=>{s.companyName&&p.value.add(s.companyName)})},{immediate:!0});const $=x(()=>Array.from(p.value).sort()),l=C("");function F(r){l.value=r,A.get(route("my-publications.published"),{companyName:r||void 0},{preserveState:!0,preserveScroll:!0,only:["published"]})}function D(){l.value="",A.get(route("my-publications.published"),{},{preserveState:!0,preserveScroll:!0,only:["published"]})}return j(()=>{const s=new URL(window.location.href).searchParams.get("companyName");s&&(l.value=s,s&&p.value.add(s))}),(r,s)=>(i(),h(V,null,[c(o(q),{title:"Mis Publicaciones"}),c(M,null,{default:u(()=>[b("header",se,[b("h1",te,[c(o(z),{variant:"black",class:"text-black w-8 h-8"}),N(" Mis Publicaciones | Publicadas ( "+E(d.value.length)+" ) ",1)]),b("div",oe,[_?(i(),O(o(X),{key:0,modelValue:l.value,"onUpdate:modelValue":[s[0]||(s[0]=n=>l.value=n),F]},{default:u(()=>[c(o(G),{class:"w-[250px] border border-black rounded-md"},{default:u(()=>[c(o(H),{placeholder:l.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),c(o(J),null,{default:u(()=>[(i(!0),h(V,null,Q($.value,n=>(i(),O(o(W),{key:n,value:n},{default:u(()=>[N(E(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):k("",!0),l.value?(i(),h("button",{key:1,onClick:D,class:"px-3 py-1 text-sm border border-black rounded-md hover:bg-gray-100"}," Limpiar filtro ")):k("",!0)])]),c(o(Z),{columns:o(re),data:d.value,"column-filter":["id","fenlabId","prestashopId","companyName","productReference","name"]},null,8,["columns","data"])]),_:1})],64))}});export{Oe as default};
