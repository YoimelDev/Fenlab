import{d as z,r as H,K as W,am as j,o as u,c as g,w as e,a,u as l,e as t,b as n,h as b,B as v,t as E,y as f,z as c,F as w}from"./app-BQGgLG_u.js";import{f as I}from"./fenlab.api-B5lFlPnj.js";import{_ as y}from"./index-a99hmaOF.js";import{_ as L}from"./Dialog.vue_vue_type_script_setup_true_lang-CzHDClYD.js";import{_ as N}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-D8GWH20c.js";import{_ as O,a as T,b as q,c as G}from"./DialogFooter.vue_vue_type_script_setup_true_lang-ZTOv4cBF.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-Djv0IC63.js";import{_ as $,a as x,b as h,c as r,d as V,e as d}from"./TableRow.vue_vue_type_script_setup_true_lang-DR0fC5IJ.js";import{t as k}from"./plyr-BlVc3c2J.js";import{_ as S,a as J,b as U,c as A}from"./TabsContent.vue_vue_type_script_setup_true_lang-BWpBQ9fe.js";import{_ as Q}from"./ScrollArea.vue_vue_type_script_setup_true_lang-NtEcflVQ.js";const R={class:"content"},X={class:"flex flex-col gap-4"},Y=["onUpdate:modelValue"],Z=["onUpdate:modelValue"],ee={key:0,class:"mt-6"},ae=["onUpdate:modelValue"],le=["onUpdate:modelValue"],te=["onUpdate:modelValue"],se={key:1},oe={class:"space-y-2"},Ce=z({__name:"EditMasterData",props:{masterData:{type:Object,required:!0}},emits:["updated"],setup(D,{emit:F}){const B=D,C=H(!1),_=W({...B.masterData}),M=F,P=async()=>{try{await I.post("",{method:"post",path:"company-master-data",body:{..._}}),k({variant:"info",title:"Datos guardados correctamente"}),M("updated")}catch{k({variant:"danger",title:"¡Ups! Algo salió mal."})}finally{C.value=!1}};return(ne,m)=>{const p=j("Label");return u(),g(l(L),{open:C.value,"onUpdate:open":m[1]||(m[1]=s=>C.value=s)},{default:e(()=>[a(l(N),null,{default:e(()=>[a(l(y),{variant:"ghost",class:"text-blue text-sm font-medium",size:"sm"},{default:e(()=>[t(" Editar ")]),_:1})]),_:1}),a(l(G),null,{default:e(()=>[a(l(O),null,{default:e(()=>[a(l(T),null,{default:e(()=>[t(" Master data financiera ")]),_:1})]),_:1}),n("div",R,[n("div",X,[a(l(Q),{class:"h-96 space-y-4 my-4 p-4 bg-white/100 rounded-sm border border-[#E5E7EB] shadow-sm"},{default:e(()=>[a(l(S),{"default-value":"macro"},{default:e(()=>[a(l(J),{class:"grid grid-cols-2"},{default:e(()=>[a(l(U),{value:"macro"},{default:e(()=>[t(" Macro ")]),_:1}),a(l(U),{value:"brokerFee"},{default:e(()=>[t(" Broker Fee ")]),_:1})]),_:1}),a(l(A),{value:"macro"},{default:e(()=>[a(l($),null,{default:e(()=>[a(l(x),null,{default:e(()=>[a(l(h),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:e(()=>[a(l(r),{class:"!bg-[#ECECEC] w-[140px] z-50 relative"},{default:e(()=>[a(p,null,{default:e(()=>[t("AÑO")]),_:1})]),_:1}),a(l(r),null,{default:e(()=>[a(p,null,{default:e(()=>[t("IPC (%)")]),_:1})]),_:1}),a(l(r),null,{default:e(()=>[a(p,null,{default:e(()=>[t("HPA (%)")]),_:1})]),_:1})]),_:1})]),_:1}),a(l(V),null,{default:e(()=>[(u(!0),b(w,null,v(_.macro,s=>(u(),g(l(h),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:s.ano},{default:e(()=>[a(l(d),{class:"!bg-[#ECECEC] font-bold w-[140px]"},{default:e(()=>[t(E(s.ano),1)]),_:2},1024),a(l(d),null,{default:e(()=>[f(n("input",{"onUpdate:modelValue":o=>s.IPC=o,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,Y),[[c,s.IPC]])]),_:2},1024),a(l(d),null,{default:e(()=>[f(n("input",{"onUpdate:modelValue":o=>s.HPA=o,class:"w-full h-full outline-none"},null,8,Z),[[c,s.HPA]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),a(l(A),{value:"brokerFee"},{default:e(()=>{var s;return[(s=_.brokerFee)!=null&&s.gestion?(u(),b("div",ee,[a(l($),{class:"mt-2"},{default:e(()=>[a(l(x),null,{default:e(()=>[a(l(h),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:e(()=>[a(l(r),{class:"!bg-[#ECECEC] z-50 relative"},{default:e(()=>[t(" Tramo ")]),_:1}),a(l(r),null,{default:e(()=>[t("Fee (%)")]),_:1}),a(l(r),null,{default:e(()=>[t("Cap")]),_:1}),a(l(r),null,{default:e(()=>[t("Hurdle")]),_:1})]),_:1})]),_:1}),a(l(V),null,{default:e(()=>[(u(!0),b(w,null,v(_.brokerFee.gestion,o=>(u(),g(l(h),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:o.tramo},{default:e(()=>[a(l(d),{class:"!bg-[#ECECEC] font-bold"},{default:e(()=>[t(E(o.tramo),1)]),_:2},1024),a(l(d),null,{default:e(()=>[f(n("input",{"onUpdate:modelValue":i=>o.fee=i,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,ae),[[c,o.fee,void 0,{number:!0}]])]),_:2},1024),a(l(d),null,{default:e(()=>[f(n("input",{"onUpdate:modelValue":i=>o.cap=i,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,le),[[c,o.cap,void 0,{number:!0}]])]),_:2},1024),a(l(d),null,{default:e(()=>[f(n("input",{"onUpdate:modelValue":i=>o.hurdle=i,class:"w-full h-full outline-none hover:bg-gray-100"},null,8,te),[[c,o.hurdle,void 0,{number:!0}]])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(u(),b("div",se))]}),_:1})]),_:1})]),_:1}),n("div",oe,[a(p,{for:"wacc"},{default:e(()=>[t("WACC - Coste de Capital")]),_:1}),a(l(K),{id:"wacc",type:"text",placeholder:"WACC - Coste de Capital",class:"mt-2",required:"",autofocus:"",autocomplete:"wacc",modelValue:_.WACC,"onUpdate:modelValue":m[0]||(m[0]=s=>_.WACC=s),modelModifiers:{number:!0}},null,8,["modelValue"])])])]),a(l(q),{class:"flex justify-between mt-10"},{default:e(()=>[a(l(y),{class:"gap-1 w-full",variant:"green",size:"sm",onClick:P},{default:e(()=>[t(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}});export{Ce as _};
