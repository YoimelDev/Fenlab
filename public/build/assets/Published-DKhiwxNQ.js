import{_ as R}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-C_gNeX4s.js";import{Q as $,D as t,E as f,d as D,m as x,r as C,O as U,x as j,o as i,h,a as c,u as o,Z as q,w as u,b,e as N,t as O,c as V,F as k,B as Q,k as A,j as E}from"./app-BwhPGnvj.js";import{_ as Z}from"./DataTable.vue_vue_type_script_setup_true_lang-DftQjHrN.js";import{_ as z}from"./PictureIcon-DOk0jBOZ.js";import"./plyr-CnNDfIlC.js";import{_ as G,a as H,b as J,c as W,d as X}from"./SelectValue.vue_vue_type_script_setup_true_lang-BxUvGBK9.js";import{_ as Y}from"./index-DMoW_soq.js";import{r as ee}from"./recordTypes-32YOpbUo.js";import"./index-C3SArVXl.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-JWr5CV_u.js";import"./index-DB3Dq42b.js";import"./index-Bb4qSo10.js";import"./index-DGGlmF_T.js";import"./Cross2Icon-DOkbEd4S.js";import"./ArrowIcon.vue_vue_type_script_setup_true_lang-CWTKGUDd.js";import"./Input.vue_vue_type_script_setup_true_lang-nP2gdohQ.js";import"./TableRow.vue_vue_type_script_setup_true_lang-D9Sw40gZ.js";import"./CheckIcon-CdPCgSxu.js";const F=$();var P,w,B;const ae=((B=(w=(P=F.props)==null?void 0:P.auth)==null?void 0:w.salesforceUser)==null?void 0:B.rols)==="Admin";var S,K;console.log((K=(S=F.props)==null?void 0:S.auth)==null?void 0:K.salesforceUser);const I=[{header:"ID FENCIA",accessorKey:"productReference"},{header:"DETALLE",accessorKey:"name"},{header:"PRECIO MÍNIMO",accessorKey:"minimumPrice",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},f(e)):t("p",{class:"font-medium"},"-")}},{header:"Precio de referencia",accessorKey:"referencePrice",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium text-right"},f(e)):t("p",{class:"font-medium"},"-")}},{header:"Ofertas",accessorKey:"numberOfBids",cell:a=>{const e=a.getValue();return t("p",e>0?e.toString():"-")}},{header:"Mejor oferta",accessorKey:"maximumBid",cell:a=>{const e=a.getValue();return e?t("p",{class:"font-medium"},f(e)):t("p",{class:"font-medium"},"-")}},{header:"TIPO",accessorKey:"recordType",cell:a=>{const e=a.getValue();return t("p",{class:"text-grey"},ee[e]||e)}},{header:"ESTADO",accessorKey:"stage",cell:a=>{const m=a.row.original.numberOfBids>0;return t("div",{class:"font-medium"},t(Y,{variant:m?"success":"pending"},m?"CON OFERTA":"SIN OFERTA"))}}];ae&&I.splice(1,0,{header:"EMPRESA",accessorKey:"companyName"});const re=I,se={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},te={class:"flex items-center gap-4 text-xl font-bold leading-5"},oe={class:"flex items-center gap-4"},Ve=D({__name:"Published",props:{published:{}},setup(a){var y,g,v;const e=a,_=((v=(g=(y=$().props)==null?void 0:y.auth)==null?void 0:g.salesforceUser)==null?void 0:v.rols)==="Admin",d=x(()=>{var r;return((r=e.published)==null?void 0:r.Auctions)??[]}),p=C(new Set);U(()=>{var r;return(r=e.published)==null?void 0:r.Auctions},r=>{r&&r.forEach(s=>{s.companyName&&p.value.add(s.companyName)})},{immediate:!0});const L=x(()=>Array.from(p.value).sort()),l=C("");function T(r){l.value=r,E.get(route("my-publications.published"),{companyName:r||void 0},{preserveState:!0,preserveScroll:!0,only:["published"]})}function M(){l.value="",E.get(route("my-publications.published"),{},{preserveState:!0,preserveScroll:!0,only:["published"]})}return j(()=>{const s=new URL(window.location.href).searchParams.get("companyName");s&&(l.value=s,s&&p.value.add(s))}),(r,s)=>(i(),h(k,null,[c(o(q),{title:"Mis Publicaciones"}),c(R,null,{default:u(()=>[b("header",se,[b("h1",te,[c(o(z),{variant:"black",class:"text-black w-8 h-8"}),N(" Mis Publicaciones | Publicadas ( "+O(d.value.length)+" ) ",1)]),b("div",oe,[_?(i(),V(o(X),{key:0,modelValue:l.value,"onUpdate:modelValue":[s[0]||(s[0]=n=>l.value=n),T]},{default:u(()=>[c(o(G),{class:"w-[250px] border border-black rounded-md"},{default:u(()=>[c(o(H),{placeholder:l.value||"Filtrar por empresa"},null,8,["placeholder"])]),_:1}),c(o(J),null,{default:u(()=>[(i(!0),h(k,null,Q(L.value,n=>(i(),V(o(W),{key:n,value:n},{default:u(()=>[N(O(n),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])):A("",!0),l.value?(i(),h("button",{key:1,onClick:M,class:"px-3 py-1 text-sm border border-black rounded-md hover:bg-gray-100"}," Limpiar filtro ")):A("",!0)])]),c(o(Z),{columns:o(re),data:d.value,"column-filter":["id","fenlabId","prestashopId","companyName","productReference","name"]},null,8,["columns","data"])]),_:1})],64))}});export{Ve as default};
