import{o as a,g as d,D as fe,b as s,d as j,j as p,l as k,c as f,w as i,m as Z,E as U,G as O,p as H,u as e,H as he,r as L,a as l,Z as me,k as _e,t as u,e as x,F as M,z as T,n as N,f as ee,Q as Ce,i as te}from"./app-U6TZWzdG.js";import{_ as ge}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-en96AEw_.js";import{a as ve,_ as se,b as ae}from"./index-Btt-dZMz.js";import{_ as w}from"./index-CefcmSVF.js";import{I as ye}from"./InfoIcon-BQB7Evvl.js";import{_ as xe,a as we,b as re,c as oe,X as $}from"./TabsContent.vue_vue_type_script_setup_true_lang-v8PYlywY.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{u as be,a as ke}from"./index-DVOJ5N42.js";import{t as le}from"./plyr-DAdG86ap.js";import{x as je,c as V,n as Me,I as D,o as $e,l as Be,r as He,s as Ve,u as Ee}from"./utils-VRDBpWUz.js";import{_ as Fe}from"./Assets.vue_vue_type_script_setup_true_lang-OOeO19nJ.js";import{f as R}from"./fenlab.api-DhEghGT2.js";import"./PictureIcon-BIjv6Dyu.js";import"./index-ND2AtUgK.js";import"./Cross2Icon-OIGL3Wdk.js";import"./DataTable.vue_vue_type_script_setup_true_lang-CtyGMtfS.js";import"./Input.vue_vue_type_script_setup_true_lang-Q8KFWi3L.js";import"./TableRow.vue_vue_type_script_setup_true_lang-C7DGuzy4.js";import"./AssetActions.vue_vue_type_script_setup_true_lang-eeoUUK3m.js";import"./Dialog.vue_vue_type_script_setup_true_lang-DWMhIoQP.js";import"./PostDialog.vue_vue_type_script_setup_true_lang-BqLET48M.js";import"./DialogFooter.vue_vue_type_script_setup_true_lang-Cz1yCQbA.js";import"./Label.vue_vue_type_script_setup_true_lang-BPOPHJo-.js";import"./RadioGroupItem.vue_vue_type_script_setup_true_lang-B5u7kqK0.js";import"./CheckIcon-Bmgr62MN.js";const Le={},Ze={width:"41",height:"49",viewBox:"0 0 41 49",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function De(_,r){return a(),d("svg",Ze,r[0]||(r[0]=[fe('<g opacity="0.3"><path opacity="0.3" d="M28.8042 9.95459C27.699 9.95352 26.6394 9.51399 25.8579 8.7325C25.0765 7.95102 24.637 6.8914 24.6359 5.78621V-0.00134277H6.0097C4.56695 -0.00134277 3.18331 0.571802 2.16313 1.59198C1.14296 2.61215 0.569824 3.99577 0.569824 5.43852V38.2314C0.571967 39.6728 1.14604 41.0544 2.16598 42.0728C3.18593 43.0912 4.56835 43.6632 6.0097 43.6632H28.3696C29.811 43.6632 31.1934 43.0912 32.2133 42.0728C33.2333 41.0544 33.8073 39.6728 33.8095 38.2314V9.95459H28.8042Z" fill="#FF3E4C"></path></g><path d="M33.8095 9.95459H28.8042C27.699 9.95352 26.6394 9.51399 25.8579 8.7325C25.0764 7.95102 24.6369 6.8914 24.6359 5.78621V-0.00134277L33.8095 9.95459Z" fill="#FF3E4C"></path><path d="M26.9706 30.4912H6.10059C5.89954 30.4912 5.70672 30.4113 5.56456 30.2691C5.42239 30.127 5.34253 29.9341 5.34253 29.7331C5.34306 29.5324 5.42317 29.3401 5.56527 29.1984C5.70738 29.0566 5.89989 28.9771 6.10059 28.9771H26.9706C27.1712 28.9771 27.3635 29.0567 27.5053 29.1984C27.647 29.3402 27.7267 29.5326 27.7267 29.7331C27.727 29.8325 27.7076 29.9311 27.6697 30.023C27.6318 30.115 27.5762 30.1986 27.506 30.269C27.4357 30.3394 27.3523 30.3953 27.2604 30.4334C27.1686 30.4715 27.0701 30.4912 26.9706 30.4912Z" fill="#FF3E4C"></path><path d="M26.9706 21.9522H6.10059C5.89989 21.9522 5.70738 21.8726 5.56527 21.7309C5.42317 21.5891 5.34306 21.3969 5.34253 21.1962C5.34253 20.9951 5.42239 20.8023 5.56456 20.6601C5.70672 20.5179 5.89954 20.4381 6.10059 20.4381H26.9706C27.0701 20.4381 27.1686 20.4577 27.2604 20.4959C27.3523 20.534 27.4357 20.5898 27.506 20.6602C27.5762 20.7307 27.6318 20.8143 27.6697 20.9062C27.7076 20.9982 27.727 21.0967 27.7267 21.1962C27.7267 21.3967 27.647 21.589 27.5053 21.7308C27.3635 21.8726 27.1712 21.9522 26.9706 21.9522Z" fill="#FF3E4C"></path><path d="M26.9706 26.2216H6.10059C5.89954 26.2216 5.70672 26.1418 5.56456 25.9996C5.42239 25.8574 5.34253 25.6646 5.34253 25.4636C5.34306 25.2629 5.42317 25.0705 5.56527 24.9288C5.70738 24.7871 5.89989 24.7075 6.10059 24.7075H26.9706C27.1712 24.7075 27.3635 24.7872 27.5053 24.929C27.647 25.0708 27.7267 25.263 27.7267 25.4636C27.727 25.563 27.7076 25.6616 27.6697 25.7535C27.6318 25.8455 27.5762 25.9291 27.506 25.9995C27.4357 26.0699 27.3523 26.1258 27.2604 26.1639C27.1686 26.202 27.0701 26.2216 26.9706 26.2216Z" fill="#FF3E4C"></path><path d="M18.7391 17.6828H6.10059C5.89989 17.6828 5.70738 17.6032 5.56527 17.4615C5.42317 17.3198 5.34306 17.1275 5.34253 16.9268C5.34253 16.7257 5.42239 16.5329 5.56456 16.3907C5.70672 16.2486 5.89954 16.1687 6.10059 16.1687H18.7391C18.9398 16.1692 19.1321 16.2493 19.2738 16.3914C19.4155 16.5335 19.4951 16.7261 19.4951 16.9268C19.4946 17.1271 19.4148 17.3191 19.2731 17.4608C19.1314 17.6024 18.9394 17.6823 18.7391 17.6828Z" fill="#FF3E4C"></path><path d="M18.7391 13.4134H6.10059C5.89989 13.4134 5.70738 13.3338 5.56527 13.1921C5.42317 13.0503 5.34306 12.8581 5.34253 12.6574C5.34253 12.4563 5.42239 12.2634 5.56456 12.1213C5.70672 11.9791 5.89954 11.8993 6.10059 11.8993H18.7391C18.9398 11.8998 19.1321 11.9799 19.2738 12.122C19.4155 12.2641 19.4951 12.4567 19.4951 12.6574C19.4946 12.8577 19.4148 13.0497 19.2731 13.1914C19.1314 13.333 18.9394 13.4129 18.7391 13.4134Z" fill="#FF3E4C"></path><path d="M37.7535 34.4875H12.4765C10.6835 34.4875 9.22998 35.9411 9.22998 37.7341V45.2703C9.22998 47.0633 10.6835 48.5168 12.4765 48.5168H37.7535C39.5465 48.5168 41 47.0633 41 45.2703V37.7341C41 35.9411 39.5465 34.4875 37.7535 34.4875Z" fill="#FF3E4C"></path><path d="M17.5221 43.1335V44.6032H16.002V43.1335H17.5221Z" fill="white"></path><path d="M19.758 42.4705V44.6032H18.2883V38.5245H20.6697C21.3914 38.5245 21.9432 38.7044 22.3212 39.0622C22.5125 39.2502 22.6619 39.4765 22.7594 39.7263C22.857 39.9761 22.9005 40.2438 22.8873 40.5116C22.8946 40.8651 22.8074 41.214 22.6346 41.5224C22.4581 41.8239 22.1965 42.0666 21.8826 42.2199C21.5039 42.3988 21.0883 42.4854 20.6697 42.4725L19.758 42.4705ZM21.3914 40.5116C21.3914 39.9726 21.0962 39.703 20.5059 39.703H19.758V41.2859H20.5059C21.0962 41.2913 21.3914 41.0332 21.3914 40.5116Z" fill="white"></path><path d="M28.6951 43.1376C28.442 43.5973 28.0596 43.9726 27.5954 44.2171C27.073 44.4846 26.4921 44.6173 25.9054 44.6032H23.611V38.5246H25.9054C26.4925 38.5098 27.0743 38.6396 27.5994 38.9026C28.0624 39.1418 28.4438 39.5134 28.6951 39.9699C28.9581 40.4546 29.0904 40.9994 29.0791 41.5508C29.0901 42.104 28.9578 42.6506 28.6951 43.1376ZM27.1142 42.8324C27.2786 42.6637 27.4059 42.4626 27.488 42.2419C27.5702 42.0212 27.6054 41.7858 27.5913 41.5508C27.6054 41.316 27.5703 41.0808 27.4881 40.8605C27.406 40.6401 27.2786 40.4393 27.1142 40.2711C26.7466 39.9485 26.2663 39.7843 25.778 39.8143H25.0806V43.2872H25.778C26.2659 43.3169 26.7458 43.1535 27.1142 42.8324Z" fill="white"></path><path d="M33.8762 38.5245V39.695H31.3837V41.0271H33.3081V42.145H31.3837V44.6032H29.912V38.5245H33.8762Z" fill="white"></path><path d="M26.6008 11.8993H23.0268C22.4038 11.8993 21.8988 12.4043 21.8988 13.0273V16.6013C21.8988 17.2243 22.4038 17.7293 23.0268 17.7293H26.6008C27.2238 17.7293 27.7288 17.2243 27.7288 16.6013V13.0273C27.7288 12.4043 27.2238 11.8993 26.6008 11.8993Z" fill="#FF3E4C"></path>',13)]))}const ze=S(Le,[["render",De]]),Ae={},Ie={width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Se(_,r){return a(),d("svg",Ie,r[0]||(r[0]=[s("path",{d:"M13 9V11.6667C13 12.0203 12.8595 12.3594 12.6095 12.6095C12.3594 12.8595 12.0203 13 11.6667 13H2.33333C1.97971 13 1.64057 12.8595 1.39052 12.6095C1.14048 12.3594 1 12.0203 1 11.6667V9M3.66667 5.66667L7 9M7 9L10.3333 5.66667M7 9V1",stroke:"currentColor","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const B=S(Ae,[["render",Se]]),Pe={},Te={width:"8",height:"28",viewBox:"0 0 8 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ne(_,r){return a(),d("svg",Te,r[0]||(r[0]=[s("path",{d:"M4 27.6667C5.47276 27.6667 6.66667 26.4728 6.66667 25C6.66667 23.5272 5.47276 22.3333 4 22.3333C2.52724 22.3333 1.33333 23.5272 1.33333 25C1.33333 26.4728 2.52724 27.6667 4 27.6667ZM4.35355 0.646446C4.15829 0.451185 3.84171 0.451185 3.64645 0.646446L0.464465 3.82843C0.269203 4.02369 0.269203 4.34027 0.464465 4.53553C0.659727 4.7308 0.97631 4.7308 1.17157 4.53553L4 1.70711L6.82843 4.53553C7.02369 4.7308 7.34027 4.7308 7.53553 4.53553C7.7308 4.34027 7.7308 4.02369 7.53553 3.82843L4.35355 0.646446ZM4.5 25L4.5 1L3.5 1L3.5 25L4.5 25Z",fill:"#686868"},null,-1)]))}const I=S(Pe,[["render",Ne]]),Re={key:0,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ne=j({__name:"CircleIcon",props:{variant:{}},setup(_){return(r,h)=>r.variant==="help"?(a(),d("svg",Re,h[0]||(h[0]=[s("g",{"clip-path":"url(#clip0_2013_3043)"},[s("path",{d:"M6.06004 6.00004C6.21678 5.55449 6.52614 5.17878 6.93334 4.93946C7.34055 4.70015 7.8193 4.61267 8.28483 4.69252C8.75035 4.77236 9.17258 5.01439 9.47676 5.37573C9.78093 5.73706 9.94741 6.19439 9.94671 6.66671C9.94671 8.00004 7.94671 8.66671 7.94671 8.66671M8.00004 11.3334H8.00671M14.6667 8.00004C14.6667 11.6819 11.6819 14.6667 8.00004 14.6667C4.31814 14.6667 1.33337 11.6819 1.33337 8.00004C1.33337 4.31814 4.31814 1.33337 8.00004 1.33337C11.6819 1.33337 14.6667 4.31814 14.6667 8.00004Z",stroke:"#686868","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"})],-1),s("defs",null,[s("clipPath",{id:"clip0_2013_3043"},[s("rect",{width:"16",height:"16",fill:"white"})])],-1)]))):p("",!0)}}),Ue={},Oe={width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ye(_,r){return a(),d("svg",Oe,r[0]||(r[0]=[s("path",{d:"M14.5 10V12.6667C14.5 13.0203 14.3595 13.3594 14.1095 13.6095C13.8594 13.8595 13.5203 14 13.1667 14H3.83333C3.47971 14 3.14057 13.8595 2.89052 13.6095C2.64048 13.3594 2.5 13.0203 2.5 12.6667V10M11.8333 5.33333L8.5 2M8.5 2L5.16667 5.33333M8.5 2V10",stroke:"white","stroke-width":"1.6","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))}const ie=S(Ue,[["render",Ye]]);function ce(_,r){return a(),d("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.90321 7.29677C1.90321 10.341 4.11041 12.4147 6.58893 12.8439C6.87255 12.893 7.06266 13.1627 7.01355 13.4464C6.96444 13.73 6.69471 13.9201 6.41109 13.871C3.49942 13.3668 0.86084 10.9127 0.86084 7.29677C0.860839 5.76009 1.55996 4.55245 2.37639 3.63377C2.96124 2.97568 3.63034 2.44135 4.16846 2.03202L2.53205 2.03202C2.25591 2.03202 2.03205 1.80816 2.03205 1.53202C2.03205 1.25588 2.25591 1.03202 2.53205 1.03202L5.53205 1.03202C5.80819 1.03202 6.03205 1.25588 6.03205 1.53202L6.03205 4.53202C6.03205 4.80816 5.80819 5.03202 5.53205 5.03202C5.25591 5.03202 5.03205 4.80816 5.03205 4.53202L5.03205 2.68645L5.03054 2.68759L5.03045 2.68766L5.03044 2.68767L5.03043 2.68767C4.45896 3.11868 3.76059 3.64538 3.15554 4.3262C2.44102 5.13021 1.90321 6.10154 1.90321 7.29677ZM13.0109 7.70321C13.0109 4.69115 10.8505 2.6296 8.40384 2.17029C8.12093 2.11718 7.93465 1.84479 7.98776 1.56188C8.04087 1.27898 8.31326 1.0927 8.59616 1.14581C11.4704 1.68541 14.0532 4.12605 14.0532 7.70321C14.0532 9.23988 13.3541 10.4475 12.5377 11.3662C11.9528 12.0243 11.2837 12.5586 10.7456 12.968L12.3821 12.968C12.6582 12.968 12.8821 13.1918 12.8821 13.468C12.8821 13.7441 12.6582 13.968 12.3821 13.968L9.38205 13.968C9.10591 13.968 8.88205 13.7441 8.88205 13.468L8.88205 10.468C8.88205 10.1918 9.10591 9.96796 9.38205 9.96796C9.65819 9.96796 9.88205 10.1918 9.88205 10.468L9.88205 12.3135L9.88362 12.3123C10.4551 11.8813 11.1535 11.3546 11.7585 10.6738C12.4731 9.86976 13.0109 8.89844 13.0109 7.70321Z",fill:"currentColor"})])}const qe=j({__name:"Stepper",props:{defaultValue:{},orientation:{},dir:{},modelValue:{},linear:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue"],setup(_,{emit:r}){const h=_,v=r,c=k(()=>{const{class:g,...C}=h;return C}),m=je(c,v);return(g,C)=>(a(),f(e(Me),H({class:e(V)("flex gap-2",h.class)},e(m)),{default:i(E=>[Z(g.$slots,"default",U(O(E)))]),_:3},16,["class"]))}}),Ge=j({__name:"StepperItem",props:{step:{},disabled:{type:Boolean},completed:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(_){const r=_,h=k(()=>{const{class:c,...m}=r;return m}),v=D(h);return(c,m)=>(a(),f(e($e),H(e(v),{class:e(V)("flex items-center gap-2 group data-[disabled]:pointer-events-none",r.class)}),{default:i(g=>[Z(c.$slots,"default",U(O(g)))]),_:3},16,["class"]))}}),Xe=j({__name:"StepperTrigger",props:{asChild:{type:Boolean},as:{},class:{}},setup(_){const r=_,h=k(()=>{const{class:c,...m}=r;return m}),v=D(h);return(c,m)=>(a(),f(e(Be),H(e(v),{class:e(V)("p-1 flex flex-col items-center text-center gap-1 rounded-md",r.class)}),{default:i(()=>[Z(c.$slots,"default")]),_:3},16,["class"]))}}),Ke=j({__name:"StepperTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(_){const r=_,h=k(()=>{const{class:c,...m}=r;return m}),v=D(h);return(c,m)=>(a(),f(e(He),H(e(v),{class:e(V)("text-md font-semibold whitespace-nowrap",r.class)}),{default:i(()=>[Z(c.$slots,"default")]),_:3},16,["class"]))}}),Qe=j({__name:"StepperDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(_){const r=_,h=k(()=>{const{class:c,...m}=r;return m}),v=D(h);return(c,m)=>(a(),f(e(Ve),H(e(v),{class:e(V)("text-xs text-muted-foreground",r.class)}),{default:i(g=>[Z(c.$slots,"default",U(O(g)))]),_:3},16,["class"]))}}),Je=j({__name:"StepperSeparator",props:{orientation:{},decorative:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(_){const r=_,h=k(()=>{const{class:c,...m}=r;return m}),v=D(h);return(c,m)=>(a(),f(e(Ee),H(e(v),{class:e(V)("bg-muted","group-data-[disabled]:bg-muted group-data-[disabled]:opacity-50","group-data-[state=completed]:bg-accent-foreground",r.class)}),null,16,["class"]))}}),We={class:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-10"},et={class:"flex items-center gap-4"},tt={class:"hidden sm:inline capitalize"},st={class:"mt-5 flex flex-col items-center text-center"},at={class:"my-4 p-6 bg-white rounded-sm border border-[#E5E7EB] shadow-sm"},rt=["innerHTML"],ot={key:0,class:"my-4 p-8 bg-white"},lt={key:0,class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-sm text-red-600",style:{"white-space":"pre-line"}},nt={class:"flex items-center gap-2 mb-5 text-grey text-sm"},it={key:1,class:"w-full mb-4"},ct={class:"flex items-center gap-2"},dt={class:"text-sm font-medium"},pt={class:"text-xs text-gray-500"},ut={key:1,class:"flex items-center justify-center gap-3"},ft={key:1,class:"my-4 p-2 bg-white"},ht={key:0,class:"mb-4 p-4 bg-red-50 border border-red-200 rounded-sm text-red-600",style:{"white-space":"pre-line"}},mt={class:"flex items-center gap-2 mb-5 text-grey text-sm"},_t={key:1,class:"w-full mb-4"},Ct={class:"flex items-center gap-2"},gt={class:"text-sm font-medium"},vt={class:"text-xs text-gray-500"},yt={class:"flex justify-center items-center"},xt={key:2,class:"my-4"},wt={class:"relative flex items-center gap-4 w-full p-4 bg-white"},bt={class:"text-black text-lg font-bold"},kt={class:"text-grey text-sm"},jt=["href"],Mt={key:3,class:"my-4"},$t={class:"relative flex items-center gap-4 w-full p-4 bg-white"},Bt={class:"text-black text-lg font-bold"},Ht={class:"text-grey text-sm"},Vt=["href"],Et={key:4,class:"my-4"},Ft={class:"relative flex items-center gap-4 w-full p-4 bg-white"},Lt={class:"text-black text-lg font-bold"},Zt={class:"text-grey text-sm"},Dt=["href"],zt={class:"flex justify-center items-center"},At={key:5,class:"my-4"},It={class:"relative flex items-center gap-4 w-full p-4 bg-white"},St={class:"text-black text-lg font-bold"},Pt={class:"text-grey text-sm"},Tt=["href"],Nt={class:"flex justify-center items-center"},Rt={key:6,class:"my-4"},Ut={class:"relative flex items-center gap-4 w-full p-4 bg-white"},Ot={class:"text-black text-lg font-bold"},Yt={class:"text-grey text-sm"},qt=["href"],Gt={class:"flex justify-center items-center"},Xt={key:7,class:"my-4"},Kt={class:"relative flex items-center gap-4 w-full p-4 bg-white"},Qt={class:"text-black text-lg font-bold"},Jt={class:"text-grey text-sm"},Wt=["href"],js=j({__name:"InternalView",props:{project:{},assets:{}},setup(_){const r=_,h=he("$loading"),v=L("analysis"),c=L([]),m=L(),g=L(null),C=L(""),E=[{step:1,title:"Carga Cliente",description:be(r.project.createdAt,"DD/MM/YYYY")},{step:2,title:"Análisis Fenlab",description:""},{step:3,title:"Carga definitiva",description:""}],Y=k(()=>{const t=Ce();return console.log("ROL",t.props.auth.salesforceUser.rols),t.props.auth.salesforceUser.rols==="Admin"}),P=k(()=>{switch(r.project.status){case"Sin empezar":return 1;case"Análisis completo":case"Análisis en curso":return 2;case"Carga definitiva":return 3;default:return 1}}),q=t=>{const n={"Sin empezar":1,"Análisis en curso":2,"Análisis completo":2,"Carga definitiva":3}[r.project.status];return t!==n};function G(t){c.value=[],t&&(c.value=t.map(o=>({file:o,name:o.name,size:o.size,type:o.type,lastModified:o.lastModified})),Y.value&&r.project.status==="Análisis en curso"?ue():pe())}const{isOverDropZone:X}=ke(m,G);function K(t){const o=t.target;o.files&&o.files.length>0&&G(Array.from(o.files))}const Q=t=>{if(t===0)return"0 Bytes";const o=1024,n=["Bytes","KB","MB","GB"],y=Math.floor(Math.log(t)/Math.log(o));return parseFloat((t/Math.pow(o,y)).toFixed(2))+" "+n[y]};function z(){g.value&&g.value.click()}const de=k(()=>r.project.status==="Análisis completo"?"second-excel":"first-excel");async function pe(){var n,y,F;if(C.value="",c.value.length===0){C.value="No se ha seleccionado ningún archivo.";return}const t=h==null?void 0:h.show(),o=new FormData;o.append("method","post"),o.append("path",`projects/${r.project.id}/${r.project.modelType}/${de.value}`),o.append("file",c.value[0].file);try{const b=await R.post("",o);if(!b.data.success){const J=b.data.errors.list.map(A=>`${A.header}: ${A.error}`).join(`
`);C.value=J;return}le({variant:"info",title:"Archivo subido correctamente"}),c.value=[],g.value&&(g.value.value="")}catch(b){C.value=((F=(y=(n=b.response)==null?void 0:n.data)==null?void 0:y.message)==null?void 0:F.join(`
`))||"Error al subir el archivo"}finally{t==null||t.hide(),te.reload()}}async function ue(){var n,y,F;if(C.value="",c.value.length===0){C.value="No se ha seleccionado ningún archivo.";return}const t=h==null?void 0:h.show(),o=new FormData;o.append("method","post"),o.append("path",`projects/${r.project.id}/idealista-excel`),o.append("file",c.value[0].file);try{const b=await R.post("",o);if(!b.data.success){const A=b.data.errors.list.map(W=>`${W.header}: ${W.error}`).join(`
`);C.value=A;return}if(!(await R.post("",{method:"post",path:`projects/${r.project.id}/${r.project.modelType}/model`})).data.success){C.value="Error al procesar el modelo";return}le({variant:"info",title:"Archivo procesado correctamente"}),c.value=[],g.value&&(g.value.value="")}catch(b){C.value=((F=(y=(n=b.response)==null?void 0:n.data)==null?void 0:y.message)==null?void 0:F.join(`
`))||"Error al procesar el archivo"}finally{t==null||t.hide(),te.reload()}}return(t,o)=>(a(),d(M,null,[l(e(me),{title:"Mis Análisis"}),l(ge,null,{default:i(()=>[s("header",We,[s("div",et,[l(e(w),{variant:"ghost","as-child":"",size:"sm"},{default:i(()=>[l(e(_e),{href:t.route("analysis")},{default:i(()=>[l(e(ve),{class:"sm:mr-2 text-black",variant:"left"}),s("span",tt,u(t.project.name),1)]),_:1},8,["href"])]),_:1}),l(e(se),{variant:e(ae)[t.project.modelType],size:"sm"},{default:i(()=>[x(u(t.project.modelType),1)]),_:1},8,["variant"]),P.value==2?(a(),f(e(ce),{key:0,class:"h-4 w-4 text-black animate-spin"})):(a(),f(e(ye),{key:1})),l(e(se),{variant:e(ae)[t.project.status],size:"sm"},{default:i(()=>[x(u(t.project.status),1)]),_:1},8,["variant"])])]),l(e(qe),{modelValue:P.value,"onUpdate:modelValue":o[0]||(o[0]=n=>P.value=n),"allow-click":!1,class:"flex w-full items-start gap-2 my-10"},{default:i(()=>[(a(),d(M,null,T(E,n=>l(e(Ge),{key:n.step,class:"relative flex w-full flex-col items-center justify-center",step:n.step},{default:i(({state:y})=>[n.step!==E[E.length-1].step?(a(),f(e(Je),{key:0,class:"absolute left-[calc(50%+20px)] right-[calc(-50%+10px)] top-5 block h-0.5 shrink-0 rounded-full bg-[#686868]/30 group-data-[state=completed]:bg-electric-green"})):p("",!0),l(e(Xe),{"as-child":""},{default:i(()=>[l(e(w),{variant:"green",size:"icon",class:N(["z-10 rounded-full shrink-0",[y==="active",y==="inactive"&&"bg-[#686868]/50",q(n.step)&&"opacity-50 cursor-not-allowed"]]),disabled:q(n.step)},{default:i(()=>[x(u(n.step),1)]),_:2},1032,["class","disabled"])]),_:2},1024),s("div",st,[l(e(Ke),{class:"text-sm font-semibold transition lg:text-base"},{default:i(()=>[x(u(n.title),1)]),_:2},1024),l(e(Qe),{class:"sr-only text-xs text-black transition md:not-sr-only lg:text-sm"},{default:i(()=>[x(u(n.description),1)]),_:2},1024)])]),_:2},1032,["step"])),64))]),_:1},8,["modelValue"]),l(e(xe),{"default-value":"analysis","model-value":v.value,"onUpdate:modelValue":o[1]||(o[1]=n=>v.value=n)},{default:i(()=>[l(e(we),{class:"grid w-[274px] grid-cols-2"},{default:i(()=>[l(e(re),{value:"analysis"},{default:i(()=>o[2]||(o[2]=[x(" Análisis ")])),_:1}),l(e(re),{value:"assets"},{default:i(()=>o[3]||(o[3]=[x(" Activos ")])),_:1})]),_:1}),l(e(oe),{value:"analysis"},{default:i(()=>[s("div",at,[s("p",{innerHTML:t.project.instructions,class:"whitespace-pre-line text-gray-700 leading-relaxed"},null,8,rt)]),t.project.status==="Análisis en curso"?(a(),d("div",ot,[Y.value?(a(),d(M,{key:0},[C.value?(a(),d("div",lt,u(C.value),1)):p("",!0),s("div",{ref_key:"dropZoneRef",ref:m,class:N(["grid place-items-center p-5 border-2 border-dashed border-[#C1C1C1] rounded-sm",[e(X)&&"border-electric-green",C.value&&"border-red-300"]]),onClick:z,role:"button"},[c.value.length===0?(a(),d(M,{key:0},[s("p",nt,[o[4]||(o[4]=x(" Arrastra aquí el archivo de Idealista o haz clic para seleccionarlo ")),l(e(ne),{variant:"help"})]),l(e(w),{variant:"green",size:"xs",onClick:ee(z,["stop"])},{default:i(()=>[l(e(ie),{class:"mr-2"}),o[5]||(o[5]=x(" Adjuntar archivo "))]),_:1})],64)):(a(),d("div",it,[(a(!0),d(M,null,T(c.value,n=>(a(),d("div",{key:n.name,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[s("div",ct,[l(e($),{class:"w-5 h-5"}),s("span",dt,u(n.name),1)]),s("span",pt,u(Q(n.size)),1)]))),128))])),s("input",{type:"file",ref_key:"fileInput",ref:g,onChange:K,class:"hidden",accept:".xlsx,.xls"},null,544)],2)],64)):(a(),d("div",ut,[l(e(ce),{class:"h-6 w-6 text-black animate-spin"}),o[6]||(o[6]=s("span",{class:"text-grey"},"Análisis en curso",-1))]))])):t.project.status!=="Carga definitiva"?(a(),d("div",ft,[C.value?(a(),d("div",ht,u(C.value),1)):p("",!0),s("div",{ref_key:"dropZoneRef",ref:m,class:N(["grid place-items-center p-5 border-2 border-dashed border-[#C1C1C1] rounded-sm",[e(X)&&"border-electric-green",C.value&&"border-red-300"]]),onClick:z,role:"button"},[c.value.length===0?(a(),d(M,{key:0},[s("p",mt,[o[7]||(o[7]=x(" Arrastra aquí tu archivo excel cumplimentado o haz clic para seleccionarlo ")),l(e(ne),{variant:"help"})]),l(e(w),{variant:"green",size:"xs",onClick:ee(z,["stop"])},{default:i(()=>[l(e(ie),{class:"mr-2"}),o[8]||(o[8]=x(" Adjuntar archivo "))]),_:1})],64)):(a(),d("div",_t,[(a(!0),d(M,null,T(c.value,n=>(a(),d("div",{key:n.name,class:"flex items-center justify-between p-2 bg-gray-50 rounded"},[s("div",Ct,[l(e($),{class:"w-5 h-5"}),s("span",gt,u(n.name),1)]),s("span",vt,u(Q(n.size)),1)]))),128))])),s("input",{type:"file",ref_key:"fileInput",ref:g,onChange:K,class:"hidden",accept:".xlsx,.xls"},null,544)],2)])):p("",!0),s("div",yt,[t.project.outputBBDD&&t.project.status!=="Carga definitiva"?(a(),f(e(I),{key:0})):p("",!0)]),t.project.assetsZip?(a(),d("div",xt,[s("div",wt,[l(e(ze)),s("div",null,[s("p",bt,u(t.project.assetsZip.title),1),s("p",kt,u(t.project.assetsZip.description),1)]),t.project.assetsZip.url?(a(),f(e(w),{key:0,variant:"ghost",size:"xs","as-child":""},{default:i(()=>[s("a",{class:"absolute top-4 right-4",href:t.project.assetsZip.url,target:"_blank",rel:"noopener noreferrer"},[l(e(B))],8,jt)]),_:1})):p("",!0)])])):p("",!0),t.project.outputBBDD?(a(),d("div",Mt,[s("div",$t,[t.project.outputBBDD.extension=="xlsx"?(a(),f(e($),{key:0})):p("",!0),s("div",null,[s("p",Bt,u(t.project.outputBBDD.title),1),s("p",Ht,u(t.project.outputBBDD.description),1)]),t.project.outputBBDD.url?(a(),f(e(w),{key:1,variant:"ghost",size:"xs","as-child":""},{default:i(()=>[s("a",{class:"absolute top-4 right-4",href:t.project.outputBBDD.url,target:"_blank",rel:"noopener noreferrer"},[l(e(B))],8,Vt)]),_:1})):p("",!0)])])):p("",!0),t.project.strats?(a(),d("div",Et,[s("div",Ft,[t.project.strats.extension=="xlsx"?(a(),f(e($),{key:0})):p("",!0),s("div",null,[s("p",Lt,u(t.project.strats.title),1),s("p",Zt,u(t.project.strats.description),1)]),t.project.strats.url?(a(),f(e(w),{key:1,variant:"ghost",size:"xs","as-child":""},{default:i(()=>[s("a",{class:"absolute top-4 right-4",href:t.project.strats.url,target:"_blank",rel:"noopener noreferrer"},[l(e(B))],8,Dt)]),_:1})):p("",!0)])])):p("",!0),s("div",zt,[t.project.secondExcel?(a(),f(e(I),{key:0})):p("",!0)]),t.project.secondExcel?(a(),d("div",At,[s("div",It,[t.project.secondExcel.extension=="xlsx"?(a(),f(e($),{key:0})):p("",!0),s("div",null,[s("p",St,u(t.project.secondExcel.title),1),s("p",Pt,u(t.project.secondExcel.description),1)]),t.project.secondExcel.url?(a(),f(e(w),{key:1,variant:"ghost",size:"xs","as-child":""},{default:i(()=>[s("a",{class:"absolute top-4 right-4",href:t.project.secondExcel.url,target:"_blank",rel:"noopener noreferrer"},[l(e(B))],8,Tt)]),_:1})):p("",!0)])])):p("",!0),s("div",Nt,[t.project.firstExcel?(a(),f(e(I),{key:0})):p("",!0)]),t.project.firstExcel?(a(),d("div",Rt,[s("div",Ut,[t.project.firstExcel.extension=="xlsx"?(a(),f(e($),{key:0})):p("",!0),s("div",null,[s("p",Ot,u(t.project.firstExcel.title),1),s("p",Yt,u(t.project.firstExcel.description),1)]),t.project.firstExcel.url?(a(),f(e(w),{key:1,variant:"ghost",size:"xs","as-child":""},{default:i(()=>[s("a",{class:"absolute top-4 right-4",href:t.project.firstExcel.url,target:"_blank",rel:"noopener noreferrer"},[l(e(B))],8,qt)]),_:1})):p("",!0)])])):p("",!0),s("div",Gt,[t.project.template?(a(),f(e(I),{key:0})):p("",!0)]),t.project.template?(a(),d("div",Xt,[s("div",Kt,[t.project.template.extension=="xlsx"?(a(),f(e($),{key:0})):p("",!0),s("div",null,[s("p",Qt,u(t.project.template.title),1),s("p",Jt,u(t.project.template.description),1)]),t.project.template.url?(a(),f(e(w),{key:1,variant:"ghost",size:"xs","as-child":""},{default:i(()=>[s("a",{class:"absolute top-4 right-4",href:t.project.template.url,target:"_blank",rel:"noopener noreferrer"},[l(e(B))],8,Wt)]),_:1})):p("",!0)])])):p("",!0)]),_:1}),l(e(oe),{value:"assets"},{default:i(()=>[l(e(Fe),{assets:t.assets.data},null,8,["assets"])]),_:1})]),_:1},8,["model-value"])]),_:1})],64))}});export{js as default};
