import{o as p,g as A,b as t,d as M,l as R,c as P,w as l,m as H,p as O,u as e,v as h,x as q,G as I,n as m,r as $,H as Z,I as G,s as W,a as s,e as i,t as b,y as V,z as J,F as K,j as Q}from"./app-DSyzNbnZ.js";import{_ as D}from"./index-BqVsP0DT.js";import{_ as k}from"./index-CXejsWQM.js";import{_ as S}from"./ArrowIcon.vue_vue_type_script_setup_true_lang-D2Ni7DLM.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as X,a as Y}from"./DialogTrigger.vue_vue_type_script_setup_true_lang-D4UtEftz.js";import{_ as ee,a as te,b as se,c as ae}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CXdqpVe3.js";import{B as le,c as U,d as oe}from"./utils-CkrRIo-n.js";import{_ as v}from"./Input.vue_vue_type_script_setup_true_lang-C0UwaCdI.js";import{_ as ne,a as re,b as F,c as L,d as ie,e as E}from"./TableRow.vue_vue_type_script_setup_true_lang-D5A2UAOU.js";import{u as de}from"./plyr-DSPjG9g9.js";import{a as ce}from"./index-C-shOl5l.js";import{f as N}from"./fenlab.api-DtoeRuOX.js";import{r as ue}from"./PlusIcon-5MqP_6eI.js";const me={},pe={width:"18",height:"20",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},fe=t("path",{d:"M1.5 4.99996L4 1.66663H14L16.5 4.99996M1.5 4.99996V16.6666C1.5 17.1087 1.67559 17.5326 1.98816 17.8451C2.30072 18.1577 2.72464 18.3333 3.16667 18.3333H14.8333C15.2754 18.3333 15.6993 18.1577 16.0118 17.8451C16.3244 17.5326 16.5 17.1087 16.5 16.6666V4.99996M1.5 4.99996H16.5M12.3333 8.33329C12.3333 9.21735 11.9821 10.0652 11.357 10.6903C10.7319 11.3154 9.88405 11.6666 9 11.6666C8.11595 11.6666 7.2681 11.3154 6.64298 10.6903C6.01786 10.0652 5.66667 9.21735 5.66667 8.33329",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),_e=[fe];function ge(f,u){return p(),A("svg",pe,_e)}const xe=T(me,[["render",ge]]),be={},ve={width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},he=t("path",{d:"M16.84 8.51037L9.48171 1.15203C9.17337 0.843701 8.74837 0.668701 8.30671 0.668701H2.33171C1.41504 0.668701 0.665039 1.4187 0.665039 2.33537V8.31037C0.665039 8.75203 0.840039 9.17703 1.15671 9.48537L8.51504 16.8437C9.16504 17.4937 10.2234 17.4937 10.8734 16.8437L16.8484 10.8687C17.4984 10.2187 17.4984 9.1687 16.84 8.51037ZM9.69004 15.6687L2.33171 8.31037V2.33537H8.30671L15.665 9.6937L9.69004 15.6687Z",fill:"currentColor"},null,-1),ye=t("path",{d:"M4.41504 5.6687C5.10539 5.6687 5.66504 5.10906 5.66504 4.4187C5.66504 3.72835 5.10539 3.1687 4.41504 3.1687C3.72468 3.1687 3.16504 3.72835 3.16504 4.4187C3.16504 5.10906 3.72468 5.6687 4.41504 5.6687Z",fill:"currentColor"},null,-1),Ce=[he,ye];function we(f,u){return p(),A("svg",ve,Ce)}const $e=T(be,[["render",we]]),Ve=M({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(f){const u=f,c=R(()=>{const{class:d,..._}=u;return _}),r=le(c);return(d,_)=>(p(),P(e(oe),O(e(r),{class:e(U)("text-lg text-[#21272A] text-muted-foreground text-center",u.class)}),{default:l(()=>[H(d.$slots,"default")]),_:3},16,["class"]))}}),De=M({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(f,{emit:u}){const c=f,d=ce(c,"modelValue",u,{passive:!0,defaultValue:c.defaultValue});return(_,x)=>h((p(),A("textarea",{"onUpdate:modelValue":x[0]||(x[0]=y=>I(d)?d.value=y:null),class:m(e(U)("flex w-full h-12 rounded-t-sm bg-[#F2F4F8] border-b border-[#C1C7CD] py-3 px-4 text-sm  transition-border file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-[#697077] outline-none focus:border-b-[3px] disabled:cursor-not-allowed disabled:opacity-50",c.class))},null,2)),[[q,e(d)]])}}),Pe={class:"content"},Ae={class:"flex flex-col gap-10"},ke={class:"flex flex-col gap-6"},Le=t("div",{class:"text-grey"},[t("h3",{class:"text-lg font-bold"}," Buy Side "),t("p",{class:"text-sm"}," Modeliza en posición comprador ")],-1),Ee=t("div",{class:"text-grey"},[t("h3",{class:"text-lg font-bold"}," Sale Side "),t("p",{class:"text-sm"}," Modeliza en posición vendedora ")],-1),Me={class:"flex flex-col gap-6"},Se=t("div",{class:"flex-1 text-grey"},[t("h3",{class:"text-lg font-bold"}," PL / RPL Secured "),t("p",{class:"text-sm"}," Cashflow model perfoming & Re-perfoming loans Secured ")],-1),Fe=t("div",{class:"flex-1 text-grey"},[t("h3",{class:"text-lg font-bold"}," PL / RPL Unsecured "),t("p",{class:"text-sm"}," Cashflow model perfoming & Re-performing loans Unsecured ")],-1),Ne=t("div",{class:"flex-1 text-grey"},[t("h3",{class:"text-lg font-bold"}," NPL Secured "),t("p",{class:"text-sm"}," Modelo de recuperación judicial de non-perfoming loans secured ")],-1),Te=t("div",{class:"flex-1 text-grey"},[t("h3",{class:"text-lg font-bold"}," REO "),t("p",{class:"text-sm"}," Modelo de recuperación judicial de activos inmobiliarios ")],-1),Ue={class:"flex flex-col gap-2"},Be={class:"flex gap-6"},je=t("span",{class:"hidden sm:inline"}," Anterior ",-1),ze={class:"hidden sm:inline"},tt=M({__name:"NewAnalysis",props:{getAnalysis:{type:Function}},setup(f){const u=f,{toast:c}=de(),r=$(1),d=$(!1),_=Z("$loading"),x=()=>({name:"",description:"",modelType:"",masterData:{wacc:"",managementFee:"",costeDesahucioAbogado:"",costeDesahucioProcurador:""}}),y=$(),n=G(x()),C=$("buy"),B=()=>{Object.assign(n,x())},j=async()=>{try{const{data:g}=await N.post("",{method:"get",path:"company-master-data"});y.value=g}catch{c({variant:"danger",title:"¡Ups! Algo salió mal."})}},z=async()=>{const g=_==null?void 0:_.show();try{await N.post("",{method:"post",path:"projects",body:{...n}}),c({variant:"info",title:"¡Análisis creado!"}),B(),r.value=1,u.getAnalysis()}catch(a){c({variant:"danger",title:"¡Ups! Algo salió mal.",description:a.response.data.message.join(`
`)})}finally{g==null||g.hide(),d.value=!1}};return W(()=>{j()}),(g,a)=>(p(),P(e(Y),{open:d.value,"onUpdate:open":a[14]||(a[14]=o=>d.value=o)},{default:l(()=>[s(e(X),{"as-child":""},{default:l(()=>[s(e(k),{class:"gap-1",variant:"green",size:"sm"},{default:l(()=>[s(e(ue),{class:"w-4 h-4"}),i(" Nuevo Análisis ")]),_:1})]),_:1}),s(e(ae),null,{default:l(()=>[s(e(ee),null,{default:l(()=>[s(e(te),null,{default:l(()=>[i(" Nuevo análisis ")]),_:1}),s(e(Ve),null,{default:l(()=>[i(" Paso "+b(r.value),1)]),_:1})]),_:1}),t("div",Pe,[h(t("div",Ae,[s(e(v),{id:"name",type:"text",placeholder:"Nombre proyecto",class:"mt-2",modelValue:n.name,"onUpdate:modelValue":a[0]||(a[0]=o=>n.name=o),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),s(e(De),{id:"description",class:"resize-none h-[112px]",placeholder:"Descripción",modelValue:n.description,"onUpdate:modelValue":a[1]||(a[1]=o=>n.description=o)},null,8,["modelValue"])],512),[[V,r.value===1]]),h(t("div",ke,[t("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":C.value==="buy"}]),onClick:a[2]||(a[2]=o=>C.value="buy")},[s(e(xe)),Le],2),t("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":C.value==="sell"}]),onClick:a[3]||(a[3]=o=>C.value="sell")},[s(e($e)),Ee],2)],512),[[V,r.value===2]]),h(t("div",Me,[t("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&>div]:text-electric-green bg-blue-sky border border-electric-green":n.modelType==="pl/spl s"}]),onClick:a[4]||(a[4]=o=>n.modelType="pl/spl s")},[s(e(D),{variant:"secondary"},{default:l(()=>[i(" PL/SPL S ")]),_:1}),Se],2),t("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":n.modelType==="pl/spl u"}]),onClick:a[5]||(a[5]=o=>n.modelType="pl/spl u")},[s(e(D),{class:"bg-[#EBE0F1]",variant:"secondary"},{default:l(()=>[i(" PL/SPL U ")]),_:1}),Fe],2),t("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":n.modelType==="NPL"}]),onClick:a[6]||(a[6]=o=>n.modelType="NPL")},[s(e(D),{variant:"primary"},{default:l(()=>[i(" NPL ")]),_:1}),Ne],2),t("div",{role:"button",class:m(["flex items-center gap-4 p-3 bg-white rounded-sm",{"text-electric-green [&_div]:text-electric-green bg-blue-sky border border-electric-green":n.modelType==="REO"}]),onClick:a[7]||(a[7]=o=>n.modelType="REO")},[s(e(D),{variant:"default"},{default:l(()=>[i(" REO ")]),_:1}),Te],2)],512),[[V,r.value===3]]),h(t("div",Ue,[s(e(ne),null,{default:l(()=>[s(e(re),null,{default:l(()=>[s(e(F),{class:"[&_th]:px-3 [&_th]:bg-white"},{default:l(()=>[s(e(L),{class:"!bg-[#ECECEC] z-50 relative"},{default:l(()=>[i(" AÑO ")]),_:1}),s(e(L),null,{default:l(()=>[i("IPC (%)")]),_:1}),s(e(L),null,{default:l(()=>[i("HPA (%)")]),_:1})]),_:1})]),_:1}),s(e(ie),null,{default:l(()=>{var o;return[(p(!0),A(K,null,J((o=y.value)==null?void 0:o.macro,w=>(p(),P(e(F),{class:"[&_td]:px-3 [&_td]:bg-white !border-t border-[#ECECEC]",key:w.ano},{default:l(()=>[s(e(E),{class:"!bg-[#ECECEC] font-bold"},{default:l(()=>[i(" Año "+b(w.ano),1)]),_:2},1024),s(e(E),null,{default:l(()=>[i(b(w.IPC),1)]),_:2},1024),s(e(E),null,{default:l(()=>[i(b(w.HPA),1)]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1}),s(e(v),{id:"wacc",type:"text",placeholder:"WACC - Coste de Capital",class:"mt-2",modelValue:n.masterData.wacc,"onUpdate:modelValue":a[8]||(a[8]=o=>n.masterData.wacc=o),required:"",autofocus:"",autocomplete:"wacc"},null,8,["modelValue"]),s(e(v),{id:"managementFee",type:"text",placeholder:"Management fee % s/ Valor inmueble",class:"mt-2",modelValue:n.masterData.managementFee,"onUpdate:modelValue":a[9]||(a[9]=o=>n.masterData.managementFee=o),required:"",autofocus:"",autocomplete:"managementFee"},null,8,["modelValue"]),t("div",Be,[s(e(v),{id:"costeDesahucioAbogado",type:"text",placeholder:"Abogado",class:"mt-2",modelValue:n.masterData.costeDesahucioAbogado,"onUpdate:modelValue":a[10]||(a[10]=o=>n.masterData.costeDesahucioAbogado=o),required:"",autofocus:"",autocomplete:"costeDesahucioAbogado"},null,8,["modelValue"]),s(e(v),{id:"costeDesahucioProcurador",type:"text",placeholder:"Procurador",class:"mt-2",modelValue:n.masterData.costeDesahucioProcurador,"onUpdate:modelValue":a[11]||(a[11]=o=>n.masterData.costeDesahucioProcurador=o),required:"",autofocus:"",autocomplete:"costeDesahucioProcurador"},null,8,["modelValue"])])],512),[[V,r.value===4]])]),s(e(se),{class:"flex justify-between mt-10"},{default:l(()=>[s(e(k),{class:m(["w-full",r.value===1?"invisible":""]),variant:"ghost",size:"sm",onClick:a[12]||(a[12]=o=>r.value--)},{default:l(()=>[s(e(S),{class:"sm:mr-2 text-blue",variant:"left"}),je]),_:1},8,["class"]),s(e(k),{class:"w-full",size:"sm",onClick:a[13]||(a[13]=o=>r.value<4?r.value++:z())},{default:l(()=>[t("span",ze,b(r.value<4?"Siguiente":"Finalizar"),1),r.value<4?(p(),P(e(S),{key:0,class:"sm:ml-2 text-white",variant:"right"})):Q("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}});export{tt as _};
