import{d as x,V as E,Q as w,r as A,o as r,c as B,w as o,a,u as t,e as n,b as v,h as d,k as p}from"./app-ChHnxpdJ.js";import{f as C}from"./fenlab.api-BvFDRDWR.js";import{_ as N}from"./index-CPXdVbzF.js";import{a as h,_ as T,b as U,c as I}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BtZX1cy0.js";import{_ as i}from"./Label.vue_vue_type_script_setup_true_lang-uTd696DN.js";import{t as D}from"./plyr-DS7MIlbc.js";import{_ as R}from"./Textarea.vue_vue_type_script_setup_true_lang-CDNlHSby.js";import{_ as m,a as P}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-C2no71Vs.js";import{_ as S}from"./PostInformation.vue_vue_type_script_setup_true_lang-_gykK8XT.js";const z={class:"space-y-4 my-4 p-4 bg-white/100 rounded-sm border border-[#E5E7EB] shadow-sm"},q={class:"space-y-2"},O={class:"flex items-center space-x-2"},Q={key:0,class:"flex items-center space-x-2"},F={key:1,class:"flex items-center space-x-2"},G={key:2,class:"flex items-center space-x-2"},H={key:0,class:"space-y-2"},te=x({__name:"PostPubliDialog",props:{postData:{}},emits:["updated"],setup(b,{emit:V}){var _,g,y;const u=b,c=E("$loading"),$=(y=(g=(_=w().props)==null?void 0:_.auth)==null?void 0:g.salesforceUser)==null?void 0:y.email,s=A({fenlabId:u.postData.data.fenlabId,email:$,isApproved:!1,status:"",comments:""}),j=V,k=async()=>{const l=c==null?void 0:c.show();try{const e={salesforceId:u.postData.data.salesforceId,isApproved:s.value.status==="approved",isAccepted:s.value.status==="approved",isRejected:s.value.status==="rejected",changeDate:s.value.status==="date_change",approverRequesterOrRejectorEmail:s.value.email,interactingUserEmail:s.value.email};(s.value.status==="rejected"||s.value.status==="pending")&&(e.comments=s.value.comments),await C.post(u.postData.endpoint,e),D({variant:"info",title:"Datos guardados correctamente"})}catch(e){D({variant:"danger",title:"¡Ups! Algo salió mal.",description:e.response.data.error})}finally{l==null||l.hide(),j("updated")}};return(l,e)=>(r(),B(t(I),null,{default:o(()=>[a(t(T),null,{default:o(()=>[a(t(h),null,{default:o(()=>e[2]||(e[2]=[n(" Detalles de la publicación ")])),_:1})]),_:1}),a(S,{information:l.postData.data,"post-type":l.postData.postType},null,8,["information","post-type"]),v("div",z,[v("div",q,[a(t(i),null,{default:o(()=>e[3]||(e[3]=[n("Estado de la publicación")])),_:1}),a(t(P),{modelValue:s.value.status,"onUpdate:modelValue":e[0]||(e[0]=f=>s.value.status=f),class:"flex flex-col space-y-2"},{default:o(()=>[v("div",O,[a(t(m),{id:"approved",value:"approved"}),a(t(i),{for:"approved"},{default:o(()=>e[4]||(e[4]=[n("Aprobar")])),_:1})]),l.postData.postType==="pendingNotary"?(r(),d("div",Q,[a(t(m),{id:"date_change",value:"date_change"}),a(t(i),{for:"date_change"},{default:o(()=>e[5]||(e[5]=[n("Solicitar cambio de fecha")])),_:1})])):p("",!0),l.postData.postType==="pendingPBC"?(r(),d("div",F,[a(t(m),{id:"pending",value:"pending"}),a(t(i),{for:"pending"},{default:o(()=>e[6]||(e[6]=[n("Solicitar documentación adicional")])),_:1})])):p("",!0),l.postData.postType!=="pendingNotary"?(r(),d("div",G,[a(t(m),{id:"rejected",value:"rejected"}),a(t(i),{for:"rejected"},{default:o(()=>e[7]||(e[7]=[n("Rechazar")])),_:1})])):p("",!0)]),_:1},8,["modelValue"])]),s.value.status==="rejected"||s.value.status==="pending"?(r(),d("div",H,[a(t(i),{for:"comments"},{default:o(()=>e[8]||(e[8]=[n("Comentarios")])),_:1}),a(t(R),{id:"comments",class:"h-24",modelValue:s.value.comments,"onUpdate:modelValue":e[1]||(e[1]=f=>s.value.comments=f),placeholder:"Añade un comentario..."},null,8,["modelValue"])])):p("",!0)]),a(t(U),null,{default:o(()=>[a(t(N),{class:"w-full",variant:"green",size:"sm",onClick:k},{default:o(()=>e[9]||(e[9]=[n(" Enviar datos ")])),_:1})]),_:1})]),_:1}))}});export{te as _};
